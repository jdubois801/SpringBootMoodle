-- MySQL Script generated by MySQL Workbench
-- Mon Sep  4 17:27:13 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`config`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`config` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `conf_nam2_uix` (`name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Moodle configuration variables'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`config_plugins`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`config_plugins` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `plugin` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT 'core',
  `name` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `confplug_plunam2_uix` (`plugin` ASC, `name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Moodle modules and plugins configuration variables'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `auth` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT 'manual',
  `confirmed` TINYINT(1) NOT NULL DEFAULT 0,
  `policyagreed` TINYINT(1) NOT NULL DEFAULT 0,
  `deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `suspended` TINYINT(1) NOT NULL DEFAULT 0,
  `mnethostid` BIGINT(10) NOT NULL DEFAULT 0,
  `username` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `password` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `idnumber` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `firstname` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `lastname` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `email` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `emailstop` TINYINT(1) NOT NULL DEFAULT 0,
  `icq` VARCHAR(15) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `skype` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `yahoo` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `aim` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `msn` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `phone1` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `phone2` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `institution` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `department` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `address` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `city` VARCHAR(120) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `country` VARCHAR(2) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `lang` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT 'en',
  `calendartype` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT 'gregorian',
  `theme` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timezone` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '99',
  `firstaccess` BIGINT(10) NOT NULL DEFAULT 0,
  `lastaccess` BIGINT(10) NOT NULL DEFAULT 0,
  `lastlogin` BIGINT(10) NOT NULL DEFAULT 0,
  `currentlogin` BIGINT(10) NOT NULL DEFAULT 0,
  `lastip` VARCHAR(45) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `secret` VARCHAR(15) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `picture` BIGINT(10) NOT NULL DEFAULT 0,
  `url` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NOT NULL DEFAULT 1,
  `mailformat` TINYINT(1) NOT NULL DEFAULT 1,
  `maildigest` TINYINT(1) NOT NULL DEFAULT 0,
  `maildisplay` TINYINT(2) NOT NULL DEFAULT 2,
  `autosubscribe` TINYINT(1) NOT NULL DEFAULT 1,
  `trackforums` TINYINT(1) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `trustbitmask` BIGINT(10) NOT NULL DEFAULT 0,
  `imagealt` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `lastnamephonetic` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `firstnamephonetic` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `middlename` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `alternatename` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `user_mneuse2_uix` (`mnethostid` ASC, `username` ASC),
  INDEX `user_del2_ix` (`deleted` ASC),
  INDEX `user_con2_ix` (`confirmed` ASC),
  INDEX `user_fir3_ix` (`firstname` ASC),
  INDEX `user_las4_ix` (`lastname` ASC),
  INDEX `user_cit2_ix` (`city` ASC),
  INDEX `user_cou2_ix` (`country` ASC),
  INDEX `user_las5_ix` (`lastaccess` ASC),
  INDEX `user_ema2_ix` (`email` ASC),
  INDEX `user_aut2_ix` (`auth` ASC),
  INDEX `user_idn2_ix` (`idnumber` ASC),
  INDEX `user_fir4_ix` (`firstnamephonetic` ASC),
  INDEX `user_las6_ix` (`lastnamephonetic` ASC),
  INDEX `user_mid2_ix` (`middlename` ASC),
  INDEX `user_alt2_ix` (`alternatename` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'One record for each person'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`config_log`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`config_log` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `plugin` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `name` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `oldvalue` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `conflog_tim2_ix` (`timemodified` ASC),
  INDEX `conflog_use3_ix` (`userid` ASC),
  CONSTRAINT `conflog_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Changes done in server configuration through admin UI'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`upgrade_log`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`upgrade_log` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `type` BIGINT(10) NOT NULL,
  `plugin` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `version` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `targetversion` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `info` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `details` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `backtrace` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `userid` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `upgrlog_tim2_ix` (`timemodified` ASC),
  INDEX `upgrlog_typtim2_ix` (`type` ASC, `timemodified` ASC),
  INDEX `upgrlog_use3_ix` (`userid` ASC),
  CONSTRAINT `upgrlog_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Upgrade logging'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_categories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_categories` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `idnumber` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NOT NULL DEFAULT 0,
  `parent` BIGINT(10) NOT NULL DEFAULT 0,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  `coursecount` BIGINT(10) NOT NULL DEFAULT 0,
  `visible` TINYINT(1) NOT NULL DEFAULT 1,
  `visibleold` TINYINT(1) NOT NULL DEFAULT 1,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `depth` BIGINT(10) NOT NULL DEFAULT 0,
  `path` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `theme` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `courcate_par3_ix` (`parent` ASC),
  CONSTRAINT `courcate_par_fk`
    FOREIGN KEY (`parent`)
    REFERENCES `mydb`.`course_categories` (`id`),
  CONSTRAINT `course_categories_erd_course_id`
    FOREIGN KEY (`parent`)
    REFERENCES `mydb`.`course_categories` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Course categories'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `category` BIGINT(10) NOT NULL DEFAULT 0,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  `fullname` VARCHAR(254) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `shortname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `idnumber` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `summary` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `summaryformat` TINYINT(2) NOT NULL DEFAULT 0,
  `format` VARCHAR(21) CHARACTER SET 'utf8' NOT NULL DEFAULT 'topics',
  `showgrades` TINYINT(2) NOT NULL DEFAULT 1,
  `newsitems` MEDIUMINT(5) NOT NULL DEFAULT 1,
  `startdate` BIGINT(10) NOT NULL DEFAULT 0,
  `enddate` BIGINT(10) NOT NULL DEFAULT 0,
  `marker` BIGINT(10) NOT NULL DEFAULT 0,
  `maxbytes` BIGINT(10) NOT NULL DEFAULT 0,
  `legacyfiles` SMALLINT(4) NOT NULL DEFAULT 0,
  `showreports` SMALLINT(4) NOT NULL DEFAULT 0,
  `visible` TINYINT(1) NOT NULL DEFAULT 1,
  `visibleold` TINYINT(1) NOT NULL DEFAULT 1,
  `groupmode` SMALLINT(4) NOT NULL DEFAULT 0,
  `groupmodeforce` SMALLINT(4) NOT NULL DEFAULT 0,
  `defaultgroupingid` BIGINT(10) NOT NULL DEFAULT 0,
  `lang` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `calendartype` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `theme` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `requested` TINYINT(1) NOT NULL DEFAULT 0,
  `enablecompletion` TINYINT(1) NOT NULL DEFAULT 0,
  `completionnotify` TINYINT(1) NOT NULL DEFAULT 0,
  `cacherev` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `cour_cat2_ix` (`category` ASC),
  INDEX `cour_idn2_ix` (`idnumber` ASC),
  INDEX `cour_sho2_ix` (`shortname` ASC),
  INDEX `cour_sor2_ix` (`sortorder` ASC),
  CONSTRAINT `course_erd_category_id`
    FOREIGN KEY (`category`)
    REFERENCES `mydb`.`course_categories` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Central course table'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_completion_aggr_methd`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_completion_aggr_methd` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `criteriatype` BIGINT(10) NULL DEFAULT NULL,
  `method` TINYINT(1) NOT NULL DEFAULT 0,
  `value` DECIMAL(10,5) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `courcompaggrmeth_cou2_ix` (`course` ASC),
  INDEX `courcompaggrmeth_cri2_ix` (`criteriatype` ASC),
  UNIQUE INDEX `courcompaggrmeth_coucri2_uix` (`course` ASC, `criteriatype` ASC),
  CONSTRAINT `course_completion_aggr_methd_erd_course_id`
    FOREIGN KEY (`course`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Course completion aggregation methods for criteria'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_completion_criteria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_completion_criteria` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `criteriatype` BIGINT(10) NOT NULL DEFAULT 0,
  `module` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `moduleinstance` BIGINT(10) NULL DEFAULT NULL,
  `courseinstance` BIGINT(10) NULL DEFAULT NULL,
  `enrolperiod` BIGINT(10) NULL DEFAULT NULL,
  `timeend` BIGINT(10) NULL DEFAULT NULL,
  `gradepass` DECIMAL(10,5) NULL DEFAULT NULL,
  `role` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `courcompcrit_cou2_ix` (`course` ASC),
  CONSTRAINT `course_completion_criteria_erd_course_id`
    FOREIGN KEY (`course`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Course completion criteria'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_completion_crit_compl`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_completion_crit_compl` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `criteriaid` BIGINT(10) NOT NULL DEFAULT 0,
  `gradefinal` DECIMAL(10,5) NULL DEFAULT NULL,
  `unenroled` BIGINT(10) NULL DEFAULT NULL,
  `timecompleted` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `courcompcritcomp_use2_ix` (`userid` ASC),
  INDEX `courcompcritcomp_cou2_ix` (`course` ASC),
  INDEX `courcompcritcomp_cri2_ix` (`criteriaid` ASC),
  INDEX `courcompcritcomp_tim2_ix` (`timecompleted` ASC),
  UNIQUE INDEX `courcompcritcomp_usecoucr2_uix` (`userid` ASC, `course` ASC, `criteriaid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Course completion user records'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_completions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_completions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `timeenrolled` BIGINT(10) NOT NULL DEFAULT 0,
  `timestarted` BIGINT(10) NOT NULL DEFAULT 0,
  `timecompleted` BIGINT(10) NULL DEFAULT NULL,
  `reaggregate` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `courcomp_use2_ix` (`userid` ASC),
  INDEX `courcomp_cou2_ix` (`course` ASC),
  INDEX `courcomp_tim2_ix` (`timecompleted` ASC),
  UNIQUE INDEX `courcomp_usecou2_uix` (`userid` ASC, `course` ASC),
  CONSTRAINT `course_completions_erd_course_id`
    FOREIGN KEY (`course`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Course completion records'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `enrol` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `status` BIGINT(10) NOT NULL DEFAULT 0,
  `courseid` BIGINT(10) NOT NULL,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `enrolperiod` BIGINT(10) NULL DEFAULT 0,
  `enrolstartdate` BIGINT(10) NULL DEFAULT 0,
  `enrolenddate` BIGINT(10) NULL DEFAULT 0,
  `expirynotify` TINYINT(1) NULL DEFAULT 0,
  `expirythreshold` BIGINT(10) NULL DEFAULT 0,
  `notifyall` TINYINT(1) NULL DEFAULT 0,
  `password` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `cost` VARCHAR(20) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `currency` VARCHAR(3) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `roleid` BIGINT(10) NULL DEFAULT 0,
  `customint1` BIGINT(10) NULL DEFAULT NULL,
  `customint2` BIGINT(10) NULL DEFAULT NULL,
  `customint3` BIGINT(10) NULL DEFAULT NULL,
  `customint4` BIGINT(10) NULL DEFAULT NULL,
  `customint5` BIGINT(10) NULL DEFAULT NULL,
  `customint6` BIGINT(10) NULL DEFAULT NULL,
  `customint7` BIGINT(10) NULL DEFAULT NULL,
  `customint8` BIGINT(10) NULL DEFAULT NULL,
  `customchar1` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `customchar2` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `customchar3` VARCHAR(1333) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `customdec1` DECIMAL(12,7) NULL DEFAULT NULL,
  `customdec2` DECIMAL(12,7) NULL DEFAULT NULL,
  `customtext1` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `customtext2` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `customtext3` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `customtext4` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `enro_enr2_ix` (`enrol` ASC),
  INDEX `enro_cou3_ix` (`courseid` ASC),
  CONSTRAINT `enro_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Instances of enrolment plugins used in courses, fields marke'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`user_enrolments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user_enrolments` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `status` BIGINT(10) NOT NULL DEFAULT 0,
  `enrolid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `timestart` BIGINT(10) NOT NULL DEFAULT 0,
  `timeend` BIGINT(10) NOT NULL DEFAULT 2147483647,
  `modifierid` BIGINT(10) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `userenro_enruse2_uix` (`enrolid` ASC, `userid` ASC),
  INDEX `userenro_enr3_ix` (`enrolid` ASC),
  INDEX `userenro_use3_ix` (`userid` ASC),
  INDEX `userenro_mod3_ix` (`modifierid` ASC),
  CONSTRAINT `userenro_enr_fk`
    FOREIGN KEY (`enrolid`)
    REFERENCES `mydb`.`enrol` (`id`),
  CONSTRAINT `userenro_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `userenro_mod_fk`
    FOREIGN KEY (`modifierid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Users participating in courses (aka enrolled users) - everyb'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`groupings`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`groupings` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `idnumber` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NOT NULL DEFAULT 0,
  `configdata` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `grou_idn3_ix` (`idnumber` ASC),
  INDEX `grou_cou6_ix` (`courseid` ASC),
  CONSTRAINT `grou_cou4_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'A grouping is a collection of groups. WAS: groups_groupings'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_modules`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_modules` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `module` BIGINT(10) NOT NULL DEFAULT 0,
  `instance` BIGINT(10) NOT NULL DEFAULT 0,
  `section` BIGINT(10) NOT NULL DEFAULT 0,
  `idnumber` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `added` BIGINT(10) NOT NULL DEFAULT 0,
  `score` SMALLINT(4) NOT NULL DEFAULT 0,
  `indent` MEDIUMINT(5) NOT NULL DEFAULT 0,
  `visible` TINYINT(1) NOT NULL DEFAULT 1,
  `visibleoncoursepage` TINYINT(1) NOT NULL DEFAULT 1,
  `visibleold` TINYINT(1) NOT NULL DEFAULT 1,
  `groupmode` SMALLINT(4) NOT NULL DEFAULT 0,
  `groupingid` BIGINT(10) NOT NULL DEFAULT 0,
  `completion` TINYINT(1) NOT NULL DEFAULT 0,
  `completiongradeitemnumber` BIGINT(10) NULL DEFAULT NULL,
  `completionview` TINYINT(1) NOT NULL DEFAULT 0,
  `completionexpected` BIGINT(10) NOT NULL DEFAULT 0,
  `showdescription` TINYINT(1) NOT NULL DEFAULT 0,
  `availability` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `deletioninprogress` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `courmodu_vis2_ix` (`visible` ASC),
  INDEX `courmodu_cou2_ix` (`course` ASC),
  INDEX `courmodu_mod2_ix` (`module` ASC),
  INDEX `courmodu_ins2_ix` (`instance` ASC),
  INDEX `courmodu_idncou2_ix` (`idnumber` ASC, `course` ASC),
  INDEX `courmodu_gro3_ix` (`groupingid` ASC),
  CONSTRAINT `courmodu_gro_fk`
    FOREIGN KEY (`groupingid`)
    REFERENCES `mydb`.`groupings` (`id`),
  CONSTRAINT `course_modules_erd_course_id`
    FOREIGN KEY (`course`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'course_modules table retrofitted from MySQL'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_modules_completion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_modules_completion` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `coursemoduleid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `completionstate` TINYINT(1) NOT NULL,
  `viewed` TINYINT(1) NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `courmoducomp_cou2_ix` (`coursemoduleid` ASC),
  UNIQUE INDEX `courmoducomp_usecou2_uix` (`userid` ASC, `coursemoduleid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the completion state (completed or not completed, etc'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_sections`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_sections` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `section` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `summary` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `summaryformat` TINYINT(2) NOT NULL DEFAULT 0,
  `sequence` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `visible` TINYINT(1) NOT NULL DEFAULT 1,
  `availability` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `coursect_cousec2_uix` (`course` ASC, `section` ASC),
  CONSTRAINT `course_sections_erd_course_id`
    FOREIGN KEY (`course`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'to define the sections for each course'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_request`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_request` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `fullname` VARCHAR(254) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `shortname` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `summary` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `summaryformat` TINYINT(2) NOT NULL DEFAULT 0,
  `category` BIGINT(10) NOT NULL DEFAULT 0,
  `reason` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `requester` BIGINT(10) NOT NULL DEFAULT 0,
  `password` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `courrequ_sho2_ix` (`shortname` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'course requests'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_format_options`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_format_options` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL,
  `format` VARCHAR(21) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `sectionid` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `courformopti_couforsecnam2_uix` (`courseid` ASC, `format` ASC, `sectionid` ASC, `name` ASC),
  INDEX `courformopti_cou3_ix` (`courseid` ASC),
  CONSTRAINT `courformopti_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores format-specific options for the course or course sect'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`context`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`context` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `contextlevel` BIGINT(10) NOT NULL DEFAULT 0,
  `instanceid` BIGINT(10) NOT NULL DEFAULT 0,
  `path` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `depth` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `cont_conins2_uix` (`contextlevel` ASC, `instanceid` ASC),
  INDEX `cont_ins2_ix` (`instanceid` ASC),
  INDEX `cont_pat2_ix` (`path` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'one of these must be set'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`filter_active`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`filter_active` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `filter` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `contextid` BIGINT(10) NOT NULL,
  `active` SMALLINT(4) NOT NULL,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `filtacti_confil2_uix` (`contextid` ASC, `filter` ASC),
  INDEX `filtacti_con3_ix` (`contextid` ASC),
  CONSTRAINT `filtacti_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores information about which filters are active in which c'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`filter_config`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`filter_config` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `filter` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `contextid` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `filtconf_confilnam2_uix` (`contextid` ASC, `filter` ASC, `name` ASC),
  INDEX `filtconf_con3_ix` (`contextid` ASC),
  CONSTRAINT `filtconf_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores per-context configuration settings for filters which '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`event`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`event` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `format` SMALLINT(4) NOT NULL DEFAULT 0,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `repeatid` BIGINT(10) NOT NULL DEFAULT 0,
  `modulename` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `instance` BIGINT(10) NOT NULL DEFAULT 0,
  `type` SMALLINT(4) NOT NULL DEFAULT 0,
  `eventtype` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timestart` BIGINT(10) NOT NULL DEFAULT 0,
  `timeduration` BIGINT(10) NOT NULL DEFAULT 0,
  `timesort` BIGINT(10) NULL DEFAULT NULL,
  `visible` SMALLINT(4) NOT NULL DEFAULT 1,
  `uuid` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `sequence` BIGINT(10) NOT NULL DEFAULT 1,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `subscriptionid` BIGINT(10) NULL DEFAULT NULL,
  `priority` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `even_cou2_ix` (`courseid` ASC),
  INDEX `even_use2_ix` (`userid` ASC),
  INDEX `even_tim3_ix` (`timestart` ASC),
  INDEX `even_tim4_ix` (`timeduration` ASC),
  INDEX `even_typtim2_ix` (`type` ASC, `timesort` ASC),
  INDEX `even_grocouvisuse2_ix` (`groupid` ASC, `courseid` ASC, `visible` ASC, `userid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'For everything with a time associated to it'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`cache_filters`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`cache_filters` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `filter` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `version` BIGINT(10) NOT NULL DEFAULT 0,
  `md5key` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `rawtext` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `cachfilt_filmd52_ix` (`filter` ASC, `md5key` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'For keeping information about cached data'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`log`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`log` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `time` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `ip` VARCHAR(45) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `module` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `cmid` BIGINT(10) NOT NULL DEFAULT 0,
  `action` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `url` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `info` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `log_coumodact2_ix` (`course` ASC, `module` ASC, `action` ASC),
  INDEX `log_tim2_ix` (`time` ASC),
  INDEX `log_act2_ix` (`action` ASC),
  INDEX `log_usecou2_ix` (`userid` ASC, `course` ASC),
  INDEX `log_cmi2_ix` (`cmid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Every action is logged as far as possible'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`log_queries`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`log_queries` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `qtype` MEDIUMINT(5) NOT NULL,
  `sqltext` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `sqlparams` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `error` MEDIUMINT(5) NOT NULL DEFAULT 0,
  `info` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `backtrace` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `exectime` DECIMAL(10,5) NOT NULL,
  `timelogged` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Logged database queries.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`log_display`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`log_display` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `module` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `action` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `mtable` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `field` VARCHAR(200) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `logdisp_modact2_uix` (`module` ASC, `action` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'For a particular module/action, specifies a moodle table/fie'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`message`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`message` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `useridfrom` BIGINT(10) NOT NULL DEFAULT 0,
  `useridto` BIGINT(10) NOT NULL DEFAULT 0,
  `subject` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `fullmessage` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `fullmessageformat` SMALLINT(4) NULL DEFAULT 0,
  `fullmessagehtml` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `smallmessage` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `notification` TINYINT(1) NULL DEFAULT 0,
  `contexturl` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `contexturlname` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timeuserfromdeleted` BIGINT(10) NOT NULL DEFAULT 0,
  `timeusertodeleted` BIGINT(10) NOT NULL DEFAULT 0,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `eventtype` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `mess_useusetimtim2_ix` (`useridfrom` ASC, `useridto` ASC, `timeuserfromdeleted` ASC, `timeusertodeleted` ASC),
  INDEX `mess_usetimnot3_ix` (`useridfrom` ASC, `timeuserfromdeleted` ASC, `notification` ASC),
  INDEX `mess_usetimnot4_ix` (`useridto` ASC, `timeusertodeleted` ASC, `notification` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores all unread messages'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`message_read`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`message_read` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `useridfrom` BIGINT(10) NOT NULL DEFAULT 0,
  `useridto` BIGINT(10) NOT NULL DEFAULT 0,
  `subject` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `fullmessage` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `fullmessageformat` SMALLINT(4) NULL DEFAULT 0,
  `fullmessagehtml` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `smallmessage` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `notification` TINYINT(1) NULL DEFAULT 0,
  `contexturl` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `contexturlname` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timeread` BIGINT(10) NOT NULL DEFAULT 0,
  `timeuserfromdeleted` BIGINT(10) NOT NULL DEFAULT 0,
  `timeusertodeleted` BIGINT(10) NOT NULL DEFAULT 0,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `eventtype` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `messread_useusetimtim2_ix` (`useridfrom` ASC, `useridto` ASC, `timeuserfromdeleted` ASC, `timeusertodeleted` ASC),
  INDEX `messread_nottim2_ix` (`notification` ASC, `timeread` ASC),
  INDEX `messread_usetimnot3_ix` (`useridfrom` ASC, `timeuserfromdeleted` ASC, `notification` ASC),
  INDEX `messread_usetimnot4_ix` (`useridto` ASC, `timeusertodeleted` ASC, `notification` ASC),
  CONSTRAINT `message_read_erd_user_id`
    FOREIGN KEY (`useridfrom`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `message_read_erd_user_id`
    FOREIGN KEY (`useridto`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores all messages that have been read'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`message_contacts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`message_contacts` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `contactid` BIGINT(10) NOT NULL DEFAULT 0,
  `blocked` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `messcont_usecon2_uix` (`userid` ASC, `contactid` ASC),
  CONSTRAINT `message_contacts_erd_user_id`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Maintains lists of relationships between users'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`modules`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`modules` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `cron` BIGINT(10) NOT NULL DEFAULT 0,
  `lastcron` BIGINT(10) NOT NULL DEFAULT 0,
  `search` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `visible` TINYINT(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `modu_nam2_ix` (`name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'modules available in the site'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`my_pages`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`my_pages` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NULL DEFAULT 0,
  `name` VARCHAR(200) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `private` TINYINT(1) NOT NULL DEFAULT 1,
  `sortorder` MEDIUMINT(6) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `mypage_usepri2_ix` (`userid` ASC, `private` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Extra user pages for the My Moodle system'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`sessions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`sessions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `state` BIGINT(10) NOT NULL DEFAULT 0,
  `sid` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `userid` BIGINT(10) NOT NULL,
  `sessdata` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `firstip` VARCHAR(45) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `lastip` VARCHAR(45) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `sess_sta2_ix` (`state` ASC),
  UNIQUE INDEX `sess_sid2_uix` (`sid` ASC),
  INDEX `sess_tim3_ix` (`timecreated` ASC),
  INDEX `sess_tim4_ix` (`timemodified` ASC),
  INDEX `sess_use3_ix` (`userid` ASC),
  CONSTRAINT `sess_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Database based session storage - now recommended'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`user_preferences`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user_preferences` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` VARCHAR(1333) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `userpref_usenam2_uix` (`userid` ASC, `name` ASC),
  CONSTRAINT `user_preferences_erd_user_id`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `user_preferences_erd_user_id`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Allows modules to store arbitrary user preferences'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`user_lastaccess`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user_lastaccess` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `timeaccess` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `userlast_usecou2_uix` (`userid` ASC, `courseid` ASC),
  INDEX `userlast_use2_ix` (`userid` ASC),
  INDEX `userlast_cou2_ix` (`courseid` ASC),
  CONSTRAINT `user_lastaccess_erd_user_id`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'To keep track of course page access times, used in online pa'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`user_password_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user_password_history` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `hash` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timecreated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `userpasshist_use3_ix` (`userid` ASC),
  CONSTRAINT `userpasshist_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'A rotating log of hashes of previously used passwords for ea'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scale`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scale` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `scale` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `descriptionformat` TINYINT(2) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `scal_cou2_ix` (`courseid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines grading scales'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scale_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scale_history` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `action` BIGINT(10) NOT NULL DEFAULT 0,
  `oldid` BIGINT(10) NOT NULL,
  `source` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `loggeduser` BIGINT(10) NULL DEFAULT NULL,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `scale` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `scalhist_act2_ix` (`action` ASC),
  INDEX `scalhist_old3_ix` (`oldid` ASC),
  INDEX `scalhist_cou3_ix` (`courseid` ASC),
  INDEX `scalhist_log3_ix` (`loggeduser` ASC),
  CONSTRAINT `scalhist_old_fk`
    FOREIGN KEY (`oldid`)
    REFERENCES `mydb`.`scale` (`id`),
  CONSTRAINT `scalhist_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `scalhist_log_fk`
    FOREIGN KEY (`loggeduser`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'History table'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`stats_daily`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`stats_daily` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `timeend` BIGINT(10) NOT NULL DEFAULT 0,
  `roleid` BIGINT(10) NOT NULL DEFAULT 0,
  `stattype` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT 'activity',
  `stat1` BIGINT(10) NOT NULL DEFAULT 0,
  `stat2` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `statdail_cou2_ix` (`courseid` ASC),
  INDEX `statdail_tim2_ix` (`timeend` ASC),
  INDEX `statdail_rol2_ix` (`roleid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'to accumulate daily stats'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`stats_weekly`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`stats_weekly` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `timeend` BIGINT(10) NOT NULL DEFAULT 0,
  `roleid` BIGINT(10) NOT NULL DEFAULT 0,
  `stattype` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT 'activity',
  `stat1` BIGINT(10) NOT NULL DEFAULT 0,
  `stat2` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `statweek_cou2_ix` (`courseid` ASC),
  INDEX `statweek_tim2_ix` (`timeend` ASC),
  INDEX `statweek_rol2_ix` (`roleid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'To accumulate weekly stats'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`stats_monthly`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`stats_monthly` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `timeend` BIGINT(10) NOT NULL DEFAULT 0,
  `roleid` BIGINT(10) NOT NULL DEFAULT 0,
  `stattype` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT 'activity',
  `stat1` BIGINT(10) NOT NULL DEFAULT 0,
  `stat2` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `statmont_cou2_ix` (`courseid` ASC),
  INDEX `statmont_tim2_ix` (`timeend` ASC),
  INDEX `statmont_rol2_ix` (`roleid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'To accumulate monthly stats'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`stats_user_daily`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`stats_user_daily` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `roleid` BIGINT(10) NOT NULL DEFAULT 0,
  `timeend` BIGINT(10) NOT NULL DEFAULT 0,
  `statsreads` BIGINT(10) NOT NULL DEFAULT 0,
  `statswrites` BIGINT(10) NOT NULL DEFAULT 0,
  `stattype` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `statuserdail_cou2_ix` (`courseid` ASC),
  INDEX `statuserdail_use2_ix` (`userid` ASC),
  INDEX `statuserdail_rol2_ix` (`roleid` ASC),
  INDEX `statuserdail_tim2_ix` (`timeend` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'To accumulate daily stats per course/user'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`stats_user_weekly`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`stats_user_weekly` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `roleid` BIGINT(10) NOT NULL DEFAULT 0,
  `timeend` BIGINT(10) NOT NULL DEFAULT 0,
  `statsreads` BIGINT(10) NOT NULL DEFAULT 0,
  `statswrites` BIGINT(10) NOT NULL DEFAULT 0,
  `stattype` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `statuserweek_cou2_ix` (`courseid` ASC),
  INDEX `statuserweek_use2_ix` (`userid` ASC),
  INDEX `statuserweek_rol2_ix` (`roleid` ASC),
  INDEX `statuserweek_tim2_ix` (`timeend` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'To accumulate weekly stats per course/user'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`stats_user_monthly`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`stats_user_monthly` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `roleid` BIGINT(10) NOT NULL DEFAULT 0,
  `timeend` BIGINT(10) NOT NULL DEFAULT 0,
  `statsreads` BIGINT(10) NOT NULL DEFAULT 0,
  `statswrites` BIGINT(10) NOT NULL DEFAULT 0,
  `stattype` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `statusermont_cou2_ix` (`courseid` ASC),
  INDEX `statusermont_use2_ix` (`userid` ASC),
  INDEX `statusermont_rol2_ix` (`roleid` ASC),
  INDEX `statusermont_tim2_ix` (`timeend` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'To accumulate monthly stats per course/user'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`post`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`post` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `module` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NOT NULL DEFAULT 0,
  `moduleid` BIGINT(10) NOT NULL DEFAULT 0,
  `coursemoduleid` BIGINT(10) NOT NULL DEFAULT 0,
  `subject` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `summary` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `content` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `uniquehash` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `rating` BIGINT(10) NOT NULL DEFAULT 0,
  `format` BIGINT(10) NOT NULL DEFAULT 0,
  `summaryformat` TINYINT(2) NOT NULL DEFAULT 0,
  `attachment` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `publishstate` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT 'draft',
  `lastmodified` BIGINT(10) NOT NULL DEFAULT 0,
  `created` BIGINT(10) NOT NULL DEFAULT 0,
  `usermodified` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `post_iduse2_uix` (`id` ASC, `userid` ASC),
  INDEX `post_las2_ix` (`lastmodified` ASC),
  INDEX `post_mod2_ix` (`module` ASC),
  INDEX `post_sub2_ix` (`subject` ASC),
  INDEX `post_use3_ix` (`usermodified` ASC),
  CONSTRAINT `post_use_fk`
    FOREIGN KEY (`usermodified`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Generic post table to hold data blog entries etc in differen'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`role`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`role` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `shortname` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  `archetype` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `role_sor2_uix` (`sortorder` ASC),
  UNIQUE INDEX `role_sho2_uix` (`shortname` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'moodle roles'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`context_temp`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`context_temp` (
  `id` BIGINT(10) NOT NULL,
  `path` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `depth` TINYINT(2) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Used by build_context_path() in upgrade and cron to keep con'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`capabilities`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`capabilities` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `captype` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `contextlevel` BIGINT(10) NOT NULL DEFAULT 0,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `riskbitmask` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `capa_nam2_uix` (`name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'this defines all capabilities'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`role_allow_assign`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`role_allow_assign` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `roleid` BIGINT(10) NOT NULL DEFAULT 0,
  `allowassign` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `rolealloassi_rolall2_uix` (`roleid` ASC, `allowassign` ASC),
  INDEX `rolealloassi_rol3_ix` (`roleid` ASC),
  INDEX `rolealloassi_all3_ix` (`allowassign` ASC),
  CONSTRAINT `rolealloassi_rol_fk`
    FOREIGN KEY (`roleid`)
    REFERENCES `mydb`.`role` (`id`),
  CONSTRAINT `rolealloassi_all_fk`
    FOREIGN KEY (`allowassign`)
    REFERENCES `mydb`.`role` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'this defines what role can assign what role'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`role_allow_override`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`role_allow_override` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `roleid` BIGINT(10) NOT NULL DEFAULT 0,
  `allowoverride` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `rolealloover_rolall2_uix` (`roleid` ASC, `allowoverride` ASC),
  INDEX `rolealloover_rol3_ix` (`roleid` ASC),
  INDEX `rolealloover_all3_ix` (`allowoverride` ASC),
  CONSTRAINT `rolealloover_rol_fk`
    FOREIGN KEY (`roleid`)
    REFERENCES `mydb`.`role` (`id`),
  CONSTRAINT `rolealloover_all_fk`
    FOREIGN KEY (`allowoverride`)
    REFERENCES `mydb`.`role` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'this defines what role can override what role'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`role_allow_switch`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`role_allow_switch` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `roleid` BIGINT(10) NOT NULL,
  `allowswitch` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `rolealloswit_rolall2_uix` (`roleid` ASC, `allowswitch` ASC),
  INDEX `rolealloswit_rol3_ix` (`roleid` ASC),
  INDEX `rolealloswit_all3_ix` (`allowswitch` ASC),
  CONSTRAINT `rolealloswit_rol_fk`
    FOREIGN KEY (`roleid`)
    REFERENCES `mydb`.`role` (`id`),
  CONSTRAINT `rolealloswit_all_fk`
    FOREIGN KEY (`allowswitch`)
    REFERENCES `mydb`.`role` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table stores which which other roles a user is allowed '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`role_assignments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`role_assignments` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `roleid` BIGINT(10) NOT NULL DEFAULT 0,
  `contextid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `modifierid` BIGINT(10) NOT NULL DEFAULT 0,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemid` BIGINT(10) NOT NULL DEFAULT 0,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `roleassi_sor2_ix` (`sortorder` ASC),
  INDEX `roleassi_rolcon2_ix` (`roleid` ASC, `contextid` ASC),
  INDEX `roleassi_useconrol2_ix` (`userid` ASC, `contextid` ASC, `roleid` ASC),
  INDEX `roleassi_comiteuse2_ix` (`component` ASC, `itemid` ASC, `userid` ASC),
  INDEX `roleassi_rol3_ix` (`roleid` ASC),
  INDEX `roleassi_con3_ix` (`contextid` ASC),
  INDEX `roleassi_use3_ix` (`userid` ASC),
  CONSTRAINT `roleassi_rol_fk`
    FOREIGN KEY (`roleid`)
    REFERENCES `mydb`.`role` (`id`),
  CONSTRAINT `roleassi_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`),
  CONSTRAINT `roleassi_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'assigning roles in different context'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`role_capabilities`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`role_capabilities` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `contextid` BIGINT(10) NOT NULL DEFAULT 0,
  `roleid` BIGINT(10) NOT NULL DEFAULT 0,
  `capability` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `permission` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `modifierid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `rolecapa_rolconcap2_uix` (`roleid` ASC, `contextid` ASC, `capability` ASC),
  INDEX `rolecapa_rol3_ix` (`roleid` ASC),
  INDEX `rolecapa_con3_ix` (`contextid` ASC),
  INDEX `rolecapa_mod3_ix` (`modifierid` ASC),
  INDEX `rolecapa_cap3_ix` (`capability` ASC),
  CONSTRAINT `rolecapa_rol_fk`
    FOREIGN KEY (`roleid`)
    REFERENCES `mydb`.`role` (`id`),
  CONSTRAINT `rolecapa_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`),
  CONSTRAINT `rolecapa_mod_fk`
    FOREIGN KEY (`modifierid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `rolecapa_cap_fk`
    FOREIGN KEY (`capability`)
    REFERENCES `mydb`.`capabilities` (`name`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'permission has to be signed, overriding a capability for a p'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`role_names`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`role_names` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `roleid` BIGINT(10) NOT NULL DEFAULT 0,
  `contextid` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `rolename_rolcon2_uix` (`roleid` ASC, `contextid` ASC),
  INDEX `rolename_rol3_ix` (`roleid` ASC),
  INDEX `rolename_con3_ix` (`contextid` ASC),
  CONSTRAINT `rolename_rol_fk`
    FOREIGN KEY (`roleid`)
    REFERENCES `mydb`.`role` (`id`),
  CONSTRAINT `rolename_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'role names in native strings'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`role_sortorder`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`role_sortorder` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `roleid` BIGINT(10) NOT NULL,
  `contextid` BIGINT(10) NOT NULL,
  `sortoder` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `rolesort_userolcon2_uix` (`userid` ASC, `roleid` ASC, `contextid` ASC),
  INDEX `rolesort_use3_ix` (`userid` ASC),
  INDEX `rolesort_rol3_ix` (`roleid` ASC),
  INDEX `rolesort_con3_ix` (`contextid` ASC),
  CONSTRAINT `rolesort_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `rolesort_rol_fk`
    FOREIGN KEY (`roleid`)
    REFERENCES `mydb`.`role` (`id`),
  CONSTRAINT `rolesort_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'sort order of course managers in a course'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`role_context_levels`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`role_context_levels` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `roleid` BIGINT(10) NOT NULL,
  `contextlevel` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `rolecontleve_conrol2_uix` (`contextlevel` ASC, `roleid` ASC),
  INDEX `rolecontleve_rol3_ix` (`roleid` ASC),
  CONSTRAINT `rolecontleve_rol_fk`
    FOREIGN KEY (`roleid`)
    REFERENCES `mydb`.`role` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Lists which roles can be assigned at which context levels. T'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`user_info_field`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user_info_field` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT 'shortname',
  `name` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `datatype` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NOT NULL DEFAULT 0,
  `categoryid` BIGINT(10) NOT NULL DEFAULT 0,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  `required` TINYINT(2) NOT NULL DEFAULT 0,
  `locked` TINYINT(2) NOT NULL DEFAULT 0,
  `visible` SMALLINT(4) NOT NULL DEFAULT 0,
  `forceunique` TINYINT(2) NOT NULL DEFAULT 0,
  `signup` TINYINT(2) NOT NULL DEFAULT 0,
  `defaultdata` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `defaultdataformat` TINYINT(2) NOT NULL DEFAULT 0,
  `param1` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param2` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param3` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param4` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param5` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Customisable user profile fields'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`user_info_category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user_info_category` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Customisable fields categories'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`user_info_data`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user_info_data` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `fieldid` BIGINT(10) NOT NULL DEFAULT 0,
  `data` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `dataformat` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `userinfodata_usefie2_uix` (`userid` ASC, `fieldid` ASC),
  INDEX `user_info_data_erd_user_id` (`fieldid` ASC),
  CONSTRAINT `user_info_data_erd_user_id`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `user_info_data_erd_user_id`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `user_info_data_erd_user_id`
    FOREIGN KEY (`fieldid`)
    REFERENCES `mydb`.`user_info_field` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Data for the customisable user fields'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_categories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_categories` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `contextid` BIGINT(10) NOT NULL DEFAULT 0,
  `info` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `infoformat` TINYINT(2) NOT NULL DEFAULT 0,
  `stamp` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `parent` BIGINT(10) NOT NULL DEFAULT 0,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 999,
  PRIMARY KEY (`id`),
  INDEX `quescate_con2_ix` (`contextid` ASC),
  UNIQUE INDEX `quescate_consta2_uix` (`contextid` ASC, `stamp` ASC),
  INDEX `quescate_par3_ix` (`parent` ASC),
  CONSTRAINT `quescate_par_fk`
    FOREIGN KEY (`parent`)
    REFERENCES `mydb`.`question_categories` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Categories are for grouping questions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `category` BIGINT(10) NOT NULL DEFAULT 0,
  `parent` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `questiontext` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `questiontextformat` TINYINT(2) NOT NULL DEFAULT 0,
  `generalfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `generalfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `defaultmark` DECIMAL(12,7) NOT NULL DEFAULT 1,
  `penalty` DECIMAL(12,7) NOT NULL DEFAULT 0.3333333,
  `qtype` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `length` BIGINT(10) NOT NULL DEFAULT 1,
  `stamp` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `version` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `hidden` TINYINT(1) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `createdby` BIGINT(10) NULL DEFAULT NULL,
  `modifiedby` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `ques_qty2_ix` (`qtype` ASC),
  INDEX `ques_cat3_ix` (`category` ASC),
  INDEX `ques_par3_ix` (`parent` ASC),
  INDEX `ques_cre3_ix` (`createdby` ASC),
  INDEX `ques_mod3_ix` (`modifiedby` ASC),
  CONSTRAINT `ques_cat_fk`
    FOREIGN KEY (`category`)
    REFERENCES `mydb`.`question_categories` (`id`),
  CONSTRAINT `ques_par_fk`
    FOREIGN KEY (`parent`)
    REFERENCES `mydb`.`question` (`id`),
  CONSTRAINT `ques_cre_fk`
    FOREIGN KEY (`createdby`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `ques_mod_fk`
    FOREIGN KEY (`modifiedby`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The questions themselves'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_answers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_answers` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `question` BIGINT(10) NOT NULL DEFAULT 0,
  `answer` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `answerformat` TINYINT(2) NOT NULL DEFAULT 0,
  `fraction` DECIMAL(12,7) NOT NULL DEFAULT 0,
  `feedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `feedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `quesansw_que3_ix` (`question` ASC),
  CONSTRAINT `quesansw_que_fk`
    FOREIGN KEY (`question`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Answers, with a fractional grade (0-1) and feedback'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_hints`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_hints` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL,
  `hint` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `hintformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `shownumcorrect` TINYINT(1) NULL DEFAULT NULL,
  `clearwrong` TINYINT(1) NULL DEFAULT NULL,
  `options` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `queshint_que3_ix` (`questionid` ASC),
  CONSTRAINT `queshint_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the the part of the question definition that gives di'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_usages`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_usages` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `contextid` BIGINT(10) NOT NULL,
  `component` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `preferredbehaviour` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `quesusag_con3_ix` (`contextid` ASC),
  CONSTRAINT `quesusag_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table\'s main purpose it to assign a unique id to each a'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_attempts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_attempts` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionusageid` BIGINT(10) NOT NULL,
  `slot` BIGINT(10) NOT NULL,
  `behaviour` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `questionid` BIGINT(10) NOT NULL,
  `variant` BIGINT(10) NOT NULL DEFAULT 1,
  `maxmark` DECIMAL(12,7) NOT NULL,
  `minfraction` DECIMAL(12,7) NOT NULL,
  `maxfraction` DECIMAL(12,7) NOT NULL DEFAULT 1,
  `flagged` TINYINT(1) NOT NULL DEFAULT 0,
  `questionsummary` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `rightanswer` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `responsesummary` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `quesatte_queslo2_uix` (`questionusageid` ASC, `slot` ASC),
  INDEX `quesatte_beh2_ix` (`behaviour` ASC),
  INDEX `quesatte_que4_ix` (`questionid` ASC),
  INDEX `quesatte_que6_ix` (`questionusageid` ASC),
  UNIQUE INDEX `minfraction_UNIQUE` (`minfraction` ASC),
  CONSTRAINT `quesatte_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`),
  CONSTRAINT `quesatte_que2_fk`
    FOREIGN KEY (`questionusageid`)
    REFERENCES `mydb`.`question_usages` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Each row here corresponds to an attempt at one question, as '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_attempt_steps`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_attempt_steps` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionattemptid` BIGINT(10) NOT NULL,
  `sequencenumber` BIGINT(10) NOT NULL,
  `state` VARCHAR(13) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `fraction` DECIMAL(12,7) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `quesattestep_queseq2_uix` (`questionattemptid` ASC, `sequencenumber` ASC),
  INDEX `quesattestep_que3_ix` (`questionattemptid` ASC),
  INDEX `quesattestep_use3_ix` (`userid` ASC),
  CONSTRAINT `quesattestep_que_fk`
    FOREIGN KEY (`questionattemptid`)
    REFERENCES `mydb`.`question_attempts` (`id`),
  CONSTRAINT `quesattestep_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores one step in in a question attempt. As well as the dat'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_attempt_step_data`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_attempt_step_data` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `attemptstepid` BIGINT(10) NOT NULL,
  `name` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `quesattestepdata_att3_ix` (`attemptstepid` ASC),
  CONSTRAINT `quesattestepdata_att_fk`
    FOREIGN KEY (`attemptstepid`)
    REFERENCES `mydb`.`question_attempt_steps` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Each question_attempt_step has an associative array of the d'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_statistics`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_statistics` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `hashcode` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timemodified` BIGINT(10) NOT NULL,
  `questionid` BIGINT(10) NOT NULL,
  `slot` BIGINT(10) NULL DEFAULT NULL,
  `subquestion` SMALLINT(4) NOT NULL,
  `variant` BIGINT(10) NULL DEFAULT NULL,
  `s` BIGINT(10) NOT NULL DEFAULT 0,
  `effectiveweight` DECIMAL(15,5) NULL DEFAULT NULL,
  `negcovar` TINYINT(2) NOT NULL DEFAULT 0,
  `discriminationindex` DECIMAL(15,5) NULL DEFAULT NULL,
  `discriminativeefficiency` DECIMAL(15,5) NULL DEFAULT NULL,
  `sd` DECIMAL(15,10) NULL DEFAULT NULL,
  `facility` DECIMAL(15,10) NULL DEFAULT NULL,
  `subquestions` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `maxmark` DECIMAL(12,7) NULL DEFAULT NULL,
  `positions` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `randomguessscore` DECIMAL(12,7) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `question_statistics_erd_question_id` (`questionid` ASC),
  CONSTRAINT `question_statistics_erd_question_id`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Statistics for individual questions used in an activity.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_response_analysis`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_response_analysis` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `hashcode` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `whichtries` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timemodified` BIGINT(10) NOT NULL,
  `questionid` BIGINT(10) NOT NULL,
  `variant` BIGINT(10) NULL DEFAULT NULL,
  `subqid` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `aid` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `response` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `credit` DECIMAL(15,5) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Analysis of student responses given to questions.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_response_count`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_response_count` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `analysisid` BIGINT(10) NOT NULL,
  `try` BIGINT(10) NOT NULL,
  `rcount` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `quesrespcoun_ana3_ix` (`analysisid` ASC),
  CONSTRAINT `quesrespcoun_ana_fk`
    FOREIGN KEY (`analysisid`)
    REFERENCES `mydb`.`question_response_analysis` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Count for each responses for each try at a question.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnet_application`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnet_application` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `display_name` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `xmlrpc_server_url` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `sso_land_url` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `sso_jump_url` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Information about applications on remote hosts'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnet_host`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnet_host` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `wwwroot` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `ip_address` VARCHAR(45) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `name` VARCHAR(80) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `public_key` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `public_key_expires` BIGINT(10) NOT NULL DEFAULT 0,
  `transport` TINYINT(2) NOT NULL DEFAULT 0,
  `portno` MEDIUMINT(5) NOT NULL DEFAULT 0,
  `last_connect_time` BIGINT(10) NOT NULL DEFAULT 0,
  `last_log_id` BIGINT(10) NOT NULL DEFAULT 0,
  `force_theme` TINYINT(1) NOT NULL DEFAULT 0,
  `theme` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `applicationid` BIGINT(10) NOT NULL DEFAULT 1,
  `sslverification` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `mnethost_app3_ix` (`applicationid` ASC),
  CONSTRAINT `mnethost_app_fk`
    FOREIGN KEY (`applicationid`)
    REFERENCES `mydb`.`mnet_application` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Information about the local and remote hosts for RPC'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnet_host2service`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnet_host2service` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `hostid` BIGINT(10) NOT NULL DEFAULT 0,
  `serviceid` BIGINT(10) NOT NULL DEFAULT 0,
  `publish` TINYINT(1) NOT NULL DEFAULT 0,
  `subscribe` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `mnethost_hosser2_uix` (`hostid` ASC, `serviceid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Information about the services for a given host'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnet_log`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnet_log` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `hostid` BIGINT(10) NOT NULL DEFAULT 0,
  `remoteid` BIGINT(10) NOT NULL DEFAULT 0,
  `time` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `ip` VARCHAR(45) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `coursename` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `module` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `cmid` BIGINT(10) NOT NULL DEFAULT 0,
  `action` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `url` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `info` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `mnetlog_hosusecou2_ix` (`hostid` ASC, `userid` ASC, `course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Store session data from users migrating to other sites'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnet_rpc`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnet_rpc` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `functionname` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `xmlrpcpath` VARCHAR(80) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `plugintype` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `pluginname` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `enabled` TINYINT(1) NOT NULL DEFAULT 0,
  `help` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `profile` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `filename` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `classname` VARCHAR(150) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `static` TINYINT(1) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `mnetrpc_enaxml2_ix` (`enabled` ASC, `xmlrpcpath` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Functions or methods that we may publish or subscribe to'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnet_remote_rpc`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnet_remote_rpc` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `functionname` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `xmlrpcpath` VARCHAR(80) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `plugintype` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `pluginname` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `enabled` TINYINT(1) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table describes functions that might be called remotely'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnet_service`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnet_service` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `apiversion` VARCHAR(10) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `offer` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'A service is a group of functions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnet_service2rpc`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnet_service2rpc` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `serviceid` BIGINT(10) NOT NULL DEFAULT 0,
  `rpcid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `mnetserv_rpcser2_uix` (`rpcid` ASC, `serviceid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Group functions or methods under a service'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnet_remote_service2rpc`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnet_remote_service2rpc` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `serviceid` BIGINT(10) NOT NULL DEFAULT 0,
  `rpcid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `mnetremoserv_rpcser2_uix` (`rpcid` ASC, `serviceid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Group functions or methods under a service'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnet_session`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnet_session` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `username` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `token` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `mnethostid` BIGINT(10) NOT NULL DEFAULT 0,
  `useragent` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `confirm_timeout` BIGINT(10) NOT NULL DEFAULT 0,
  `session_id` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `expires` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `mnetsess_tok2_uix` (`token` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Store session data from users migrating to other sites'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnet_sso_access_control`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnet_sso_access_control` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `mnet_host_id` BIGINT(10) NOT NULL DEFAULT 0,
  `accessctrl` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT 'allow',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `mnetssoaccecont_mneuse2_uix` (`mnet_host_id` ASC, `username` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Users by host permitted (or not) to login from a remote prov'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`events_queue`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`events_queue` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `eventdata` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `stackdump` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `userid` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `evenqueu_use3_ix` (`userid` ASC),
  CONSTRAINT `evenqueu_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table is for storing queued events. It stores only one '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`events_handlers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`events_handlers` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `eventname` VARCHAR(166) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `component` VARCHAR(166) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `handlerfile` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `handlerfunction` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `schedule` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `status` BIGINT(10) NOT NULL DEFAULT 0,
  `internal` TINYINT(2) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `evenhand_evecom2_uix` (`eventname` ASC, `component` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table is for storing which components requests what typ'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`events_queue_handlers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`events_queue_handlers` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `queuedeventid` BIGINT(10) NOT NULL,
  `handlerid` BIGINT(10) NOT NULL,
  `status` BIGINT(10) NULL DEFAULT NULL,
  `errormessage` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `evenqueuhand_que3_ix` (`queuedeventid` ASC),
  INDEX `evenqueuhand_han3_ix` (`handlerid` ASC),
  CONSTRAINT `evenqueuhand_que_fk`
    FOREIGN KEY (`queuedeventid`)
    REFERENCES `mydb`.`events_queue` (`id`),
  CONSTRAINT `evenqueuhand_han_fk`
    FOREIGN KEY (`handlerid`)
    REFERENCES `mydb`.`events_handlers` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This is the list of queued handlers for processing. The even'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_outcomes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_outcomes` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NULL DEFAULT NULL,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `fullname` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `scaleid` BIGINT(10) NULL DEFAULT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `usermodified` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `gradoutc_cou3_ix` (`courseid` ASC),
  INDEX `gradoutc_sca3_ix` (`scaleid` ASC),
  INDEX `gradoutc_use3_ix` (`usermodified` ASC),
  UNIQUE INDEX `gradoutc_cousho2_uix` (`courseid` ASC, `shortname` ASC),
  CONSTRAINT `gradoutc_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `gradoutc_sca_fk`
    FOREIGN KEY (`scaleid`)
    REFERENCES `mydb`.`scale` (`id`),
  CONSTRAINT `gradoutc_use_fk`
    FOREIGN KEY (`usermodified`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table describes the outcomes used in the system. An out'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_outcomes_courses`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_outcomes_courses` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL,
  `outcomeid` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `gradoutccour_cou3_ix` (`courseid` ASC),
  INDEX `gradoutccour_out3_ix` (`outcomeid` ASC),
  UNIQUE INDEX `gradoutccour_couout2_uix` (`courseid` ASC, `outcomeid` ASC),
  CONSTRAINT `gradoutccour_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `gradoutccour_out_fk`
    FOREIGN KEY (`outcomeid`)
    REFERENCES `mydb`.`grade_outcomes` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'stores what outcomes are used in what courses.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_categories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_categories` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL,
  `parent` BIGINT(10) NULL DEFAULT NULL,
  `depth` BIGINT(10) NOT NULL DEFAULT 0,
  `path` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `fullname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `aggregation` BIGINT(10) NOT NULL DEFAULT 0,
  `keephigh` BIGINT(10) NOT NULL DEFAULT 0,
  `droplow` BIGINT(10) NOT NULL DEFAULT 0,
  `aggregateonlygraded` TINYINT(1) NOT NULL DEFAULT 0,
  `aggregateoutcomes` TINYINT(1) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `hidden` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `gradcate_cou3_ix` (`courseid` ASC),
  INDEX `gradcate_par3_ix` (`parent` ASC),
  CONSTRAINT `gradcate_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `gradcate_par_fk`
    FOREIGN KEY (`parent`)
    REFERENCES `mydb`.`grade_categories` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table keeps information about categories, used for grou'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_items`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_items` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NULL DEFAULT NULL,
  `categoryid` BIGINT(10) NULL DEFAULT NULL,
  `itemname` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `itemtype` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemmodule` VARCHAR(30) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `iteminstance` BIGINT(10) NULL DEFAULT NULL,
  `itemnumber` BIGINT(10) NULL DEFAULT NULL,
  `iteminfo` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `idnumber` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `calculation` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `gradetype` SMALLINT(4) NOT NULL DEFAULT 1,
  `grademax` DECIMAL(10,5) NOT NULL DEFAULT 100,
  `grademin` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `scaleid` BIGINT(10) NULL DEFAULT NULL,
  `outcomeid` BIGINT(10) NULL DEFAULT NULL,
  `gradepass` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `multfactor` DECIMAL(10,5) NOT NULL DEFAULT 1.0,
  `plusfactor` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `aggregationcoef` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `aggregationcoef2` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  `display` BIGINT(10) NOT NULL DEFAULT 0,
  `decimals` TINYINT(1) NULL DEFAULT NULL,
  `hidden` BIGINT(10) NOT NULL DEFAULT 0,
  `locked` BIGINT(10) NOT NULL DEFAULT 0,
  `locktime` BIGINT(10) NOT NULL DEFAULT 0,
  `needsupdate` BIGINT(10) NOT NULL DEFAULT 0,
  `weightoverride` TINYINT(1) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `graditem_locloc2_ix` (`locked` ASC, `locktime` ASC),
  INDEX `graditem_itenee2_ix` (`itemtype` ASC, `needsupdate` ASC),
  INDEX `graditem_gra2_ix` (`gradetype` ASC),
  INDEX `graditem_idncou2_ix` (`idnumber` ASC, `courseid` ASC),
  INDEX `graditem_cou3_ix` (`courseid` ASC),
  INDEX `graditem_cat3_ix` (`categoryid` ASC),
  INDEX `graditem_sca3_ix` (`scaleid` ASC),
  INDEX `graditem_out3_ix` (`outcomeid` ASC),
  CONSTRAINT `graditem_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `graditem_cat_fk`
    FOREIGN KEY (`categoryid`)
    REFERENCES `mydb`.`grade_categories` (`id`),
  CONSTRAINT `graditem_sca_fk`
    FOREIGN KEY (`scaleid`)
    REFERENCES `mydb`.`scale` (`id`),
  CONSTRAINT `graditem_out_fk`
    FOREIGN KEY (`outcomeid`)
    REFERENCES `mydb`.`grade_outcomes` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table keeps information about gradeable items (ie colum'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_grades`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_grades` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `itemid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `rawgrade` DECIMAL(10,5) NULL DEFAULT NULL,
  `rawgrademax` DECIMAL(10,5) NOT NULL DEFAULT 100,
  `rawgrademin` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `rawscaleid` BIGINT(10) NULL DEFAULT NULL,
  `usermodified` BIGINT(10) NULL DEFAULT NULL,
  `finalgrade` DECIMAL(10,5) NULL DEFAULT NULL,
  `hidden` BIGINT(10) NOT NULL DEFAULT 0,
  `locked` BIGINT(10) NOT NULL DEFAULT 0,
  `locktime` BIGINT(10) NOT NULL DEFAULT 0,
  `exported` BIGINT(10) NOT NULL DEFAULT 0,
  `overridden` BIGINT(10) NOT NULL DEFAULT 0,
  `excluded` BIGINT(10) NOT NULL DEFAULT 0,
  `feedback` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `feedbackformat` BIGINT(10) NOT NULL DEFAULT 0,
  `information` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `informationformat` BIGINT(10) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `aggregationstatus` VARCHAR(10) CHARACTER SET 'utf8' NOT NULL DEFAULT 'unknown',
  `aggregationweight` DECIMAL(10,5) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `gradgrad_locloc2_ix` (`locked` ASC, `locktime` ASC),
  INDEX `gradgrad_ite3_ix` (`itemid` ASC),
  INDEX `gradgrad_use4_ix` (`userid` ASC),
  INDEX `gradgrad_raw3_ix` (`rawscaleid` ASC),
  INDEX `gradgrad_use6_ix` (`usermodified` ASC),
  UNIQUE INDEX `gradgrad_useite2_uix` (`userid` ASC, `itemid` ASC),
  CONSTRAINT `gradgrad_ite_fk`
    FOREIGN KEY (`itemid`)
    REFERENCES `mydb`.`grade_items` (`id`),
  CONSTRAINT `gradgrad_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `gradgrad_raw_fk`
    FOREIGN KEY (`rawscaleid`)
    REFERENCES `mydb`.`scale` (`id`),
  CONSTRAINT `gradgrad_use2_fk`
    FOREIGN KEY (`usermodified`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'grade_grades  This table keeps individual grades for each us'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_outcomes_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_outcomes_history` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `action` BIGINT(10) NOT NULL DEFAULT 0,
  `oldid` BIGINT(10) NOT NULL,
  `source` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `loggeduser` BIGINT(10) NULL DEFAULT NULL,
  `courseid` BIGINT(10) NULL DEFAULT NULL,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `fullname` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `scaleid` BIGINT(10) NULL DEFAULT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `gradoutchist_act2_ix` (`action` ASC),
  INDEX `gradoutchist_old3_ix` (`oldid` ASC),
  INDEX `gradoutchist_cou3_ix` (`courseid` ASC),
  INDEX `gradoutchist_sca3_ix` (`scaleid` ASC),
  INDEX `gradoutchist_log3_ix` (`loggeduser` ASC),
  CONSTRAINT `gradoutchist_old_fk`
    FOREIGN KEY (`oldid`)
    REFERENCES `mydb`.`grade_outcomes` (`id`),
  CONSTRAINT `gradoutchist_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `gradoutchist_sca_fk`
    FOREIGN KEY (`scaleid`)
    REFERENCES `mydb`.`scale` (`id`),
  CONSTRAINT `gradoutchist_log_fk`
    FOREIGN KEY (`loggeduser`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'History table'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_categories_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_categories_history` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `action` BIGINT(10) NOT NULL DEFAULT 0,
  `oldid` BIGINT(10) NOT NULL,
  `source` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `loggeduser` BIGINT(10) NULL DEFAULT NULL,
  `courseid` BIGINT(10) NOT NULL,
  `parent` BIGINT(10) NULL DEFAULT NULL,
  `depth` BIGINT(10) NOT NULL DEFAULT 0,
  `path` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `fullname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `aggregation` BIGINT(10) NOT NULL DEFAULT 0,
  `keephigh` BIGINT(10) NOT NULL DEFAULT 0,
  `droplow` BIGINT(10) NOT NULL DEFAULT 0,
  `aggregateonlygraded` TINYINT(1) NOT NULL DEFAULT 0,
  `aggregateoutcomes` TINYINT(1) NOT NULL DEFAULT 0,
  `aggregatesubcats` TINYINT(1) NOT NULL DEFAULT 0,
  `hidden` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `gradcatehist_act2_ix` (`action` ASC),
  INDEX `gradcatehist_old3_ix` (`oldid` ASC),
  INDEX `gradcatehist_cou3_ix` (`courseid` ASC),
  INDEX `gradcatehist_par3_ix` (`parent` ASC),
  INDEX `gradcatehist_log3_ix` (`loggeduser` ASC),
  CONSTRAINT `gradcatehist_old_fk`
    FOREIGN KEY (`oldid`)
    REFERENCES `mydb`.`grade_categories` (`id`),
  CONSTRAINT `gradcatehist_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `gradcatehist_par_fk`
    FOREIGN KEY (`parent`)
    REFERENCES `mydb`.`grade_categories` (`id`),
  CONSTRAINT `gradcatehist_log_fk`
    FOREIGN KEY (`loggeduser`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'History of grade_categories'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_items_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_items_history` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `action` BIGINT(10) NOT NULL DEFAULT 0,
  `oldid` BIGINT(10) NOT NULL,
  `source` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `loggeduser` BIGINT(10) NULL DEFAULT NULL,
  `courseid` BIGINT(10) NULL DEFAULT NULL,
  `categoryid` BIGINT(10) NULL DEFAULT NULL,
  `itemname` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `itemtype` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemmodule` VARCHAR(30) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `iteminstance` BIGINT(10) NULL DEFAULT NULL,
  `itemnumber` BIGINT(10) NULL DEFAULT NULL,
  `iteminfo` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `idnumber` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `calculation` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `gradetype` SMALLINT(4) NOT NULL DEFAULT 1,
  `grademax` DECIMAL(10,5) NOT NULL DEFAULT 100,
  `grademin` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `scaleid` BIGINT(10) NULL DEFAULT NULL,
  `outcomeid` BIGINT(10) NULL DEFAULT NULL,
  `gradepass` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `multfactor` DECIMAL(10,5) NOT NULL DEFAULT 1.0,
  `plusfactor` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `aggregationcoef` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `aggregationcoef2` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  `hidden` BIGINT(10) NOT NULL DEFAULT 0,
  `locked` BIGINT(10) NOT NULL DEFAULT 0,
  `locktime` BIGINT(10) NOT NULL DEFAULT 0,
  `needsupdate` BIGINT(10) NOT NULL DEFAULT 0,
  `display` BIGINT(10) NOT NULL DEFAULT 0,
  `decimals` TINYINT(1) NULL DEFAULT NULL,
  `weightoverride` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `graditemhist_act2_ix` (`action` ASC),
  INDEX `graditemhist_old3_ix` (`oldid` ASC),
  INDEX `graditemhist_cou3_ix` (`courseid` ASC),
  INDEX `graditemhist_cat3_ix` (`categoryid` ASC),
  INDEX `graditemhist_sca3_ix` (`scaleid` ASC),
  INDEX `graditemhist_out3_ix` (`outcomeid` ASC),
  INDEX `graditemhist_log3_ix` (`loggeduser` ASC),
  CONSTRAINT `graditemhist_old_fk`
    FOREIGN KEY (`oldid`)
    REFERENCES `mydb`.`grade_items` (`id`),
  CONSTRAINT `graditemhist_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `graditemhist_cat_fk`
    FOREIGN KEY (`categoryid`)
    REFERENCES `mydb`.`grade_categories` (`id`),
  CONSTRAINT `graditemhist_sca_fk`
    FOREIGN KEY (`scaleid`)
    REFERENCES `mydb`.`scale` (`id`),
  CONSTRAINT `graditemhist_out_fk`
    FOREIGN KEY (`outcomeid`)
    REFERENCES `mydb`.`grade_outcomes` (`id`),
  CONSTRAINT `graditemhist_log_fk`
    FOREIGN KEY (`loggeduser`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'History of grade_items'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_grades_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_grades_history` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `action` BIGINT(10) NOT NULL DEFAULT 0,
  `oldid` BIGINT(10) NOT NULL,
  `source` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `loggeduser` BIGINT(10) NULL DEFAULT NULL,
  `itemid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `rawgrade` DECIMAL(10,5) NULL DEFAULT NULL,
  `rawgrademax` DECIMAL(10,5) NOT NULL DEFAULT 100,
  `rawgrademin` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `rawscaleid` BIGINT(10) NULL DEFAULT NULL,
  `usermodified` BIGINT(10) NULL DEFAULT NULL,
  `finalgrade` DECIMAL(10,5) NULL DEFAULT NULL,
  `hidden` BIGINT(10) NOT NULL DEFAULT 0,
  `locked` BIGINT(10) NOT NULL DEFAULT 0,
  `locktime` BIGINT(10) NOT NULL DEFAULT 0,
  `exported` BIGINT(10) NOT NULL DEFAULT 0,
  `overridden` BIGINT(10) NOT NULL DEFAULT 0,
  `excluded` BIGINT(10) NOT NULL DEFAULT 0,
  `feedback` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `feedbackformat` BIGINT(10) NOT NULL DEFAULT 0,
  `information` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `informationformat` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `gradgradhist_act2_ix` (`action` ASC),
  INDEX `gradgradhist_tim2_ix` (`timemodified` ASC),
  INDEX `gradgradhist_useitetim2_ix` (`userid` ASC, `itemid` ASC, `timemodified` ASC),
  INDEX `gradgradhist_old3_ix` (`oldid` ASC),
  INDEX `gradgradhist_ite3_ix` (`itemid` ASC),
  INDEX `gradgradhist_use4_ix` (`userid` ASC),
  INDEX `gradgradhist_raw3_ix` (`rawscaleid` ASC),
  INDEX `gradgradhist_use6_ix` (`usermodified` ASC),
  INDEX `gradgradhist_log3_ix` (`loggeduser` ASC),
  CONSTRAINT `gradgradhist_old_fk`
    FOREIGN KEY (`oldid`)
    REFERENCES `mydb`.`grade_grades` (`id`),
  CONSTRAINT `gradgradhist_ite_fk`
    FOREIGN KEY (`itemid`)
    REFERENCES `mydb`.`grade_items` (`id`),
  CONSTRAINT `gradgradhist_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `gradgradhist_raw_fk`
    FOREIGN KEY (`rawscaleid`)
    REFERENCES `mydb`.`scale` (`id`),
  CONSTRAINT `gradgradhist_use2_fk`
    FOREIGN KEY (`usermodified`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `gradgradhist_log_fk`
    FOREIGN KEY (`loggeduser`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'History table'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_import_newitem`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_import_newitem` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `itemname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `importcode` BIGINT(10) NOT NULL,
  `importer` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `gradimponewi_imp3_ix` (`importer` ASC),
  CONSTRAINT `gradimponewi_imp_fk`
    FOREIGN KEY (`importer`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'temporary table for storing new grade_item names from grade '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_import_values`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_import_values` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `itemid` BIGINT(10) NULL DEFAULT NULL,
  `newgradeitem` BIGINT(10) NULL DEFAULT NULL,
  `userid` BIGINT(10) NOT NULL,
  `finalgrade` DECIMAL(10,5) NULL DEFAULT NULL,
  `feedback` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `importcode` BIGINT(10) NOT NULL,
  `importer` BIGINT(10) NULL DEFAULT NULL,
  `importonlyfeedback` TINYINT(1) NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `gradimpovalu_ite3_ix` (`itemid` ASC),
  INDEX `gradimpovalu_new3_ix` (`newgradeitem` ASC),
  INDEX `gradimpovalu_imp3_ix` (`importer` ASC),
  CONSTRAINT `gradimpovalu_ite_fk`
    FOREIGN KEY (`itemid`)
    REFERENCES `mydb`.`grade_items` (`id`),
  CONSTRAINT `gradimpovalu_new_fk`
    FOREIGN KEY (`newgradeitem`)
    REFERENCES `mydb`.`grade_import_newitem` (`id`),
  CONSTRAINT `gradimpovalu_imp_fk`
    FOREIGN KEY (`importer`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Temporary table for importing grades'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tag_coll`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tag_coll` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `isdefault` TINYINT(2) NOT NULL DEFAULT 0,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `sortorder` MEDIUMINT(5) NOT NULL DEFAULT 0,
  `searchable` TINYINT(2) NOT NULL DEFAULT 1,
  `customurl` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines different set of tags'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tag_area`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tag_area` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemtype` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `enabled` TINYINT(1) NOT NULL DEFAULT 1,
  `tagcollid` BIGINT(10) NOT NULL,
  `callback` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `callbackfile` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `showstandard` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `tagarea_comite2_uix` (`component` ASC, `itemtype` ASC),
  INDEX `tagarea_tag3_ix` (`tagcollid` ASC),
  CONSTRAINT `tagarea_tag_fk`
    FOREIGN KEY (`tagcollid`)
    REFERENCES `mydb`.`tag_coll` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines various tag areas, one area is identified by compone'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tag`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tag` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `tagcollid` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `rawname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `isstandard` TINYINT(1) NOT NULL DEFAULT 0,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NOT NULL DEFAULT 0,
  `flag` SMALLINT(4) NULL DEFAULT 0,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `tag_tagnam2_uix` (`tagcollid` ASC, `name` ASC),
  INDEX `tag_tagiss2_ix` (`tagcollid` ASC, `isstandard` ASC),
  INDEX `tag_use3_ix` (`userid` ASC),
  INDEX `tag_tag3_ix` (`tagcollid` ASC),
  CONSTRAINT `tag_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `tag_tag_fk`
    FOREIGN KEY (`tagcollid`)
    REFERENCES `mydb`.`tag_coll` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Tag table - this generic table will replace the old \"tags\" t'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tag_correlation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tag_correlation` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `tagid` BIGINT(10) NOT NULL,
  `correlatedtags` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `tagcorr_tag3_ix` (`tagid` ASC),
  CONSTRAINT `tagcorr_tag_fk`
    FOREIGN KEY (`tagid`)
    REFERENCES `mydb`.`tag` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The rationale for the \'tag_correlation\' table is performance'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tag_instance`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tag_instance` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `tagid` BIGINT(10) NOT NULL,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemtype` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemid` BIGINT(10) NOT NULL,
  `contextid` BIGINT(10) NULL DEFAULT NULL,
  `tiuserid` BIGINT(10) NOT NULL DEFAULT 0,
  `ordering` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `taginst_comiteitetiutag2_uix` (`component` ASC, `itemtype` ASC, `itemid` ASC, `tiuserid` ASC, `tagid` ASC),
  INDEX `taginst_itecomtagcon2_ix` (`itemtype` ASC, `component` ASC, `tagid` ASC, `contextid` ASC),
  INDEX `taginst_tag3_ix` (`tagid` ASC),
  INDEX `taginst_con3_ix` (`contextid` ASC),
  CONSTRAINT `taginst_tag_fk`
    FOREIGN KEY (`tagid`)
    REFERENCES `mydb`.`tag` (`id`),
  CONSTRAINT `taginst_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'tag_instance table holds the information of associations bet'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`groups`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`groups` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL,
  `idnumber` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `name` VARCHAR(254) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NOT NULL DEFAULT 0,
  `enrolmentkey` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `picture` BIGINT(10) NOT NULL DEFAULT 0,
  `hidepicture` TINYINT(1) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `grou_idn2_ix` (`idnumber` ASC),
  INDEX `grou_cou3_ix` (`courseid` ASC),
  CONSTRAINT `grou_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Each record represents a group.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`groups_members`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`groups_members` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `groupid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `timeadded` BIGINT(10) NOT NULL DEFAULT 0,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `groumemb_gro3_ix` (`groupid` ASC),
  INDEX `groumemb_use3_ix` (`userid` ASC),
  CONSTRAINT `groumemb_gro_fk`
    FOREIGN KEY (`groupid`)
    REFERENCES `mydb`.`groups` (`id`),
  CONSTRAINT `groumemb_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Link a user to a group.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`groupings_groups`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`groupings_groups` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `groupingid` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NOT NULL DEFAULT 0,
  `timeadded` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `grougrou_gro4_ix` (`groupingid` ASC),
  INDEX `grougrou_gro6_ix` (`groupid` ASC),
  CONSTRAINT `grougrou_gro_fk`
    FOREIGN KEY (`groupingid`)
    REFERENCES `mydb`.`groupings` (`id`),
  CONSTRAINT `grougrou_gro2_fk`
    FOREIGN KEY (`groupid`)
    REFERENCES `mydb`.`groups` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Link a grouping to a group (note, groups can be in multiple '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`cohort`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`cohort` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `contextid` BIGINT(10) NOT NULL,
  `name` VARCHAR(254) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `idnumber` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NOT NULL,
  `visible` TINYINT(1) NOT NULL DEFAULT 1,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `coho_con3_ix` (`contextid` ASC),
  CONSTRAINT `coho_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Each record represents one cohort (aka site-wide group).'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`cohort_members`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`cohort_members` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `cohortid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `timeadded` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `cohomemb_cohuse2_uix` (`cohortid` ASC, `userid` ASC),
  INDEX `cohomemb_coh3_ix` (`cohortid` ASC),
  INDEX `cohomemb_use3_ix` (`userid` ASC),
  CONSTRAINT `cohomemb_coh_fk`
    FOREIGN KEY (`cohortid`)
    REFERENCES `mydb`.`cohort` (`id`),
  CONSTRAINT `cohomemb_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Link a user to a cohort.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`user_private_key`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user_private_key` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `script` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `userid` BIGINT(10) NOT NULL,
  `instance` BIGINT(10) NULL DEFAULT NULL,
  `iprestriction` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `validuntil` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `userprivkey_scrval2_ix` (`script` ASC, `value` ASC),
  INDEX `userprivkey_use3_ix` (`userid` ASC),
  CONSTRAINT `userprivkey_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'access keys used in cookieless scripts - rss, etc.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_letters`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_letters` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `contextid` BIGINT(10) NOT NULL,
  `lowerboundary` DECIMAL(10,5) NOT NULL,
  `letter` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `gradlett_conlowlet2_uix` (`contextid` ASC, `lowerboundary` ASC, `letter` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Repository for grade letters, for courses and other moodle e'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`cache_flags`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`cache_flags` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `flagtype` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `value` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `expiry` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `cachflag_fla2_ix` (`flagtype` ASC),
  INDEX `cachflag_nam2_ix` (`name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Cache of time-sensitive flags'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grade_settings`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grade_settings` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `gradsett_counam2_uix` (`courseid` ASC, `name` ASC),
  INDEX `gradsett_cou3_ix` (`courseid` ASC),
  CONSTRAINT `gradsett_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'gradebook settings'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`portfolio_instance`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`portfolio_instance` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `plugin` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `visible` TINYINT(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'base table (not including config data) for instances of port'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`portfolio_instance_config`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`portfolio_instance_config` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `instance` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `portinstconf_nam2_ix` (`name` ASC),
  INDEX `portinstconf_ins3_ix` (`instance` ASC),
  CONSTRAINT `portinstconf_ins_fk`
    FOREIGN KEY (`instance`)
    REFERENCES `mydb`.`portfolio_instance` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'config for portfolio plugin instances'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`portfolio_instance_user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`portfolio_instance_user` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `instance` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `portinstuser_ins3_ix` (`instance` ASC),
  INDEX `portinstuser_use3_ix` (`userid` ASC),
  CONSTRAINT `portinstuser_ins_fk`
    FOREIGN KEY (`instance`)
    REFERENCES `mydb`.`portfolio_instance` (`id`),
  CONSTRAINT `portinstuser_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'user data for portfolio instances.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`portfolio_log`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`portfolio_log` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `time` BIGINT(10) NOT NULL,
  `portfolio` BIGINT(10) NOT NULL,
  `caller_class` VARCHAR(150) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `caller_file` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `caller_component` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `caller_sha1` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `tempdataid` BIGINT(10) NOT NULL DEFAULT 0,
  `returnurl` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `continueurl` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `portlog_use3_ix` (`userid` ASC),
  INDEX `portlog_por3_ix` (`portfolio` ASC),
  CONSTRAINT `portlog_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `portlog_por_fk`
    FOREIGN KEY (`portfolio`)
    REFERENCES `mydb`.`portfolio_instance` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'log of portfolio transfers (used to later check for duplicat'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`portfolio_tempdata`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`portfolio_tempdata` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `data` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `expirytime` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `instance` BIGINT(10) NULL DEFAULT 0,
  `queued` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `porttemp_use3_ix` (`userid` ASC),
  INDEX `porttemp_ins3_ix` (`instance` ASC),
  CONSTRAINT `porttemp_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `porttemp_ins_fk`
    FOREIGN KEY (`instance`)
    REFERENCES `mydb`.`portfolio_instance` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'stores temporary data for portfolio exports. the id of this '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`message_providers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`message_providers` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `component` VARCHAR(200) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `capability` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `messprov_comnam2_uix` (`component` ASC, `name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table stores the message providers (modules and core sy'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`message_processors`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`message_processors` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(166) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `enabled` TINYINT(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'List of message output plugins'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`message_working`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`message_working` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `unreadmessageid` BIGINT(10) NOT NULL,
  `processorid` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `messwork_unr2_ix` (`unreadmessageid` ASC),
  INDEX `message_working_erd_message_processors_id` (`processorid` ASC),
  CONSTRAINT `message_working_erd_user_id`
    FOREIGN KEY (`unreadmessageid`)
    REFERENCES `mydb`.`message` (`id`),
  CONSTRAINT `message_working_erd_message_processors_id`
    FOREIGN KEY (`processorid`)
    REFERENCES `mydb`.`message_processors` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Lists all the messages and processors that need to be proces'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`repository_instances`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`repository_instances` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `typeid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `contextid` BIGINT(10) NOT NULL,
  `username` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `password` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `readonly` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table contains one entry for every configured external '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`files_reference`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`files_reference` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `repositoryid` BIGINT(10) NOT NULL,
  `lastsync` BIGINT(10) NULL DEFAULT NULL,
  `reference` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `referencehash` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `filerefe_refrep2_uix` (`referencehash` ASC, `repositoryid` ASC),
  INDEX `filerefe_rep3_ix` (`repositoryid` ASC),
  CONSTRAINT `filerefe_rep_fk`
    FOREIGN KEY (`repositoryid`)
    REFERENCES `mydb`.`repository_instances` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Store files references'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`files`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`files` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `contenthash` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `pathnamehash` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `contextid` BIGINT(10) NOT NULL,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `filearea` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemid` BIGINT(10) NOT NULL,
  `filepath` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `filename` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `userid` BIGINT(10) NULL DEFAULT NULL,
  `filesize` BIGINT(10) NOT NULL,
  `mimetype` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `status` BIGINT(10) NOT NULL DEFAULT 0,
  `source` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `author` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `license` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  `referencefileid` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `file_comfilconite2_ix` (`component` ASC, `filearea` ASC, `contextid` ASC, `itemid` ASC),
  INDEX `file_con3_ix` (`contenthash` ASC),
  UNIQUE INDEX `file_pat2_uix` (`pathnamehash` ASC),
  INDEX `file_con5_ix` (`contextid` ASC),
  INDEX `file_use3_ix` (`userid` ASC),
  INDEX `file_ref3_ix` (`referencefileid` ASC),
  CONSTRAINT `file_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`),
  CONSTRAINT `file_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `file_ref_fk`
    FOREIGN KEY (`referencefileid`)
    REFERENCES `mydb`.`files_reference` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'description of files, content is stored in sha1 file pool'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`file_conversion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`file_conversion` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `usermodified` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `sourcefileid` BIGINT(10) NOT NULL,
  `targetformat` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `status` BIGINT(10) NULL DEFAULT 0,
  `statusmessage` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `converter` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `destfileid` BIGINT(10) NULL DEFAULT NULL,
  `data` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fileconv_sou3_ix` (`sourcefileid` ASC),
  INDEX `fileconv_des3_ix` (`destfileid` ASC),
  CONSTRAINT `fileconv_sou_fk`
    FOREIGN KEY (`sourcefileid`)
    REFERENCES `mydb`.`files` (`id`),
  CONSTRAINT `fileconv_des_fk`
    FOREIGN KEY (`destfileid`)
    REFERENCES `mydb`.`files` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Table to track file conversions.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`repository`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`repository` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `type` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `visible` TINYINT(1) NULL DEFAULT 1,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table contains one entry for every configured external '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`repository_instance_config`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`repository_instance_config` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `instanceid` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The config for intances'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`backup_courses`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`backup_courses` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `laststarttime` BIGINT(10) NOT NULL DEFAULT 0,
  `lastendtime` BIGINT(10) NOT NULL DEFAULT 0,
  `laststatus` VARCHAR(1) CHARACTER SET 'utf8' NOT NULL DEFAULT '5',
  `nextstarttime` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `backcour_cou2_uix` (`courseid` ASC),
  CONSTRAINT `backup_courses_erd_course_id`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'To store every course backup status'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`block`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`block` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `cron` BIGINT(10) NOT NULL DEFAULT 0,
  `lastcron` BIGINT(10) NOT NULL DEFAULT 0,
  `visible` TINYINT(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `bloc_nam2_uix` (`name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'contains all installed blocks'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`block_instances`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`block_instances` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `blockname` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `parentcontextid` BIGINT(10) NOT NULL,
  `showinsubcontexts` SMALLINT(4) NOT NULL,
  `requiredbytheme` SMALLINT(4) NOT NULL DEFAULT 0,
  `pagetypepattern` VARCHAR(64) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `subpagepattern` VARCHAR(16) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `defaultregion` VARCHAR(16) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `defaultweight` BIGINT(10) NOT NULL,
  `configdata` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `blocinst_parshopagsub2_ix` (`parentcontextid` ASC, `showinsubcontexts` ASC, `pagetypepattern` ASC, `subpagepattern` ASC),
  INDEX `blocinst_par3_ix` (`parentcontextid` ASC),
  INDEX `block_instances_erd_block_name` (`blockname` ASC),
  CONSTRAINT `blocinst_par_fk`
    FOREIGN KEY (`parentcontextid`)
    REFERENCES `mydb`.`context` (`id`),
  CONSTRAINT `block_instances_erd_block_name`
    FOREIGN KEY (`blockname`)
    REFERENCES `mydb`.`block` (`name`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table stores block instances. The type of block this is'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`block_positions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`block_positions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `blockinstanceid` BIGINT(10) NOT NULL,
  `contextid` BIGINT(10) NOT NULL,
  `pagetype` VARCHAR(64) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `subpage` VARCHAR(16) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `visible` SMALLINT(4) NOT NULL,
  `region` VARCHAR(16) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `weight` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `blocposi_bloconpagsub2_uix` (`blockinstanceid` ASC, `contextid` ASC, `pagetype` ASC, `subpage` ASC),
  INDEX `blocposi_blo3_ix` (`blockinstanceid` ASC),
  INDEX `blocposi_con3_ix` (`contextid` ASC),
  CONSTRAINT `blocposi_blo_fk`
    FOREIGN KEY (`blockinstanceid`)
    REFERENCES `mydb`.`block_instances` (`id`),
  CONSTRAINT `blocposi_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the position of a sticky block_instance on a another '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`comments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`comments` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `contextid` BIGINT(10) NOT NULL,
  `component` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `commentarea` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemid` BIGINT(10) NOT NULL,
  `content` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `format` TINYINT(2) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'moodle comments module'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`external_services`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`external_services` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(200) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `enabled` TINYINT(1) NOT NULL,
  `requiredcapability` VARCHAR(150) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `restrictedusers` TINYINT(1) NOT NULL,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `downloadfiles` TINYINT(1) NOT NULL DEFAULT 0,
  `uploadfiles` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `exteserv_nam2_uix` (`name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'built in and custom external services'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`external_functions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`external_functions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(200) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `classname` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `methodname` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `classpath` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `capabilities` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `services` VARCHAR(1333) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `extefunc_nam2_uix` (`name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'list of all external functions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`external_services_functions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`external_services_functions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `externalserviceid` BIGINT(10) NOT NULL,
  `functionname` VARCHAR(200) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `exteservfunc_ext3_ix` (`externalserviceid` ASC),
  CONSTRAINT `exteservfunc_ext_fk`
    FOREIGN KEY (`externalserviceid`)
    REFERENCES `mydb`.`external_services` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'lists functions available in each service group'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`external_services_users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`external_services_users` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `externalserviceid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `iprestriction` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `validuntil` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `exteservuser_ext3_ix` (`externalserviceid` ASC),
  INDEX `exteservuser_use3_ix` (`userid` ASC),
  CONSTRAINT `exteservuser_ext_fk`
    FOREIGN KEY (`externalserviceid`)
    REFERENCES `mydb`.`external_services` (`id`),
  CONSTRAINT `exteservuser_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'users allowed to use services with restricted users flag'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`external_tokens`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`external_tokens` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `token` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `privatetoken` VARCHAR(64) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `tokentype` SMALLINT(4) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `externalserviceid` BIGINT(10) NOT NULL,
  `sid` VARCHAR(128) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `contextid` BIGINT(10) NOT NULL,
  `creatorid` BIGINT(10) NOT NULL DEFAULT 1,
  `iprestriction` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `validuntil` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `lastaccess` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `extetoke_use3_ix` (`userid` ASC),
  INDEX `extetoke_ext3_ix` (`externalserviceid` ASC),
  INDEX `extetoke_con3_ix` (`contextid` ASC),
  INDEX `extetoke_cre3_ix` (`creatorid` ASC),
  CONSTRAINT `extetoke_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `extetoke_ext_fk`
    FOREIGN KEY (`externalserviceid`)
    REFERENCES `mydb`.`external_services` (`id`),
  CONSTRAINT `extetoke_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`),
  CONSTRAINT `extetoke_cre_fk`
    FOREIGN KEY (`creatorid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Security tokens for accessing of external services'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`blog_association`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`blog_association` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `contextid` BIGINT(10) NOT NULL,
  `blogid` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `blogasso_con3_ix` (`contextid` ASC),
  INDEX `blogasso_blo3_ix` (`blogid` ASC),
  CONSTRAINT `blogasso_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`),
  CONSTRAINT `blogasso_blo_fk`
    FOREIGN KEY (`blogid`)
    REFERENCES `mydb`.`post` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Associations of blog entries with courses and module instanc'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`blog_external`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`blog_external` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `url` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `filtertags` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `failedlastsync` TINYINT(1) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `timefetched` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `blogexte_use3_ix` (`userid` ASC),
  CONSTRAINT `blogexte_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'External blog links used for RSS copying of blog entries to '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`rating`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`rating` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `contextid` BIGINT(10) NOT NULL,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `ratingarea` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemid` BIGINT(10) NOT NULL,
  `scaleid` BIGINT(10) NOT NULL,
  `rating` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `rati_comratconite2_ix` (`component` ASC, `ratingarea` ASC, `contextid` ASC, `itemid` ASC),
  INDEX `rati_con3_ix` (`contextid` ASC),
  INDEX `rati_use3_ix` (`userid` ASC),
  CONSTRAINT `rati_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`),
  CONSTRAINT `rati_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'moodle ratings'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`license`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`license` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `fullname` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `source` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `enabled` TINYINT(1) NOT NULL DEFAULT 1,
  `version` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'store licenses used by moodle'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`registration_hubs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`registration_hubs` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `token` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `hubname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `huburl` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `confirmed` TINYINT(1) NOT NULL DEFAULT 0,
  `secret` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'hub where the site is registered on with their associated to'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`backup_controllers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`backup_controllers` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `backupid` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `operation` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT 'backup',
  `type` VARCHAR(10) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemid` BIGINT(10) NOT NULL,
  `format` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `interactive` SMALLINT(4) NOT NULL,
  `purpose` SMALLINT(4) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `status` SMALLINT(4) NOT NULL,
  `execution` SMALLINT(4) NOT NULL,
  `executiontime` BIGINT(10) NOT NULL,
  `checksum` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `controller` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `backcont_typite2_ix` (`type` ASC, `itemid` ASC),
  UNIQUE INDEX `backcont_bac2_uix` (`backupid` ASC),
  INDEX `backcont_use3_ix` (`userid` ASC),
  CONSTRAINT `backcont_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'To store the backup_controllers as they are used'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`backup_logs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`backup_logs` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `backupid` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `loglevel` SMALLINT(4) NOT NULL,
  `message` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `backlogs_bacid2_uix` (`backupid` ASC, `id` ASC),
  INDEX `backlogs_bac3_ix` (`backupid` ASC),
  CONSTRAINT `backlogs_bac_fk`
    FOREIGN KEY (`backupid`)
    REFERENCES `mydb`.`backup_controllers` (`backupid`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'To store all the logs from backup and restore operations (by'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`profiling`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`profiling` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `runid` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `url` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `data` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `totalexecutiontime` BIGINT(10) NOT NULL,
  `totalcputime` BIGINT(10) NOT NULL,
  `totalcalls` BIGINT(10) NOT NULL,
  `totalmemory` BIGINT(10) NOT NULL,
  `runreference` TINYINT(2) NOT NULL DEFAULT 0,
  `runcomment` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timecreated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `prof_urlrun2_ix` (`url` ASC, `runreference` ASC),
  INDEX `prof_timrun2_ix` (`timecreated` ASC, `runreference` ASC),
  UNIQUE INDEX `prof_run2_uix` (`runid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the results of all the profiling runs'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_published`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_published` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `huburl` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `courseid` BIGINT(10) NOT NULL,
  `timepublished` BIGINT(10) NOT NULL,
  `enrollable` TINYINT(1) NOT NULL DEFAULT 1,
  `hubcourseid` BIGINT(10) NOT NULL,
  `status` TINYINT(1) NULL DEFAULT 0,
  `timechecked` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Information about how and when an local courses were publish'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grading_areas`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grading_areas` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `contextid` BIGINT(10) NOT NULL,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `areaname` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `activemethod` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `gradarea_concomare2_uix` (`contextid` ASC, `component` ASC, `areaname` ASC),
  INDEX `gradarea_con3_ix` (`contextid` ASC),
  CONSTRAINT `gradarea_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Identifies gradable areas where advanced grading can happen.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grading_definitions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grading_definitions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `areaid` BIGINT(10) NOT NULL,
  `method` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NULL DEFAULT NULL,
  `status` BIGINT(10) NOT NULL DEFAULT 0,
  `copiedfromid` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `usercreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  `timecopied` BIGINT(10) NULL DEFAULT 0,
  `options` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `graddefi_are3_ix` (`areaid` ASC),
  INDEX `graddefi_use4_ix` (`usermodified` ASC),
  UNIQUE INDEX `graddefi_aremet2_uix` (`areaid` ASC, `method` ASC),
  INDEX `graddefi_use6_ix` (`usercreated` ASC),
  CONSTRAINT `graddefi_are_fk`
    FOREIGN KEY (`areaid`)
    REFERENCES `mydb`.`grading_areas` (`id`),
  CONSTRAINT `graddefi_use_fk`
    FOREIGN KEY (`usermodified`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `graddefi_use2_fk`
    FOREIGN KEY (`usercreated`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Contains the basic information about an advanced grading for'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`grading_instances`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`grading_instances` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `definitionid` BIGINT(10) NOT NULL,
  `raterid` BIGINT(10) NOT NULL,
  `itemid` BIGINT(10) NULL DEFAULT NULL,
  `rawgrade` DECIMAL(10,5) NULL DEFAULT NULL,
  `status` BIGINT(10) NOT NULL DEFAULT 0,
  `feedback` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `feedbackformat` TINYINT(2) NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `gradinst_def3_ix` (`definitionid` ASC),
  INDEX `gradinst_rat3_ix` (`raterid` ASC),
  CONSTRAINT `gradinst_def_fk`
    FOREIGN KEY (`definitionid`)
    REFERENCES `mydb`.`grading_definitions` (`id`),
  CONSTRAINT `gradinst_rat_fk`
    FOREIGN KEY (`raterid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Grading form instance is an assessment record for one gradab'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`event_subscriptions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`event_subscriptions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `url` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `eventtype` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `pollinterval` BIGINT(10) NOT NULL DEFAULT 0,
  `lastupdated` BIGINT(10) NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Tracks subscriptions to remote calendars.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`badge`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`badge` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `usercreated` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  `issuername` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `issuerurl` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `issuercontact` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `expiredate` BIGINT(10) NULL DEFAULT NULL,
  `expireperiod` BIGINT(10) NULL DEFAULT NULL,
  `type` TINYINT(1) NOT NULL DEFAULT 1,
  `courseid` BIGINT(10) NULL DEFAULT NULL,
  `message` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `messagesubject` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `attachment` TINYINT(1) NOT NULL DEFAULT 1,
  `notification` TINYINT(1) NOT NULL DEFAULT 1,
  `status` TINYINT(1) NOT NULL DEFAULT 0,
  `nextcron` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `badg_typ2_ix` (`type` ASC),
  INDEX `badg_cou3_ix` (`courseid` ASC),
  INDEX `badg_use4_ix` (`usermodified` ASC),
  INDEX `badg_use6_ix` (`usercreated` ASC),
  CONSTRAINT `badg_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `badg_use_fk`
    FOREIGN KEY (`usermodified`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `badg_use2_fk`
    FOREIGN KEY (`usercreated`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines badge'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`badge_criteria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`badge_criteria` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `badgeid` BIGINT(10) NOT NULL DEFAULT 0,
  `criteriatype` BIGINT(10) NULL DEFAULT NULL,
  `method` TINYINT(1) NOT NULL DEFAULT 1,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `badgcrit_cri2_ix` (`criteriatype` ASC),
  UNIQUE INDEX `badgcrit_badcri2_uix` (`badgeid` ASC, `criteriatype` ASC),
  INDEX `badgcrit_bad3_ix` (`badgeid` ASC),
  CONSTRAINT `badgcrit_bad_fk`
    FOREIGN KEY (`badgeid`)
    REFERENCES `mydb`.`badge` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines criteria for issuing badges'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`badge_criteria_param`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`badge_criteria_param` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `critid` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `badgcritpara_cri3_ix` (`critid` ASC),
  CONSTRAINT `badgcritpara_cri_fk`
    FOREIGN KEY (`critid`)
    REFERENCES `mydb`.`badge_criteria` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines parameters for badges criteria'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`badge_issued`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`badge_issued` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `badgeid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `uniquehash` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `dateissued` BIGINT(10) NOT NULL DEFAULT 0,
  `dateexpire` BIGINT(10) NULL DEFAULT NULL,
  `visible` TINYINT(1) NOT NULL DEFAULT 0,
  `issuernotified` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `badgissu_baduse2_uix` (`badgeid` ASC, `userid` ASC),
  INDEX `badgissu_bad3_ix` (`badgeid` ASC),
  INDEX `badgissu_use3_ix` (`userid` ASC),
  CONSTRAINT `badgissu_bad_fk`
    FOREIGN KEY (`badgeid`)
    REFERENCES `mydb`.`badge` (`id`),
  CONSTRAINT `badgissu_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines issued badges'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`badge_criteria_met`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`badge_criteria_met` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `issuedid` BIGINT(10) NULL DEFAULT NULL,
  `critid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `datemet` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `badgcritmet_cri3_ix` (`critid` ASC),
  INDEX `badgcritmet_use3_ix` (`userid` ASC),
  INDEX `badgcritmet_iss3_ix` (`issuedid` ASC),
  CONSTRAINT `badgcritmet_cri_fk`
    FOREIGN KEY (`critid`)
    REFERENCES `mydb`.`badge_criteria` (`id`),
  CONSTRAINT `badgcritmet_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `badgcritmet_iss_fk`
    FOREIGN KEY (`issuedid`)
    REFERENCES `mydb`.`badge_issued` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines criteria that were met for an issued badge'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`badge_manual_award`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`badge_manual_award` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `badgeid` BIGINT(10) NOT NULL,
  `recipientid` BIGINT(10) NOT NULL,
  `issuerid` BIGINT(10) NOT NULL,
  `issuerrole` BIGINT(10) NOT NULL,
  `datemet` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `badgmanuawar_bad3_ix` (`badgeid` ASC),
  INDEX `badgmanuawar_rec3_ix` (`recipientid` ASC),
  INDEX `badgmanuawar_iss4_ix` (`issuerid` ASC),
  INDEX `badgmanuawar_iss6_ix` (`issuerrole` ASC),
  CONSTRAINT `badgmanuawar_bad_fk`
    FOREIGN KEY (`badgeid`)
    REFERENCES `mydb`.`badge` (`id`),
  CONSTRAINT `badgmanuawar_rec_fk`
    FOREIGN KEY (`recipientid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `badgmanuawar_iss_fk`
    FOREIGN KEY (`issuerid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `badgmanuawar_iss2_fk`
    FOREIGN KEY (`issuerrole`)
    REFERENCES `mydb`.`role` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Track manual award criteria for badges'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`badge_backpack`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`badge_backpack` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `email` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `backpackurl` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `backpackuid` BIGINT(10) NOT NULL,
  `autosync` TINYINT(1) NOT NULL DEFAULT 0,
  `password` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `badgback_use3_ix` (`userid` ASC),
  CONSTRAINT `badgback_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines settings for connecting external backpack'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`badge_external`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`badge_external` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `backpackid` BIGINT(10) NOT NULL,
  `collectionid` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `badgexte_bac3_ix` (`backpackid` ASC),
  CONSTRAINT `badgexte_bac_fk`
    FOREIGN KEY (`backpackid`)
    REFERENCES `mydb`.`badge_backpack` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Setting for external badges display'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`user_devices`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user_devices` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `appid` VARCHAR(128) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `name` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `model` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `platform` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `version` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `pushid` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `uuid` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `userdevi_uuiuse2_ix` (`uuid` ASC, `userid` ASC),
  UNIQUE INDEX `userdevi_pususe2_uix` (`pushid` ASC, `userid` ASC),
  INDEX `userdevi_use3_ix` (`userid` ASC),
  CONSTRAINT `userdevi_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table stores user\'s mobile devices information in order'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`user_password_resets`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`user_password_resets` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `timerequested` BIGINT(10) NOT NULL,
  `timererequested` BIGINT(10) NOT NULL DEFAULT 0,
  `token` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `userpassrese_use3_ix` (`userid` ASC),
  CONSTRAINT `userpassrese_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'table tracking password reset confirmation tokens'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lock_db`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lock_db` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `resourcekey` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `expires` BIGINT(10) NULL DEFAULT NULL,
  `owner` VARCHAR(36) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `lockdb_res2_uix` (`resourcekey` ASC),
  INDEX `lockdb_exp2_ix` (`expires` ASC),
  INDEX `lockdb_own2_ix` (`owner` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores active and inactive lock types for db locking method.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`task_scheduled`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`task_scheduled` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `component` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `classname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `lastruntime` BIGINT(10) NULL DEFAULT NULL,
  `nextruntime` BIGINT(10) NULL DEFAULT NULL,
  `blocking` TINYINT(2) NOT NULL DEFAULT 0,
  `minute` VARCHAR(25) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `hour` VARCHAR(25) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `day` VARCHAR(25) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `month` VARCHAR(25) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `dayofweek` VARCHAR(25) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `faildelay` BIGINT(10) NULL DEFAULT NULL,
  `customised` TINYINT(2) NOT NULL DEFAULT 0,
  `disabled` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `tasksche_cla2_uix` (`classname` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'List of scheduled tasks to be run by cron.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`task_adhoc`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`task_adhoc` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `component` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `classname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `nextruntime` BIGINT(10) NOT NULL,
  `faildelay` BIGINT(10) NULL DEFAULT NULL,
  `customdata` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `blocking` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `taskadho_nex2_ix` (`nextruntime` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'List of adhoc tasks waiting to run.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`messageinbound_handlers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`messageinbound_handlers` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `classname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `defaultexpiration` BIGINT(10) NOT NULL DEFAULT 86400,
  `validateaddress` TINYINT(1) NOT NULL DEFAULT 1,
  `enabled` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `messhand_cla2_uix` (`classname` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Inbound Message Handler definitions.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`messageinbound_datakeys`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`messageinbound_datakeys` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `handler` BIGINT(10) NOT NULL,
  `datavalue` BIGINT(10) NOT NULL,
  `datakey` VARCHAR(64) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `expires` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `messdata_handat2_uix` (`handler` ASC, `datavalue` ASC),
  INDEX `messdata_han3_ix` (`handler` ASC),
  CONSTRAINT `messdata_han_fk`
    FOREIGN KEY (`handler`)
    REFERENCES `mydb`.`messageinbound_handlers` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Inbound Message data item secret keys.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`messageinbound_messagelist`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`messageinbound_messagelist` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `messageid` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `address` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `messmess_use3_ix` (`userid` ASC),
  INDEX `messageinbound_messagelist_erd_message_id` (`messageid` ASC),
  CONSTRAINT `messmess_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `messageinbound_messagelist_erd_message_id`
    FOREIGN KEY (`messageid`)
    REFERENCES `mydb`.`message` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'A list of message IDs for existing replies'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_framework`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_framework` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `shortname` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `contextid` BIGINT(10) NOT NULL,
  `idnumber` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `scaleid` BIGINT(11) NULL DEFAULT NULL,
  `scaleconfiguration` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `visible` TINYINT(2) NOT NULL DEFAULT 1,
  `taxonomies` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `compfram_idn2_uix` (`idnumber` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'List of competency frameworks.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `shortname` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `idnumber` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `competencyframeworkid` BIGINT(10) NOT NULL,
  `parentid` BIGINT(10) NOT NULL DEFAULT 0,
  `path` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `sortorder` BIGINT(10) NOT NULL,
  `ruletype` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `ruleoutcome` TINYINT(2) NOT NULL DEFAULT 0,
  `ruleconfig` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `scaleid` BIGINT(10) NULL DEFAULT NULL,
  `scaleconfiguration` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `comp_comidn2_uix` (`competencyframeworkid` ASC, `idnumber` ASC),
  INDEX `comp_rul2_ix` (`ruleoutcome` ASC),
  CONSTRAINT `competency_erd_competency_framework`
    FOREIGN KEY (`competencyframeworkid`)
    REFERENCES `mydb`.`competency_framework` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table contains the master record of each competency in '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_coursecompsetting`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_coursecompsetting` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL,
  `pushratingstouserplans` TINYINT(2) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `compcour_cou2_uix` (`courseid` ASC),
  CONSTRAINT `compcour_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table contains the course specific settings for compete'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_coursecomp`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_coursecomp` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL,
  `competencyid` BIGINT(10) NOT NULL,
  `ruleoutcome` TINYINT(2) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  `sortorder` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `compcour_courul2_ix` (`courseid` ASC, `ruleoutcome` ASC),
  UNIQUE INDEX `compcour_coucom2_uix` (`courseid` ASC, `competencyid` ASC),
  INDEX `compcour_cou5_ix` (`courseid` ASC),
  INDEX `compcour_com3_ix` (`competencyid` ASC),
  CONSTRAINT `compcour_cou3_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `compcour_com_fk`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Link a competency to a course.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_template`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_template` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `shortname` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `contextid` BIGINT(10) NOT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `visible` TINYINT(2) NOT NULL DEFAULT 1,
  `duedate` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Learning plan templates.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_plan`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_plan` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL,
  `templateid` BIGINT(10) NULL DEFAULT NULL,
  `origtemplateid` BIGINT(10) NULL DEFAULT NULL,
  `status` TINYINT(1) NOT NULL,
  `duedate` BIGINT(10) NULL DEFAULT 0,
  `reviewerid` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `usermodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `compplan_usesta2_ix` (`userid` ASC, `status` ASC),
  INDEX `compplan_tem2_ix` (`templateid` ASC),
  INDEX `compplan_stadue2_ix` (`status` ASC, `duedate` ASC),
  CONSTRAINT `competency_plan_erd_competency_template`
    FOREIGN KEY (`templateid`)
    REFERENCES `mydb`.`competency_template` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Learning plans'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_templatecomp`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_templatecomp` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `templateid` BIGINT(10) NOT NULL,
  `competencyid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  `sortorder` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `comptemp_tem3_ix` (`templateid` ASC),
  INDEX `comptemp_com3_ix` (`competencyid` ASC),
  CONSTRAINT `comptemp_tem_fk`
    FOREIGN KEY (`templateid`)
    REFERENCES `mydb`.`competency_template` (`id`),
  CONSTRAINT `comptemp_com_fk`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`),
  CONSTRAINT `competency_templatecomp_erd_competency`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Link a competency to a learning plan template.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_templatecohort`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_templatecohort` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `templateid` BIGINT(10) NOT NULL,
  `cohortid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `comptemp_tem4_ix` (`templateid` ASC),
  UNIQUE INDEX `comptemp_temcoh2_uix` (`templateid` ASC, `cohortid` ASC),
  CONSTRAINT `competency_templatecohort_erd_competency_template`
    FOREIGN KEY (`templateid`)
    REFERENCES `mydb`.`competency_template` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Default comment for the table, please edit me'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_relatedcomp`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_relatedcomp` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `competencyid` BIGINT(10) NOT NULL,
  `relatedcompetencyid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `competency_relatedcomp_erd_competency` (`competencyid` ASC),
  CONSTRAINT `competency_relatedcomp_erd_competency`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Related competencies'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_usercomp`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_usercomp` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `competencyid` BIGINT(10) NOT NULL,
  `status` TINYINT(2) NOT NULL DEFAULT 0,
  `reviewerid` BIGINT(10) NULL DEFAULT NULL,
  `proficiency` TINYINT(2) NULL DEFAULT NULL,
  `grade` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `compuser_usecom2_uix` (`userid` ASC, `competencyid` ASC),
  INDEX `competency_usercomp_erd_competency` (`competencyid` ASC),
  CONSTRAINT `competency_usercomp_erd_competency`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'User competencies'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_usercompcourse`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_usercompcourse` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `courseid` BIGINT(10) NOT NULL,
  `competencyid` BIGINT(10) NOT NULL,
  `proficiency` TINYINT(2) NULL DEFAULT NULL,
  `grade` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `compuser_usecoucom2_uix` (`userid` ASC, `courseid` ASC, `competencyid` ASC),
  INDEX `competency_usercompcourse_erd_competency` (`competencyid` ASC),
  CONSTRAINT `competency_usercompcourse_erd_competency`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'User competencies in a course'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_usercompplan`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_usercompplan` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `competencyid` BIGINT(10) NOT NULL,
  `planid` BIGINT(10) NOT NULL,
  `proficiency` TINYINT(2) NULL DEFAULT NULL,
  `grade` BIGINT(10) NULL DEFAULT NULL,
  `sortorder` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `compuser_usecompla2_uix` (`userid` ASC, `competencyid` ASC, `planid` ASC),
  INDEX `competency_usercompplan_erd_competency` (`competencyid` ASC),
  CONSTRAINT `competency_usercompplan_erd_competency`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'User competencies plans'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_plancomp`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_plancomp` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `planid` BIGINT(10) NOT NULL,
  `competencyid` BIGINT(10) NOT NULL,
  `sortorder` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NULL DEFAULT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `compplan_placom2_uix` (`planid` ASC, `competencyid` ASC),
  INDEX `competency_plancomp_erd_competency` (`competencyid` ASC),
  CONSTRAINT `competency_plancomp_erd_competency`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`),
  CONSTRAINT `competency_plancomp_erd_competency`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Plan competencies'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_evidence`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_evidence` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `usercompetencyid` BIGINT(10) NOT NULL,
  `contextid` BIGINT(10) NOT NULL,
  `action` TINYINT(2) NOT NULL,
  `actionuserid` BIGINT(10) NULL DEFAULT NULL,
  `descidentifier` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `desccomponent` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `desca` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `url` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `grade` BIGINT(10) NULL DEFAULT NULL,
  `note` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `compevid_use2_ix` (`usercompetencyid` ASC),
  CONSTRAINT `competency_evidence_erd_competency_usercomp`
    FOREIGN KEY (`usercompetencyid`)
    REFERENCES `mydb`.`competency_usercomp` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The evidence linked to a user competency'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_userevidence`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_userevidence` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `name` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `descriptionformat` TINYINT(1) NOT NULL,
  `url` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `compuser_use2_ix` (`userid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The evidence of prior learning'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_userevidencecomp`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_userevidencecomp` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userevidenceid` BIGINT(10) NOT NULL,
  `competencyid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `compuser_use3_ix` (`userevidenceid` ASC),
  UNIQUE INDEX `compuser_usecom3_uix` (`userevidenceid` ASC, `competencyid` ASC),
  INDEX `competency_userevidencecomp_erd_competency` (`competencyid` ASC),
  CONSTRAINT `competency_userevidencecomp_erd_competency`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Relationship between user evidence and competencies'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`competency_modulecomp`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`competency_modulecomp` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `cmid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  `sortorder` BIGINT(10) NOT NULL,
  `competencyid` BIGINT(10) NOT NULL,
  `ruleoutcome` TINYINT(2) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `compmodu_cmirul2_ix` (`cmid` ASC, `ruleoutcome` ASC),
  UNIQUE INDEX `compmodu_cmicom2_uix` (`cmid` ASC, `competencyid` ASC),
  INDEX `compmodu_cmi3_ix` (`cmid` ASC),
  INDEX `compmodu_com3_ix` (`competencyid` ASC),
  CONSTRAINT `compmodu_cmi_fk`
    FOREIGN KEY (`cmid`)
    REFERENCES `mydb`.`course_modules` (`id`),
  CONSTRAINT `compmodu_com_fk`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`),
  CONSTRAINT `competency_modulecomp_erd_competency`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`),
  CONSTRAINT `competency_modulecomp_erd_competency`
    FOREIGN KEY (`competencyid`)
    REFERENCES `mydb`.`competency` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Link a competency to a module.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`oauth2_issuer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`oauth2_issuer` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `image` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `baseurl` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `clientid` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `clientsecret` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `loginscopes` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `loginscopesoffline` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `loginparams` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `loginparamsoffline` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `alloweddomains` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `scopessupported` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `enabled` TINYINT(2) NOT NULL DEFAULT 1,
  `showonloginpage` TINYINT(2) NOT NULL DEFAULT 1,
  `sortorder` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Details for an oauth 2 connect identity issuer.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`oauth2_endpoint`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`oauth2_endpoint` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `url` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `issuerid` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `oautendp_iss3_ix` (`issuerid` ASC),
  CONSTRAINT `oautendp_iss_fk`
    FOREIGN KEY (`issuerid`)
    REFERENCES `mydb`.`oauth2_issuer` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Describes the named endpoint for an oauth2 service.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`oauth2_system_account`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`oauth2_system_account` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  `issuerid` BIGINT(10) NOT NULL,
  `refreshtoken` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `grantedscopes` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `email` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `username` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `oautsystacco_iss2_uix` (`issuerid` ASC),
  CONSTRAINT `oautsystacco_iss_fk`
    FOREIGN KEY (`issuerid`)
    REFERENCES `mydb`.`oauth2_issuer` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stored details used to get an access token as a system user '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`oauth2_user_field_mapping`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`oauth2_user_field_mapping` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `timemodified` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  `issuerid` BIGINT(10) NOT NULL,
  `externalfield` VARCHAR(64) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `internalfield` VARCHAR(64) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `oautuserfielmapp_iss3_ix` (`issuerid` ASC),
  UNIQUE INDEX `oautuserfielmapp_issint2_uix` (`issuerid` ASC, `internalfield` ASC),
  CONSTRAINT `oautuserfielmapp_iss_fk`
    FOREIGN KEY (`issuerid`)
    REFERENCES `mydb`.`oauth2_issuer` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Mapping of oauth user fields to moodle fields.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`course_completion_defaults`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`course_completion_defaults` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL,
  `module` BIGINT(10) NOT NULL,
  `completion` TINYINT(1) NOT NULL DEFAULT 0,
  `completionview` TINYINT(1) NOT NULL DEFAULT 0,
  `completionusegrade` TINYINT(1) NOT NULL DEFAULT 0,
  `completionexpected` BIGINT(10) NOT NULL DEFAULT 0,
  `customrules` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `courcompdefa_coumod2_uix` (`course` ASC, `module` ASC),
  INDEX `courcompdefa_mod3_ix` (`module` ASC),
  INDEX `courcompdefa_cou3_ix` (`course` ASC),
  CONSTRAINT `courcompdefa_mod_fk`
    FOREIGN KEY (`module`)
    REFERENCES `mydb`.`modules` (`id`),
  CONSTRAINT `courcompdefa_cou_fk`
    FOREIGN KEY (`course`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Default settings for activities completion'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`auth_oauth2_linked_login`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`auth_oauth2_linked_login` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `issuerid` BIGINT(10) NOT NULL,
  `username` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `email` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `confirmtoken` VARCHAR(64) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `confirmtokenexpires` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `authoautlinklogi_issuse2_ix` (`issuerid` ASC, `username` ASC),
  INDEX `authoautlinklogi_use4_ix` (`usermodified` ASC),
  INDEX `authoautlinklogi_use6_ix` (`userid` ASC),
  INDEX `authoautlinklogi_iss3_ix` (`issuerid` ASC),
  UNIQUE INDEX `authoautlinklogi_useissus2_uix` (`userid` ASC, `issuerid` ASC, `username` ASC),
  CONSTRAINT `authoautlinklogi_use_fk`
    FOREIGN KEY (`usermodified`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `authoautlinklogi_use2_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `authoautlinklogi_iss_fk`
    FOREIGN KEY (`issuerid`)
    REFERENCES `mydb`.`oauth2_issuer` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Accounts linked to a users Moodle account.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`block_community`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`block_community` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `coursename` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `coursedescription` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `courseurl` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `imageurl` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `block_community_erd_user_id` (`userid` ASC),
  CONSTRAINT `block_community_erd_user_id`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Community block'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`block_recent_activity`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`block_recent_activity` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL,
  `cmid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `action` TINYINT(1) NOT NULL,
  `modname` VARCHAR(20) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `blocreceacti_coutim2_ix` (`courseid` ASC, `timecreated` ASC),
  INDEX `block_recent_activity_erd_user_id` (`userid` ASC),
  CONSTRAINT `block_recent_activity_erd_user_id`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Recent activity block'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`block_rss_client`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`block_rss_client` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `title` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `preferredtitle` VARCHAR(64) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `shared` TINYINT(2) NOT NULL DEFAULT 0,
  `url` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `skiptime` BIGINT(10) NOT NULL DEFAULT 0,
  `skipuntil` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `block_rss_client_erd_user_id` (`userid` ASC),
  CONSTRAINT `block_rss_client_erd_user_id`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `block_rss_client_erd_user_id`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Remote news feed information. Contains the news feed id, the'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_flatfile`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_flatfile` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `action` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `roleid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `courseid` BIGINT(10) NOT NULL,
  `timestart` BIGINT(10) NOT NULL DEFAULT 0,
  `timeend` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `enroflat_cou3_ix` (`courseid` ASC),
  INDEX `enroflat_use3_ix` (`userid` ASC),
  INDEX `enroflat_rol3_ix` (`roleid` ASC),
  CONSTRAINT `enroflat_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `enroflat_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `enroflat_rol_fk`
    FOREIGN KEY (`roleid`)
    REFERENCES `mydb`.`role` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'enrol_flatfile table retrofitted from MySQL'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_lti_tools`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_lti_tools` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `enrolid` BIGINT(10) NOT NULL,
  `contextid` BIGINT(10) NOT NULL,
  `institution` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `lang` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT 'en',
  `timezone` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '99',
  `maxenrolled` BIGINT(10) NOT NULL DEFAULT 0,
  `maildisplay` TINYINT(2) NOT NULL DEFAULT 2,
  `city` VARCHAR(120) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `country` VARCHAR(2) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `gradesync` TINYINT(1) NOT NULL DEFAULT 0,
  `gradesynccompletion` TINYINT(1) NOT NULL DEFAULT 0,
  `membersync` TINYINT(1) NOT NULL DEFAULT 0,
  `membersyncmode` TINYINT(1) NOT NULL DEFAULT 0,
  `roleinstructor` BIGINT(10) NOT NULL,
  `rolelearner` BIGINT(10) NOT NULL,
  `secret` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `enroltitool_enr3_ix` (`enrolid` ASC),
  INDEX `enroltitool_con3_ix` (`contextid` ASC),
  CONSTRAINT `enroltitool_enr_fk`
    FOREIGN KEY (`enrolid`)
    REFERENCES `mydb`.`enrol` (`id`),
  CONSTRAINT `enroltitool_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'List of tools provided to the remote system'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_lti_users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_lti_users` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `toolid` BIGINT(10) NOT NULL,
  `serviceurl` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `sourceid` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `consumerkey` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `consumersecret` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `membershipsurl` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `membershipsid` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `lastgrade` DECIMAL(10,5) NULL DEFAULT NULL,
  `lastaccess` BIGINT(10) NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `enroltiuser_use3_ix` (`userid` ASC),
  INDEX `enroltiuser_too3_ix` (`toolid` ASC),
  CONSTRAINT `enroltiuser_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `enroltiuser_too_fk`
    FOREIGN KEY (`toolid`)
    REFERENCES `mydb`.`enrol_lti_tools` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'User access log and gradeback data'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_lti_lti2_consumer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_lti_lti2_consumer` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `consumerkey256` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `consumerkey` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `secret` VARCHAR(1024) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `ltiversion` VARCHAR(10) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `consumername` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `consumerversion` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `consumerguid` VARCHAR(1024) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `profile` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `toolproxy` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `settings` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `protected` TINYINT(1) NOT NULL,
  `enabled` TINYINT(1) NOT NULL,
  `enablefrom` BIGINT(10) NULL DEFAULT NULL,
  `enableuntil` BIGINT(10) NULL DEFAULT NULL,
  `lastaccess` BIGINT(10) NULL DEFAULT NULL,
  `created` BIGINT(10) NOT NULL,
  `updated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `enroltilti2cons_con2_uix` (`consumerkey256` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'LTI consumers interacting with moodle'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_lti_lti2_tool_proxy`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_lti_lti2_tool_proxy` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `toolproxykey` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `consumerid` BIGINT(11) NOT NULL,
  `toolproxy` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `created` BIGINT(10) NOT NULL,
  `updated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `enroltilti2toolprox_too2_uix` (`toolproxykey` ASC),
  INDEX `enroltilti2toolprox_con3_ix` (`consumerid` ASC),
  CONSTRAINT `enroltilti2toolprox_con_fk`
    FOREIGN KEY (`consumerid`)
    REFERENCES `mydb`.`enrol_lti_lti2_consumer` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'A tool proxy between moodle and a consumer'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_lti_lti2_context`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_lti_lti2_context` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `consumerid` BIGINT(11) NOT NULL,
  `lticontextkey` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `type` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `settings` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `created` BIGINT(10) NOT NULL,
  `updated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `enroltilti2cont_con3_ix` (`consumerid` ASC),
  CONSTRAINT `enroltilti2cont_con_fk`
    FOREIGN KEY (`consumerid`)
    REFERENCES `mydb`.`enrol_lti_lti2_consumer` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Information about a specific LTI contexts from the consumers'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_lti_lti2_nonce`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_lti_lti2_nonce` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `consumerid` BIGINT(11) NOT NULL,
  `value` VARCHAR(64) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `expires` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `enroltilti2nonc_con3_ix` (`consumerid` ASC),
  CONSTRAINT `enroltilti2nonc_con_fk`
    FOREIGN KEY (`consumerid`)
    REFERENCES `mydb`.`enrol_lti_lti2_consumer` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Nonce used for authentication between moodle and a consumer'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_lti_lti2_resource_link`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_lti_lti2_resource_link` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `contextid` BIGINT(11) NULL DEFAULT NULL,
  `consumerid` BIGINT(11) NULL DEFAULT NULL,
  `ltiresourcelinkkey` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `settings` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `primaryresourcelinkid` BIGINT(11) NULL DEFAULT NULL,
  `shareapproved` TINYINT(1) NULL DEFAULT NULL,
  `created` BIGINT(10) NOT NULL,
  `updated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `enroltilti2resolink_con4_ix` (`contextid` ASC),
  INDEX `enroltilti2resolink_pri3_ix` (`primaryresourcelinkid` ASC),
  INDEX `enroltilti2resolink_con6_ix` (`consumerid` ASC),
  CONSTRAINT `enroltilti2resolink_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`enrol_lti_lti2_context` (`id`),
  CONSTRAINT `enroltilti2resolink_pri_fk`
    FOREIGN KEY (`primaryresourcelinkid`)
    REFERENCES `mydb`.`enrol_lti_lti2_resource_link` (`id`),
  CONSTRAINT `enroltilti2resolink_con2_fk`
    FOREIGN KEY (`consumerid`)
    REFERENCES `mydb`.`enrol_lti_lti2_consumer` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Link from the consumer to the tool'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_lti_lti2_share_key`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_lti_lti2_share_key` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `sharekey` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `resourcelinkid` BIGINT(11) NOT NULL,
  `autoapprove` TINYINT(1) NOT NULL,
  `expires` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `enroltilti2sharkey_sha2_uix` (`sharekey` ASC),
  UNIQUE INDEX `enroltilti2sharkey_res2_uix` (`resourcelinkid` ASC),
  CONSTRAINT `enroltilti2sharkey_res_fk`
    FOREIGN KEY (`resourcelinkid`)
    REFERENCES `mydb`.`enrol_lti_lti2_resource_link` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Resource link share key'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_lti_lti2_user_result`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_lti_lti2_user_result` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `resourcelinkid` BIGINT(11) NOT NULL,
  `ltiuserkey` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `ltiresultsourcedid` VARCHAR(1024) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `created` BIGINT(10) NOT NULL,
  `updated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `enroltilti2userresu_res3_ix` (`resourcelinkid` ASC),
  CONSTRAINT `enroltilti2userresu_res_fk`
    FOREIGN KEY (`resourcelinkid`)
    REFERENCES `mydb`.`enrol_lti_lti2_resource_link` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Results for each user for each resource link'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_lti_tool_consumer_map`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_lti_tool_consumer_map` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `toolid` BIGINT(11) NOT NULL,
  `consumerid` BIGINT(11) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `enroltitoolconsmap_too3_ix` (`toolid` ASC),
  INDEX `enroltitoolconsmap_con3_ix` (`consumerid` ASC),
  CONSTRAINT `enroltitoolconsmap_too_fk`
    FOREIGN KEY (`toolid`)
    REFERENCES `mydb`.`enrol_lti_tools` (`id`),
  CONSTRAINT `enroltitoolconsmap_con_fk`
    FOREIGN KEY (`consumerid`)
    REFERENCES `mydb`.`enrol_lti_lti2_consumer` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Table that maps the published tool to tool consumers.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`enrol_paypal`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`enrol_paypal` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `business` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `receiver_email` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `receiver_id` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `item_name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `instanceid` BIGINT(10) NOT NULL DEFAULT 0,
  `memo` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `tax` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `option_name1` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `option_selection1_x` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `option_name2` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `option_selection2_x` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `payment_status` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `pending_reason` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `reason_code` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `txn_id` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `parent_txn_id` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `payment_type` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timeupdated` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `enrol_paypal_erd_course_id` (`courseid` ASC),
  CONSTRAINT `enrol_paypal_erd_course_id`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Holds all known information about PayPal transactions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assign`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assign` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `alwaysshowdescription` TINYINT(2) NOT NULL DEFAULT 0,
  `nosubmissions` TINYINT(2) NOT NULL DEFAULT 0,
  `submissiondrafts` TINYINT(2) NOT NULL DEFAULT 0,
  `sendnotifications` TINYINT(2) NOT NULL DEFAULT 0,
  `sendlatenotifications` TINYINT(2) NOT NULL DEFAULT 0,
  `duedate` BIGINT(10) NOT NULL DEFAULT 0,
  `allowsubmissionsfromdate` BIGINT(10) NOT NULL DEFAULT 0,
  `grade` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `requiresubmissionstatement` TINYINT(2) NOT NULL DEFAULT 0,
  `completionsubmit` TINYINT(2) NOT NULL DEFAULT 0,
  `cutoffdate` BIGINT(10) NOT NULL DEFAULT 0,
  `gradingduedate` BIGINT(10) NOT NULL DEFAULT 0,
  `teamsubmission` TINYINT(2) NOT NULL DEFAULT 0,
  `requireallteammemberssubmit` TINYINT(2) NOT NULL DEFAULT 0,
  `teamsubmissiongroupingid` BIGINT(10) NOT NULL DEFAULT 0,
  `blindmarking` TINYINT(2) NOT NULL DEFAULT 0,
  `revealidentities` TINYINT(2) NOT NULL DEFAULT 0,
  `attemptreopenmethod` VARCHAR(10) CHARACTER SET 'utf8' NOT NULL DEFAULT 'none',
  `maxattempts` MEDIUMINT(6) NOT NULL DEFAULT -1,
  `markingworkflow` TINYINT(2) NOT NULL DEFAULT 0,
  `markingallocation` TINYINT(2) NOT NULL DEFAULT 0,
  `sendstudentnotifications` TINYINT(2) NOT NULL DEFAULT 1,
  `preventsubmissionnotingroup` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assi_cou2_ix` (`course` ASC),
  INDEX `assi_tea2_ix` (`teamsubmissiongroupingid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table saves information about an instance of mod_assign'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assign_submission`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assign_submission` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `assignment` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `status` VARCHAR(10) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `groupid` BIGINT(10) NOT NULL DEFAULT 0,
  `attemptnumber` BIGINT(10) NOT NULL DEFAULT 0,
  `latest` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assisubm_use2_ix` (`userid` ASC),
  INDEX `assisubm_att2_ix` (`attemptnumber` ASC),
  UNIQUE INDEX `assisubm_assusegroatt2_uix` (`assignment` ASC, `userid` ASC, `groupid` ASC, `attemptnumber` ASC),
  INDEX `assisubm_assusegrolat2_ix` (`assignment` ASC, `userid` ASC, `groupid` ASC, `latest` ASC),
  INDEX `assisubm_ass3_ix` (`assignment` ASC),
  CONSTRAINT `assisubm_ass_fk`
    FOREIGN KEY (`assignment`)
    REFERENCES `mydb`.`assign` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table keeps information about student interactions with'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assign_grades`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assign_grades` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `assignment` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `grader` BIGINT(10) NOT NULL DEFAULT 0,
  `grade` DECIMAL(10,5) NULL DEFAULT 0,
  `attemptnumber` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assigrad_use2_ix` (`userid` ASC),
  INDEX `assigrad_att2_ix` (`attemptnumber` ASC),
  UNIQUE INDEX `assigrad_assuseatt2_uix` (`assignment` ASC, `userid` ASC, `attemptnumber` ASC),
  INDEX `assigrad_ass3_ix` (`assignment` ASC),
  CONSTRAINT `assigrad_ass_fk`
    FOREIGN KEY (`assignment`)
    REFERENCES `mydb`.`assign` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Grading information about a single assignment submission.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assign_plugin_config`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assign_plugin_config` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `assignment` BIGINT(10) NOT NULL DEFAULT 0,
  `plugin` VARCHAR(28) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `subtype` VARCHAR(28) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `name` VARCHAR(28) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `assiplugconf_plu2_ix` (`plugin` ASC),
  INDEX `assiplugconf_sub2_ix` (`subtype` ASC),
  INDEX `assiplugconf_nam2_ix` (`name` ASC),
  INDEX `assiplugconf_ass3_ix` (`assignment` ASC),
  CONSTRAINT `assiplugconf_ass_fk`
    FOREIGN KEY (`assignment`)
    REFERENCES `mydb`.`assign` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Config data for an instance of a plugin in an assignment.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assign_user_mapping`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assign_user_mapping` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `assignment` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assiusermapp_ass3_ix` (`assignment` ASC),
  INDEX `assiusermapp_use3_ix` (`userid` ASC),
  CONSTRAINT `assiusermapp_ass_fk`
    FOREIGN KEY (`assignment`)
    REFERENCES `mydb`.`assign` (`id`),
  CONSTRAINT `assiusermapp_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Map an assignment specific id number to a user'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assign_user_flags`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assign_user_flags` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `assignment` BIGINT(10) NOT NULL DEFAULT 0,
  `locked` BIGINT(10) NOT NULL DEFAULT 0,
  `mailed` SMALLINT(4) NOT NULL DEFAULT 0,
  `extensionduedate` BIGINT(10) NOT NULL DEFAULT 0,
  `workflowstate` VARCHAR(20) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `allocatedmarker` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assiuserflag_mai2_ix` (`mailed` ASC),
  INDEX `assiuserflag_use3_ix` (`userid` ASC),
  INDEX `assiuserflag_ass3_ix` (`assignment` ASC),
  CONSTRAINT `assiuserflag_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `assiuserflag_ass_fk`
    FOREIGN KEY (`assignment`)
    REFERENCES `mydb`.`assign` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'List of flags that can be set for a single user in a single '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assign_overrides`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assign_overrides` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `assignid` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NULL DEFAULT NULL,
  `userid` BIGINT(10) NULL DEFAULT NULL,
  `sortorder` BIGINT(10) NULL DEFAULT NULL,
  `allowsubmissionsfromdate` BIGINT(10) NULL DEFAULT NULL,
  `duedate` BIGINT(10) NULL DEFAULT NULL,
  `cutoffdate` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `assiover_ass3_ix` (`assignid` ASC),
  INDEX `assiover_gro3_ix` (`groupid` ASC),
  INDEX `assiover_use3_ix` (`userid` ASC),
  CONSTRAINT `assiover_ass_fk`
    FOREIGN KEY (`assignid`)
    REFERENCES `mydb`.`assign` (`id`),
  CONSTRAINT `assiover_gro_fk`
    FOREIGN KEY (`groupid`)
    REFERENCES `mydb`.`groups` (`id`),
  CONSTRAINT `assiover_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The overrides to assign settings.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assignment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assignment` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `assignmenttype` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `resubmit` TINYINT(2) NOT NULL DEFAULT 0,
  `preventlate` TINYINT(2) NOT NULL DEFAULT 0,
  `emailteachers` TINYINT(2) NOT NULL DEFAULT 0,
  `var1` BIGINT(10) NULL DEFAULT 0,
  `var2` BIGINT(10) NULL DEFAULT 0,
  `var3` BIGINT(10) NULL DEFAULT 0,
  `var4` BIGINT(10) NULL DEFAULT 0,
  `var5` BIGINT(10) NULL DEFAULT 0,
  `maxbytes` BIGINT(10) NOT NULL DEFAULT 100000,
  `timedue` BIGINT(10) NOT NULL DEFAULT 0,
  `timeavailable` BIGINT(10) NOT NULL DEFAULT 0,
  `grade` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assi_cou3_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines assignments'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assignment_submissions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assignment_submissions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `assignment` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `numfiles` BIGINT(10) NOT NULL DEFAULT 0,
  `data1` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `data2` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `grade` BIGINT(11) NOT NULL DEFAULT 0,
  `submissioncomment` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `format` SMALLINT(4) NOT NULL DEFAULT 0,
  `teacher` BIGINT(10) NOT NULL DEFAULT 0,
  `timemarked` BIGINT(10) NOT NULL DEFAULT 0,
  `mailed` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assisubm_use3_ix` (`userid` ASC),
  INDEX `assisubm_mai2_ix` (`mailed` ASC),
  INDEX `assisubm_tim2_ix` (`timemarked` ASC),
  INDEX `assisubm_ass6_ix` (`assignment` ASC),
  CONSTRAINT `assisubm_ass4_fk`
    FOREIGN KEY (`assignment`)
    REFERENCES `mydb`.`assignment` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Info about submitted assignments'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assignment_upgrade`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assignment_upgrade` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `oldcmid` BIGINT(10) NOT NULL DEFAULT 0,
  `oldinstance` BIGINT(10) NOT NULL DEFAULT 0,
  `newcmid` BIGINT(10) NOT NULL DEFAULT 0,
  `newinstance` BIGINT(10) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assiupgr_old3_ix` (`oldcmid` ASC),
  INDEX `assiupgr_old4_ix` (`oldinstance` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Info about upgraded assignments'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`book`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`book` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `numbering` SMALLINT(4) NOT NULL DEFAULT 0,
  `navstyle` SMALLINT(4) NOT NULL DEFAULT 1,
  `customtitles` TINYINT(2) NOT NULL DEFAULT 0,
  `revision` BIGINT(10) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines book'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`book_chapters`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`book_chapters` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `bookid` BIGINT(10) NOT NULL DEFAULT 0,
  `pagenum` BIGINT(10) NOT NULL DEFAULT 0,
  `subchapter` BIGINT(10) NOT NULL DEFAULT 0,
  `title` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `content` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `contentformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `hidden` TINYINT(2) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `importsrc` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `book_chapters_erd_book_id` (`bookid` ASC),
  CONSTRAINT `book_chapters_erd_book_id`
    FOREIGN KEY (`bookid`)
    REFERENCES `mydb`.`book` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines book_chapters'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`chat`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`chat` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `keepdays` BIGINT(11) NOT NULL DEFAULT 0,
  `studentlogs` SMALLINT(4) NOT NULL DEFAULT 0,
  `chattime` BIGINT(10) NOT NULL DEFAULT 0,
  `schedule` SMALLINT(4) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `chat_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Each of these is a chat room'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`chat_messages`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`chat_messages` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `chatid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NOT NULL DEFAULT 0,
  `system` TINYINT(1) NOT NULL DEFAULT 0,
  `message` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `timestamp` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `chatmess_use2_ix` (`userid` ASC),
  INDEX `chatmess_gro2_ix` (`groupid` ASC),
  INDEX `chatmess_timcha2_ix` (`timestamp` ASC, `chatid` ASC),
  INDEX `chatmess_cha3_ix` (`chatid` ASC),
  CONSTRAINT `chatmess_cha_fk`
    FOREIGN KEY (`chatid`)
    REFERENCES `mydb`.`chat` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores all the actual chat messages'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`chat_messages_current`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`chat_messages_current` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `chatid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NOT NULL DEFAULT 0,
  `system` TINYINT(1) NOT NULL DEFAULT 0,
  `message` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `timestamp` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `chatmesscurr_use2_ix` (`userid` ASC),
  INDEX `chatmesscurr_gro2_ix` (`groupid` ASC),
  INDEX `chatmesscurr_timcha2_ix` (`timestamp` ASC, `chatid` ASC),
  INDEX `chatmesscurr_cha3_ix` (`chatid` ASC),
  CONSTRAINT `chatmesscurr_cha_fk`
    FOREIGN KEY (`chatid`)
    REFERENCES `mydb`.`chat` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores current session'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`chat_users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`chat_users` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `chatid` BIGINT(11) NOT NULL DEFAULT 0,
  `userid` BIGINT(11) NOT NULL DEFAULT 0,
  `groupid` BIGINT(11) NOT NULL DEFAULT 0,
  `version` VARCHAR(16) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `ip` VARCHAR(45) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `firstping` BIGINT(10) NOT NULL DEFAULT 0,
  `lastping` BIGINT(10) NOT NULL DEFAULT 0,
  `lastmessageping` BIGINT(10) NOT NULL DEFAULT 0,
  `sid` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `lang` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `chatuser_use2_ix` (`userid` ASC),
  INDEX `chatuser_las2_ix` (`lastping` ASC),
  INDEX `chatuser_gro2_ix` (`groupid` ASC),
  INDEX `chatuser_cha3_ix` (`chatid` ASC),
  CONSTRAINT `chatuser_cha_fk`
    FOREIGN KEY (`chatid`)
    REFERENCES `mydb`.`chat` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Keeps track of which users are in which chat rooms'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`choice`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`choice` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `publish` TINYINT(2) NOT NULL DEFAULT 0,
  `showresults` TINYINT(2) NOT NULL DEFAULT 0,
  `display` SMALLINT(4) NOT NULL DEFAULT 0,
  `allowupdate` TINYINT(2) NOT NULL DEFAULT 0,
  `allowmultiple` TINYINT(2) NOT NULL DEFAULT 0,
  `showunanswered` TINYINT(2) NOT NULL DEFAULT 0,
  `includeinactive` TINYINT(2) NOT NULL DEFAULT 1,
  `limitanswers` TINYINT(2) NOT NULL DEFAULT 0,
  `timeopen` BIGINT(10) NOT NULL DEFAULT 0,
  `timeclose` BIGINT(10) NOT NULL DEFAULT 0,
  `showpreview` TINYINT(2) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `completionsubmit` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `choi_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Available choices are stored here'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`choice_options`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`choice_options` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `choiceid` BIGINT(10) NOT NULL DEFAULT 0,
  `text` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `maxanswers` BIGINT(10) NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `choiopti_cho3_ix` (`choiceid` ASC),
  CONSTRAINT `choiopti_cho_fk`
    FOREIGN KEY (`choiceid`)
    REFERENCES `mydb`.`choice` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'available options to choice'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`choice_answers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`choice_answers` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `choiceid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `optionid` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `choiansw_use2_ix` (`userid` ASC),
  INDEX `choiansw_cho3_ix` (`choiceid` ASC),
  INDEX `choiansw_opt3_ix` (`optionid` ASC),
  CONSTRAINT `choiansw_cho_fk`
    FOREIGN KEY (`choiceid`)
    REFERENCES `mydb`.`choice` (`id`),
  CONSTRAINT `choiansw_opt_fk`
    FOREIGN KEY (`optionid`)
    REFERENCES `mydb`.`choice_options` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'choices performed by users'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`data`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`data` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `comments` SMALLINT(4) NOT NULL DEFAULT 0,
  `timeavailablefrom` BIGINT(10) NOT NULL DEFAULT 0,
  `timeavailableto` BIGINT(10) NOT NULL DEFAULT 0,
  `timeviewfrom` BIGINT(10) NOT NULL DEFAULT 0,
  `timeviewto` BIGINT(10) NOT NULL DEFAULT 0,
  `requiredentries` INT(8) NOT NULL DEFAULT 0,
  `requiredentriestoview` INT(8) NOT NULL DEFAULT 0,
  `maxentries` INT(8) NOT NULL DEFAULT 0,
  `rssarticles` SMALLINT(4) NOT NULL DEFAULT 0,
  `singletemplate` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `listtemplate` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `listtemplateheader` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `listtemplatefooter` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `addtemplate` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `rsstemplate` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `rsstitletemplate` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `csstemplate` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `jstemplate` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `asearchtemplate` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `approval` SMALLINT(4) NOT NULL DEFAULT 0,
  `manageapproved` SMALLINT(4) NOT NULL DEFAULT 1,
  `scale` BIGINT(10) NOT NULL DEFAULT 0,
  `assessed` BIGINT(10) NOT NULL DEFAULT 0,
  `assesstimestart` BIGINT(10) NOT NULL DEFAULT 0,
  `assesstimefinish` BIGINT(10) NOT NULL DEFAULT 0,
  `defaultsort` BIGINT(10) NOT NULL DEFAULT 0,
  `defaultsortdir` SMALLINT(4) NOT NULL DEFAULT 0,
  `editany` SMALLINT(4) NOT NULL DEFAULT 0,
  `notification` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `config` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `completionentries` BIGINT(10) NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `data_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'all database activities'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`data_fields`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`data_fields` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `dataid` BIGINT(10) NOT NULL DEFAULT 0,
  `type` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `required` TINYINT(1) NOT NULL DEFAULT 0,
  `param1` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param2` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param3` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param4` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param5` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param6` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param7` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param8` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param9` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `param10` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `datafiel_typdat2_ix` (`type` ASC, `dataid` ASC),
  INDEX `datafiel_dat3_ix` (`dataid` ASC),
  CONSTRAINT `datafiel_dat_fk`
    FOREIGN KEY (`dataid`)
    REFERENCES `mydb`.`data` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'every field available'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`data_records`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`data_records` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NOT NULL DEFAULT 0,
  `dataid` BIGINT(10) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `approved` SMALLINT(4) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `datareco_dat3_ix` (`dataid` ASC),
  CONSTRAINT `datareco_dat_fk`
    FOREIGN KEY (`dataid`)
    REFERENCES `mydb`.`data` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'every record introduced'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`data_content`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`data_content` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `fieldid` BIGINT(10) NOT NULL DEFAULT 0,
  `recordid` BIGINT(10) NOT NULL DEFAULT 0,
  `content` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `content1` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `content2` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `content3` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `content4` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `datacont_rec3_ix` (`recordid` ASC),
  INDEX `datacont_fie3_ix` (`fieldid` ASC),
  CONSTRAINT `datacont_rec_fk`
    FOREIGN KEY (`recordid`)
    REFERENCES `mydb`.`data_records` (`id`),
  CONSTRAINT `datacont_fie_fk`
    FOREIGN KEY (`fieldid`)
    REFERENCES `mydb`.`data_fields` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'the content introduced in each record/fields'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`feedback`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`feedback` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `anonymous` TINYINT(1) NOT NULL DEFAULT 1,
  `email_notification` TINYINT(1) NOT NULL DEFAULT 1,
  `multiple_submit` TINYINT(1) NOT NULL DEFAULT 1,
  `autonumbering` TINYINT(1) NOT NULL DEFAULT 1,
  `site_after_submit` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `page_after_submit` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `page_after_submitformat` TINYINT(2) NOT NULL DEFAULT 0,
  `publish_stats` TINYINT(1) NOT NULL DEFAULT 0,
  `timeopen` BIGINT(10) NOT NULL DEFAULT 0,
  `timeclose` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `completionsubmit` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `feed_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'all feedbacks'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`feedback_template`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`feedback_template` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `ispublic` TINYINT(1) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `feedtemp_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'templates of feedbackstructures'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`feedback_item`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`feedback_item` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `feedback` BIGINT(10) NOT NULL DEFAULT 0,
  `template` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `label` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `presentation` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `typ` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `hasvalue` TINYINT(1) NOT NULL DEFAULT 0,
  `position` SMALLINT(3) NOT NULL DEFAULT 0,
  `required` TINYINT(1) NOT NULL DEFAULT 0,
  `dependitem` BIGINT(10) NOT NULL DEFAULT 0,
  `dependvalue` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `options` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `feeditem_fee3_ix` (`feedback` ASC),
  INDEX `feeditem_tem3_ix` (`template` ASC),
  CONSTRAINT `feeditem_fee_fk`
    FOREIGN KEY (`feedback`)
    REFERENCES `mydb`.`feedback` (`id`),
  CONSTRAINT `feeditem_tem_fk`
    FOREIGN KEY (`template`)
    REFERENCES `mydb`.`feedback_template` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'feedback_items'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`feedback_completed`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`feedback_completed` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `feedback` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `random_response` BIGINT(10) NOT NULL DEFAULT 0,
  `anonymous_response` TINYINT(1) NOT NULL DEFAULT 0,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `feedcomp_use2_ix` (`userid` ASC),
  INDEX `feedcomp_fee3_ix` (`feedback` ASC),
  CONSTRAINT `feedcomp_fee_fk`
    FOREIGN KEY (`feedback`)
    REFERENCES `mydb`.`feedback` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'filled out feedback'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`feedback_completedtmp`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`feedback_completedtmp` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `feedback` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `guestid` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timemodified` BIGINT(10) ZEROFILL UNSIGNED NOT NULL DEFAULT 0,
  `random_response` BIGINT(10) NOT NULL DEFAULT 0,
  `anonymous_response` TINYINT(1) NOT NULL DEFAULT 0,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `feedcomp_use3_ix` (`userid` ASC),
  INDEX `feedcomp_fee6_ix` (`feedback` ASC),
  CONSTRAINT `feedcomp_fee4_fk`
    FOREIGN KEY (`feedback`)
    REFERENCES `mydb`.`feedback` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'filled out feedback'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`feedback_value`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`feedback_value` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course_id` BIGINT(10) NOT NULL DEFAULT 0,
  `item` BIGINT(10) NOT NULL DEFAULT 0,
  `completed` BIGINT(10) NOT NULL DEFAULT 0,
  `tmp_completed` BIGINT(10) NOT NULL DEFAULT 0,
  `value` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `feedvalu_cou2_ix` (`course_id` ASC),
  UNIQUE INDEX `feedvalu_comitecou2_uix` (`completed` ASC, `item` ASC, `course_id` ASC),
  INDEX `feedvalu_ite3_ix` (`item` ASC),
  CONSTRAINT `feedvalu_ite_fk`
    FOREIGN KEY (`item`)
    REFERENCES `mydb`.`feedback_item` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'values of the completeds'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`feedback_valuetmp`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`feedback_valuetmp` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course_id` BIGINT(10) NOT NULL DEFAULT 0,
  `item` BIGINT(10) NOT NULL DEFAULT 0,
  `completed` BIGINT(10) NOT NULL DEFAULT 0,
  `tmp_completed` BIGINT(10) NOT NULL DEFAULT 0,
  `value` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `feedvalu_cou3_ix` (`course_id` ASC),
  UNIQUE INDEX `feedvalu_comitecou3_uix` (`completed` ASC, `item` ASC, `course_id` ASC),
  INDEX `feedvalu_ite6_ix` (`item` ASC),
  CONSTRAINT `feedvalu_ite4_fk`
    FOREIGN KEY (`item`)
    REFERENCES `mydb`.`feedback_item` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'values of the completedstmp'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`feedback_sitecourse_map`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`feedback_sitecourse_map` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `feedbackid` BIGINT(10) NOT NULL DEFAULT 0,
  `courseid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `feedsitemap_cou2_ix` (`courseid` ASC),
  INDEX `feedsitemap_fee3_ix` (`feedbackid` ASC),
  CONSTRAINT `feedsitemap_fee_fk`
    FOREIGN KEY (`feedbackid`)
    REFERENCES `mydb`.`feedback` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'feedback sitecourse map'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`folder`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`folder` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `revision` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `display` SMALLINT(4) NOT NULL DEFAULT 0,
  `showexpanded` TINYINT(1) NOT NULL DEFAULT 1,
  `showdownloadfolder` TINYINT(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fold_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'each record is one folder resource'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`forum`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`forum` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `type` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT 'general',
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `assessed` BIGINT(10) NOT NULL DEFAULT 0,
  `assesstimestart` BIGINT(10) NOT NULL DEFAULT 0,
  `assesstimefinish` BIGINT(10) NOT NULL DEFAULT 0,
  `scale` BIGINT(10) NOT NULL DEFAULT 0,
  `maxbytes` BIGINT(10) NOT NULL DEFAULT 0,
  `maxattachments` BIGINT(10) NOT NULL DEFAULT 1,
  `forcesubscribe` TINYINT(1) NOT NULL DEFAULT 0,
  `trackingtype` TINYINT(2) NOT NULL DEFAULT 1,
  `rsstype` TINYINT(2) NOT NULL DEFAULT 0,
  `rssarticles` TINYINT(2) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `warnafter` BIGINT(10) NOT NULL DEFAULT 0,
  `blockafter` BIGINT(10) NOT NULL DEFAULT 0,
  `blockperiod` BIGINT(10) NOT NULL DEFAULT 0,
  `completiondiscussions` INT(9) NOT NULL DEFAULT 0,
  `completionreplies` INT(9) NOT NULL DEFAULT 0,
  `completionposts` INT(9) NOT NULL DEFAULT 0,
  `displaywordcount` TINYINT(1) NOT NULL DEFAULT 0,
  `lockdiscussionafter` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `foru_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Forums contain and structure discussion'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`forum_discussions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`forum_discussions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `forum` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `firstpost` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NOT NULL DEFAULT -1,
  `assessed` TINYINT(1) NOT NULL DEFAULT 1,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `usermodified` BIGINT(10) NOT NULL DEFAULT 0,
  `timestart` BIGINT(10) NOT NULL DEFAULT 0,
  `timeend` BIGINT(10) NOT NULL DEFAULT 0,
  `pinned` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `forudisc_use2_ix` (`userid` ASC),
  INDEX `forudisc_cou2_ix` (`course` ASC),
  INDEX `forudisc_for3_ix` (`forum` ASC),
  CONSTRAINT `forudisc_for_fk`
    FOREIGN KEY (`forum`)
    REFERENCES `mydb`.`forum` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Forums are composed of discussions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`forum_posts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`forum_posts` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `discussion` BIGINT(10) NOT NULL DEFAULT 0,
  `parent` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `created` BIGINT(10) NOT NULL DEFAULT 0,
  `modified` BIGINT(10) NOT NULL DEFAULT 0,
  `mailed` TINYINT(2) NOT NULL DEFAULT 0,
  `subject` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `message` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `messageformat` TINYINT(2) NOT NULL DEFAULT 0,
  `messagetrust` TINYINT(2) NOT NULL DEFAULT 0,
  `attachment` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `totalscore` SMALLINT(4) NOT NULL DEFAULT 0,
  `mailnow` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `forupost_use2_ix` (`userid` ASC),
  INDEX `forupost_cre2_ix` (`created` ASC),
  INDEX `forupost_mai2_ix` (`mailed` ASC),
  INDEX `forupost_dis3_ix` (`discussion` ASC),
  INDEX `forupost_par3_ix` (`parent` ASC),
  CONSTRAINT `forupost_dis_fk`
    FOREIGN KEY (`discussion`)
    REFERENCES `mydb`.`forum_discussions` (`id`),
  CONSTRAINT `forupost_par_fk`
    FOREIGN KEY (`parent`)
    REFERENCES `mydb`.`forum_posts` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'All posts are stored in this table'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`forum_queue`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`forum_queue` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `discussionid` BIGINT(10) NOT NULL DEFAULT 0,
  `postid` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `foruqueu_use2_ix` (`userid` ASC),
  INDEX `foruqueu_dis3_ix` (`discussionid` ASC),
  INDEX `foruqueu_pos3_ix` (`postid` ASC),
  CONSTRAINT `foruqueu_dis_fk`
    FOREIGN KEY (`discussionid`)
    REFERENCES `mydb`.`forum_discussions` (`id`),
  CONSTRAINT `foruqueu_pos_fk`
    FOREIGN KEY (`postid`)
    REFERENCES `mydb`.`forum_posts` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'For keeping track of posts that will be mailed in digest for'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`forum_subscriptions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`forum_subscriptions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `forum` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `forusubs_use2_ix` (`userid` ASC),
  INDEX `forusubs_for3_ix` (`forum` ASC),
  CONSTRAINT `forusubs_for_fk`
    FOREIGN KEY (`forum`)
    REFERENCES `mydb`.`forum` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Keeps track of who is subscribed to what forum'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`forum_digests`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`forum_digests` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL,
  `forum` BIGINT(10) NOT NULL,
  `maildigest` TINYINT(1) NOT NULL DEFAULT -1,
  PRIMARY KEY (`id`),
  INDEX `forudige_use3_ix` (`userid` ASC),
  INDEX `forudige_for3_ix` (`forum` ASC),
  UNIQUE INDEX `forudige_forusemai2_uix` (`forum` ASC, `userid` ASC, `maildigest` ASC),
  CONSTRAINT `forudige_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `forudige_for_fk`
    FOREIGN KEY (`forum`)
    REFERENCES `mydb`.`forum` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Keeps track of user mail delivery preferences for each forum'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`forum_read`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`forum_read` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `forumid` BIGINT(10) NOT NULL DEFAULT 0,
  `discussionid` BIGINT(10) NOT NULL DEFAULT 0,
  `postid` BIGINT(10) NOT NULL DEFAULT 0,
  `firstread` BIGINT(10) NOT NULL DEFAULT 0,
  `lastread` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `foruread_usefor2_ix` (`userid` ASC, `forumid` ASC),
  INDEX `foruread_usedis2_ix` (`userid` ASC, `discussionid` ASC),
  INDEX `foruread_posuse2_ix` (`postid` ASC, `userid` ASC),
  INDEX `forum_read_erd_forum_id` (`forumid` ASC),
  INDEX `forum_read_erd_discussions_id` (`discussionid` ASC),
  CONSTRAINT `forum_read_erd_forum_id`
    FOREIGN KEY (`forumid`)
    REFERENCES `mydb`.`forum` (`id`),
  CONSTRAINT `forum_read_erd_forum_id`
    FOREIGN KEY (`forumid`)
    REFERENCES `mydb`.`forum` (`id`),
  CONSTRAINT `forum_read_erd_discussions_id`
    FOREIGN KEY (`discussionid`)
    REFERENCES `mydb`.`forum_discussions` (`id`),
  CONSTRAINT `forum_read_erd_post_id`
    FOREIGN KEY (`postid`)
    REFERENCES `mydb`.`forum_posts` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Tracks each users read posts'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`forum_track_prefs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`forum_track_prefs` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `forumid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `forutracpref_usefor2_ix` (`userid` ASC, `forumid` ASC),
  CONSTRAINT `forum_track_prefs_erd_forum_id`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`forum` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Tracks each users untracked forums'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`forum_discussion_subs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`forum_discussion_subs` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `forum` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `discussion` BIGINT(10) NOT NULL,
  `preference` BIGINT(10) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `forudiscsubs_for3_ix` (`forum` ASC),
  INDEX `forudiscsubs_use3_ix` (`userid` ASC),
  INDEX `forudiscsubs_dis3_ix` (`discussion` ASC),
  UNIQUE INDEX `forudiscsubs_usedis2_uix` (`userid` ASC, `discussion` ASC),
  CONSTRAINT `forudiscsubs_for_fk`
    FOREIGN KEY (`forum`)
    REFERENCES `mydb`.`forum` (`id`),
  CONSTRAINT `forudiscsubs_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `forudiscsubs_dis_fk`
    FOREIGN KEY (`discussion`)
    REFERENCES `mydb`.`forum_discussions` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Users may choose to subscribe and unsubscribe from specific '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`glossary`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`glossary` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `allowduplicatedentries` TINYINT(2) NOT NULL DEFAULT 0,
  `displayformat` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT 'dictionary',
  `mainglossary` TINYINT(2) NOT NULL DEFAULT 0,
  `showspecial` TINYINT(2) NOT NULL DEFAULT 1,
  `showalphabet` TINYINT(2) NOT NULL DEFAULT 1,
  `showall` TINYINT(2) NOT NULL DEFAULT 1,
  `allowcomments` TINYINT(2) NOT NULL DEFAULT 0,
  `allowprintview` TINYINT(2) NOT NULL DEFAULT 1,
  `usedynalink` TINYINT(2) NOT NULL DEFAULT 1,
  `defaultapproval` TINYINT(2) NOT NULL DEFAULT 1,
  `approvaldisplayformat` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT 'default',
  `globalglossary` TINYINT(2) NOT NULL DEFAULT 0,
  `entbypage` SMALLINT(3) NOT NULL DEFAULT 10,
  `editalways` TINYINT(2) NOT NULL DEFAULT 0,
  `rsstype` TINYINT(2) NOT NULL DEFAULT 0,
  `rssarticles` TINYINT(2) NOT NULL DEFAULT 0,
  `assessed` BIGINT(10) NOT NULL DEFAULT 0,
  `assesstimestart` BIGINT(10) NOT NULL DEFAULT 0,
  `assesstimefinish` BIGINT(10) NOT NULL DEFAULT 0,
  `scale` BIGINT(10) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `completionentries` INT(9) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `glos_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'all glossaries'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`glossary_entries`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`glossary_entries` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `glossaryid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `concept` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `definition` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `definitionformat` TINYINT(2) NOT NULL DEFAULT 0,
  `definitiontrust` TINYINT(2) NOT NULL DEFAULT 0,
  `attachment` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `teacherentry` TINYINT(2) NOT NULL DEFAULT 0,
  `sourceglossaryid` BIGINT(10) NOT NULL DEFAULT 0,
  `usedynalink` TINYINT(2) NOT NULL DEFAULT 1,
  `casesensitive` TINYINT(2) NOT NULL DEFAULT 0,
  `fullmatch` TINYINT(2) NOT NULL DEFAULT 1,
  `approved` TINYINT(2) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `glosentr_use2_ix` (`userid` ASC),
  INDEX `glosentr_con2_ix` (`concept` ASC),
  INDEX `glosentr_glo3_ix` (`glossaryid` ASC),
  CONSTRAINT `glosentr_glo_fk`
    FOREIGN KEY (`glossaryid`)
    REFERENCES `mydb`.`glossary` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'all glossary entries'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`glossary_alias`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`glossary_alias` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `entryid` BIGINT(10) NOT NULL DEFAULT 0,
  `alias` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `glosalia_ent3_ix` (`entryid` ASC),
  CONSTRAINT `glosalia_ent_fk`
    FOREIGN KEY (`entryid`)
    REFERENCES `mydb`.`glossary_entries` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'entries alias'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`glossary_categories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`glossary_categories` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `glossaryid` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `usedynalink` TINYINT(2) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `gloscate_glo3_ix` (`glossaryid` ASC),
  CONSTRAINT `gloscate_glo_fk`
    FOREIGN KEY (`glossaryid`)
    REFERENCES `mydb`.`glossary` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'all categories for glossary entries'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`glossary_entries_categories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`glossary_entries_categories` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `categoryid` BIGINT(10) NOT NULL DEFAULT 0,
  `entryid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `glosentrcate_cat3_ix` (`categoryid` ASC),
  INDEX `glosentrcate_ent3_ix` (`entryid` ASC),
  CONSTRAINT `glosentrcate_cat_fk`
    FOREIGN KEY (`categoryid`)
    REFERENCES `mydb`.`glossary_categories` (`id`),
  CONSTRAINT `glosentrcate_ent_fk`
    FOREIGN KEY (`entryid`)
    REFERENCES `mydb`.`glossary_entries` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'categories of each glossary entry'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`glossary_formats`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`glossary_formats` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `popupformatname` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `visible` TINYINT(2) NOT NULL DEFAULT 1,
  `showgroup` TINYINT(2) NOT NULL DEFAULT 1,
  `showtabs` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `defaultmode` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `defaulthook` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `sortkey` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `sortorder` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Setting of the display formats'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`imscp`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`imscp` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `revision` BIGINT(10) NOT NULL DEFAULT 0,
  `keepold` BIGINT(10) NOT NULL DEFAULT -1,
  `structure` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `imsc_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'each record is one imscp resource'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`label`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`label` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `labe_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines labels'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lesson`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lesson` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `practice` SMALLINT(3) NOT NULL DEFAULT 0,
  `modattempts` SMALLINT(3) NOT NULL DEFAULT 0,
  `usepassword` SMALLINT(3) NOT NULL DEFAULT 0,
  `password` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `dependency` BIGINT(10) NOT NULL DEFAULT 0,
  `conditions` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `grade` BIGINT(10) NOT NULL DEFAULT 0,
  `custom` SMALLINT(3) NOT NULL DEFAULT 0,
  `ongoing` SMALLINT(3) NOT NULL DEFAULT 0,
  `usemaxgrade` SMALLINT(3) NOT NULL DEFAULT 0,
  `maxanswers` SMALLINT(3) NOT NULL DEFAULT 4,
  `maxattempts` SMALLINT(3) NOT NULL DEFAULT 5,
  `review` SMALLINT(3) NOT NULL DEFAULT 0,
  `nextpagedefault` SMALLINT(3) NOT NULL DEFAULT 0,
  `feedback` SMALLINT(3) NOT NULL DEFAULT 1,
  `minquestions` SMALLINT(3) NOT NULL DEFAULT 0,
  `maxpages` SMALLINT(3) NOT NULL DEFAULT 0,
  `timelimit` BIGINT(10) NOT NULL DEFAULT 0,
  `retake` SMALLINT(3) NOT NULL DEFAULT 1,
  `activitylink` BIGINT(10) NOT NULL DEFAULT 0,
  `mediafile` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `mediaheight` BIGINT(10) NOT NULL DEFAULT 100,
  `mediawidth` BIGINT(10) NOT NULL DEFAULT 650,
  `mediaclose` SMALLINT(3) NOT NULL DEFAULT 0,
  `slideshow` SMALLINT(3) NOT NULL DEFAULT 0,
  `width` BIGINT(10) NOT NULL DEFAULT 640,
  `height` BIGINT(10) NOT NULL DEFAULT 480,
  `bgcolor` VARCHAR(7) CHARACTER SET 'utf8' NOT NULL DEFAULT '#FFFFFF',
  `displayleft` SMALLINT(3) NOT NULL DEFAULT 0,
  `displayleftif` SMALLINT(3) NOT NULL DEFAULT 0,
  `progressbar` SMALLINT(3) NOT NULL DEFAULT 0,
  `available` BIGINT(10) NOT NULL DEFAULT 0,
  `deadline` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `completionendreached` TINYINT(1) NULL DEFAULT 0,
  `completiontimespent` BIGINT(11) NULL DEFAULT 0,
  `allowofflineattempts` TINYINT(1) NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `less_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines lesson'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lesson_pages`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lesson_pages` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `lessonid` BIGINT(10) NOT NULL DEFAULT 0,
  `prevpageid` BIGINT(10) NOT NULL DEFAULT 0,
  `nextpageid` BIGINT(10) NOT NULL DEFAULT 0,
  `qtype` SMALLINT(3) NOT NULL DEFAULT 0,
  `qoption` SMALLINT(3) NOT NULL DEFAULT 0,
  `layout` SMALLINT(3) NOT NULL DEFAULT 1,
  `display` SMALLINT(3) NOT NULL DEFAULT 1,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `title` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `contents` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `contentsformat` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `lesspage_les3_ix` (`lessonid` ASC),
  CONSTRAINT `lesspage_les_fk`
    FOREIGN KEY (`lessonid`)
    REFERENCES `mydb`.`lesson` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines lesson_pages'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lesson_answers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lesson_answers` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `lessonid` BIGINT(10) NOT NULL DEFAULT 0,
  `pageid` BIGINT(10) NOT NULL DEFAULT 0,
  `jumpto` BIGINT(11) NOT NULL DEFAULT 0,
  `grade` SMALLINT(4) NOT NULL DEFAULT 0,
  `score` BIGINT(10) NOT NULL DEFAULT 0,
  `flags` SMALLINT(3) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `answer` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `answerformat` TINYINT(2) NOT NULL DEFAULT 0,
  `response` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `responseformat` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `lessansw_les3_ix` (`lessonid` ASC),
  INDEX `lessansw_pag3_ix` (`pageid` ASC),
  CONSTRAINT `lessansw_les_fk`
    FOREIGN KEY (`lessonid`)
    REFERENCES `mydb`.`lesson` (`id`),
  CONSTRAINT `lessansw_pag_fk`
    FOREIGN KEY (`pageid`)
    REFERENCES `mydb`.`lesson_pages` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines lesson_answers'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lesson_attempts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lesson_attempts` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `lessonid` BIGINT(10) NOT NULL DEFAULT 0,
  `pageid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `answerid` BIGINT(10) NOT NULL DEFAULT 0,
  `retry` SMALLINT(3) NOT NULL DEFAULT 0,
  `correct` BIGINT(10) NOT NULL DEFAULT 0,
  `useranswer` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timeseen` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `lessatte_use2_ix` (`userid` ASC),
  INDEX `lessatte_les3_ix` (`lessonid` ASC),
  INDEX `lessatte_pag3_ix` (`pageid` ASC),
  INDEX `lessatte_ans3_ix` (`answerid` ASC),
  CONSTRAINT `lessatte_les_fk`
    FOREIGN KEY (`lessonid`)
    REFERENCES `mydb`.`lesson` (`id`),
  CONSTRAINT `lessatte_pag_fk`
    FOREIGN KEY (`pageid`)
    REFERENCES `mydb`.`lesson_pages` (`id`),
  CONSTRAINT `lessatte_ans_fk`
    FOREIGN KEY (`answerid`)
    REFERENCES `mydb`.`lesson_answers` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines lesson_attempts'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lesson_grades`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lesson_grades` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `lessonid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `grade` DOUBLE NOT NULL DEFAULT 0,
  `late` SMALLINT(3) NOT NULL DEFAULT 0,
  `completed` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `lessgrad_use2_ix` (`userid` ASC),
  INDEX `lessgrad_les3_ix` (`lessonid` ASC),
  CONSTRAINT `lessgrad_les_fk`
    FOREIGN KEY (`lessonid`)
    REFERENCES `mydb`.`lesson` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines lesson_grades'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lesson_timer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lesson_timer` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `lessonid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `starttime` BIGINT(10) NOT NULL DEFAULT 0,
  `lessontime` BIGINT(10) NOT NULL DEFAULT 0,
  `completed` TINYINT(1) NULL DEFAULT 0,
  `timemodifiedoffline` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `lesstime_use2_ix` (`userid` ASC),
  INDEX `lesstime_les3_ix` (`lessonid` ASC),
  CONSTRAINT `lesstime_les_fk`
    FOREIGN KEY (`lessonid`)
    REFERENCES `mydb`.`lesson` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'lesson timer for each lesson'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lesson_branch`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lesson_branch` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `lessonid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `pageid` BIGINT(10) NOT NULL DEFAULT 0,
  `retry` BIGINT(10) NOT NULL DEFAULT 0,
  `flag` SMALLINT(3) NOT NULL DEFAULT 0,
  `timeseen` BIGINT(10) NOT NULL DEFAULT 0,
  `nextpageid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `lessbran_use2_ix` (`userid` ASC),
  INDEX `lessbran_les3_ix` (`lessonid` ASC),
  INDEX `lessbran_pag3_ix` (`pageid` ASC),
  CONSTRAINT `lessbran_les_fk`
    FOREIGN KEY (`lessonid`)
    REFERENCES `mydb`.`lesson` (`id`),
  CONSTRAINT `lessbran_pag_fk`
    FOREIGN KEY (`pageid`)
    REFERENCES `mydb`.`lesson_pages` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'branches for each lesson/user'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lesson_overrides`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lesson_overrides` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `lessonid` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NULL DEFAULT NULL,
  `userid` BIGINT(10) NULL DEFAULT NULL,
  `available` BIGINT(10) NULL DEFAULT NULL,
  `deadline` BIGINT(10) NULL DEFAULT NULL,
  `timelimit` BIGINT(10) NULL DEFAULT NULL,
  `review` SMALLINT(3) NULL DEFAULT NULL,
  `maxattempts` SMALLINT(3) NULL DEFAULT NULL,
  `retake` SMALLINT(3) NULL DEFAULT NULL,
  `password` VARCHAR(32) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `lessover_les3_ix` (`lessonid` ASC),
  INDEX `lessover_gro3_ix` (`groupid` ASC),
  INDEX `lessover_use3_ix` (`userid` ASC),
  CONSTRAINT `lessover_les_fk`
    FOREIGN KEY (`lessonid`)
    REFERENCES `mydb`.`lesson` (`id`),
  CONSTRAINT `lessover_gro_fk`
    FOREIGN KEY (`groupid`)
    REFERENCES `mydb`.`groups` (`id`),
  CONSTRAINT `lessover_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The overrides to lesson settings.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lti_types`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lti_types` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT 'basiclti Activity',
  `baseurl` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `tooldomain` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `state` TINYINT(2) NOT NULL DEFAULT 2,
  `course` BIGINT(10) NOT NULL,
  `coursevisible` TINYINT(1) NOT NULL DEFAULT 0,
  `toolproxyid` BIGINT(10) NULL DEFAULT NULL,
  `enabledcapability` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `parameter` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `icon` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `secureicon` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `createdby` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `ltitype_cou2_ix` (`course` ASC),
  INDEX `ltitype_too2_ix` (`tooldomain` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Basic LTI pre-configured activities'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lti`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lti` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `introformat` SMALLINT(4) NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `typeid` BIGINT(10) NULL DEFAULT NULL,
  `toolurl` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `securetoolurl` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `instructorchoicesendname` TINYINT(1) NULL DEFAULT NULL,
  `instructorchoicesendemailaddr` TINYINT(1) NULL DEFAULT NULL,
  `instructorchoiceallowroster` TINYINT(1) NULL DEFAULT NULL,
  `instructorchoiceallowsetting` TINYINT(1) NULL DEFAULT NULL,
  `instructorcustomparameters` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `instructorchoiceacceptgrades` TINYINT(1) NULL DEFAULT NULL,
  `grade` BIGINT(10) NOT NULL DEFAULT 100,
  `launchcontainer` TINYINT(2) NOT NULL DEFAULT 1,
  `resourcekey` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `password` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `debuglaunch` TINYINT(1) NOT NULL DEFAULT 0,
  `showtitlelaunch` TINYINT(1) NOT NULL DEFAULT 0,
  `showdescriptionlaunch` TINYINT(1) NOT NULL DEFAULT 0,
  `servicesalt` VARCHAR(40) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `icon` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `secureicon` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `lti_cou2_ix` (`course` ASC),
  INDEX `lti_erd_lti_types_id` (`typeid` ASC),
  CONSTRAINT `lti_erd_lti_types_id`
    FOREIGN KEY (`typeid`)
    REFERENCES `mydb`.`lti_types` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table contains Basic LTI activities instances'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lti_tool_proxies`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lti_tool_proxies` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT 'Tool Provider',
  `regurl` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `state` TINYINT(2) NOT NULL DEFAULT 1,
  `guid` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `secret` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `vendorcode` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `capabilityoffered` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `serviceoffered` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `toolproxy` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `createdby` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `ltitoolprox_gui2_uix` (`guid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'LTI tool proxy registrations'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lti_types_config`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lti_types_config` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `typeid` BIGINT(10) NOT NULL,
  `name` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `ltitypeconf_typ2_ix` (`typeid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Basic LTI types configuration'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lti_tool_settings`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lti_tool_settings` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `toolproxyid` BIGINT(10) NOT NULL,
  `course` BIGINT(10) NULL DEFAULT NULL,
  `coursemoduleid` BIGINT(10) NULL DEFAULT NULL,
  `settings` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `ltitoolsett_too3_ix` (`toolproxyid` ASC),
  INDEX `ltitoolsett_cou4_ix` (`course` ASC),
  INDEX `ltitoolsett_cou6_ix` (`coursemoduleid` ASC),
  CONSTRAINT `ltitoolsett_too_fk`
    FOREIGN KEY (`toolproxyid`)
    REFERENCES `mydb`.`lti_tool_proxies` (`id`),
  CONSTRAINT `ltitoolsett_cou_fk`
    FOREIGN KEY (`course`)
    REFERENCES `mydb`.`course` (`id`),
  CONSTRAINT `ltitoolsett_cou2_fk`
    FOREIGN KEY (`coursemoduleid`)
    REFERENCES `mydb`.`lti` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'LTI tool setting values'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`lti_submission`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`lti_submission` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `ltiid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `datesubmitted` BIGINT(10) NOT NULL,
  `dateupdated` BIGINT(10) NOT NULL,
  `gradepercent` DECIMAL(10,5) NOT NULL,
  `originalgrade` DECIMAL(10,5) NOT NULL,
  `launchid` BIGINT(10) NOT NULL,
  `state` TINYINT(2) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `ltisubm_lti2_ix` (`ltiid` ASC),
  CONSTRAINT `lti_submission_erd_lti_id`
    FOREIGN KEY (`ltiid`)
    REFERENCES `mydb`.`lti` (`id`),
  CONSTRAINT `lti_submission_erd_lti_id`
    FOREIGN KEY (`ltiid`)
    REFERENCES `mydb`.`lti` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Keeps track of individual submissions for LTI activities.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`page`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`page` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `content` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `contentformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `legacyfiles` SMALLINT(4) NOT NULL DEFAULT 0,
  `legacyfileslast` BIGINT(10) NULL DEFAULT NULL,
  `display` SMALLINT(4) NOT NULL DEFAULT 0,
  `displayoptions` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `revision` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `page_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Each record is one page and its config data'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`quiz`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`quiz` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `timeopen` BIGINT(10) NOT NULL DEFAULT 0,
  `timeclose` BIGINT(10) NOT NULL DEFAULT 0,
  `timelimit` BIGINT(10) NOT NULL DEFAULT 0,
  `overduehandling` VARCHAR(16) CHARACTER SET 'utf8' NOT NULL DEFAULT 'autoabandon',
  `graceperiod` BIGINT(10) NOT NULL DEFAULT 0,
  `preferredbehaviour` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `canredoquestions` SMALLINT(4) NOT NULL DEFAULT 0,
  `attempts` MEDIUMINT(6) NOT NULL DEFAULT 0,
  `attemptonlast` SMALLINT(4) NOT NULL DEFAULT 0,
  `grademethod` SMALLINT(4) NOT NULL DEFAULT 1,
  `decimalpoints` SMALLINT(4) NOT NULL DEFAULT 2,
  `questiondecimalpoints` SMALLINT(4) NOT NULL DEFAULT -1,
  `reviewattempt` MEDIUMINT(6) NOT NULL DEFAULT 0,
  `reviewcorrectness` MEDIUMINT(6) NOT NULL DEFAULT 0,
  `reviewmarks` MEDIUMINT(6) NOT NULL DEFAULT 0,
  `reviewspecificfeedback` MEDIUMINT(6) NOT NULL DEFAULT 0,
  `reviewgeneralfeedback` MEDIUMINT(6) NOT NULL DEFAULT 0,
  `reviewrightanswer` MEDIUMINT(6) NOT NULL DEFAULT 0,
  `reviewoverallfeedback` MEDIUMINT(6) NOT NULL DEFAULT 0,
  `questionsperpage` BIGINT(10) NOT NULL DEFAULT 0,
  `navmethod` VARCHAR(16) CHARACTER SET 'utf8' NOT NULL DEFAULT 'free',
  `shuffleanswers` SMALLINT(4) NOT NULL DEFAULT 0,
  `sumgrades` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `grade` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `password` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `subnet` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `browsersecurity` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `delay1` BIGINT(10) NOT NULL DEFAULT 0,
  `delay2` BIGINT(10) NOT NULL DEFAULT 0,
  `showuserpicture` SMALLINT(4) NOT NULL DEFAULT 0,
  `showblocks` SMALLINT(4) NOT NULL DEFAULT 0,
  `completionattemptsexhausted` TINYINT(1) NULL DEFAULT 0,
  `completionpass` TINYINT(1) NULL DEFAULT 0,
  `allowofflineattempts` TINYINT(1) NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `quiz_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The settings for each quiz.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`quiz_slots`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`quiz_slots` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `slot` BIGINT(10) NOT NULL,
  `quizid` BIGINT(10) NOT NULL DEFAULT 0,
  `page` BIGINT(10) NOT NULL,
  `requireprevious` SMALLINT(4) NOT NULL DEFAULT 0,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `maxmark` DECIMAL(12,7) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `quizslot_quislo2_uix` (`quizid` ASC, `slot` ASC),
  INDEX `quizslot_qui3_ix` (`quizid` ASC),
  INDEX `quizslot_que3_ix` (`questionid` ASC),
  CONSTRAINT `quizslot_qui_fk`
    FOREIGN KEY (`quizid`)
    REFERENCES `mydb`.`quiz` (`id`),
  CONSTRAINT `quizslot_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the question used in a quiz, with the order, and for '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`quiz_sections`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`quiz_sections` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `quizid` BIGINT(10) NOT NULL,
  `firstslot` BIGINT(10) NOT NULL,
  `heading` VARCHAR(1333) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `shufflequestions` SMALLINT(4) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `quizsect_quifir2_uix` (`quizid` ASC, `firstslot` ASC),
  INDEX `quizsect_qui3_ix` (`quizid` ASC),
  CONSTRAINT `quizsect_qui_fk`
    FOREIGN KEY (`quizid`)
    REFERENCES `mydb`.`quiz` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores sections of a quiz with section name (heading), from '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`quiz_feedback`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`quiz_feedback` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `quizid` BIGINT(10) NOT NULL DEFAULT 0,
  `feedbacktext` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `feedbacktextformat` TINYINT(2) NOT NULL DEFAULT 0,
  `mingrade` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `maxgrade` DECIMAL(10,5) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `quizfeed_qui3_ix` (`quizid` ASC),
  CONSTRAINT `quizfeed_qui_fk`
    FOREIGN KEY (`quizid`)
    REFERENCES `mydb`.`quiz` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Feedback given to students based on which grade band their o'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`quiz_overrides`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`quiz_overrides` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `quiz` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NULL DEFAULT NULL,
  `userid` BIGINT(10) NULL DEFAULT NULL,
  `timeopen` BIGINT(10) NULL DEFAULT NULL,
  `timeclose` BIGINT(10) NULL DEFAULT NULL,
  `timelimit` BIGINT(10) NULL DEFAULT NULL,
  `attempts` MEDIUMINT(6) NULL DEFAULT NULL,
  `password` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `quizover_qui3_ix` (`quiz` ASC),
  INDEX `quizover_gro3_ix` (`groupid` ASC),
  INDEX `quizover_use3_ix` (`userid` ASC),
  CONSTRAINT `quizover_qui_fk`
    FOREIGN KEY (`quiz`)
    REFERENCES `mydb`.`quiz` (`id`),
  CONSTRAINT `quizover_gro_fk`
    FOREIGN KEY (`groupid`)
    REFERENCES `mydb`.`groups` (`id`),
  CONSTRAINT `quizover_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The overrides to quiz settings on a per-user and per-group b'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`quiz_attempts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`quiz_attempts` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `quiz` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `attempt` MEDIUMINT(6) NOT NULL DEFAULT 0,
  `uniqueid` BIGINT(10) NOT NULL DEFAULT 0,
  `layout` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `currentpage` BIGINT(10) NOT NULL DEFAULT 0,
  `preview` SMALLINT(3) NOT NULL DEFAULT 0,
  `state` VARCHAR(16) CHARACTER SET 'utf8' NOT NULL DEFAULT 'inprogress',
  `timestart` BIGINT(10) NOT NULL DEFAULT 0,
  `timefinish` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodifiedoffline` BIGINT(10) NOT NULL DEFAULT 0,
  `timecheckstate` BIGINT(10) NULL DEFAULT 0,
  `sumgrades` DECIMAL(10,5) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `quizatte_quiuseatt2_uix` (`quiz` ASC, `userid` ASC, `attempt` ASC),
  INDEX `quizatte_statim2_ix` (`state` ASC, `timecheckstate` ASC),
  INDEX `quizatte_qui3_ix` (`quiz` ASC),
  INDEX `quizatte_use3_ix` (`userid` ASC),
  UNIQUE INDEX `quizatte_uni2_uix` (`uniqueid` ASC),
  CONSTRAINT `quizatte_qui_fk`
    FOREIGN KEY (`quiz`)
    REFERENCES `mydb`.`quiz` (`id`),
  CONSTRAINT `quizatte_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `quizatte_uni_fk`
    FOREIGN KEY (`uniqueid`)
    REFERENCES `mydb`.`question_usages` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores users attempts at quizzes.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`quiz_grades`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`quiz_grades` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `quiz` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `grade` DECIMAL(10,5) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `quizgrad_use2_ix` (`userid` ASC),
  INDEX `quizgrad_qui3_ix` (`quiz` ASC),
  CONSTRAINT `quizgrad_qui_fk`
    FOREIGN KEY (`quiz`)
    REFERENCES `mydb`.`quiz` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the overall grade for each user on the quiz, based on'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`quiz_reports`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`quiz_reports` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `displayorder` BIGINT(10) NOT NULL,
  `capability` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `quizrepo_nam2_uix` (`name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Lists all the installed quiz reports and their display order'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`resource`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`resource` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `tobemigrated` SMALLINT(4) NOT NULL DEFAULT 0,
  `legacyfiles` SMALLINT(4) NOT NULL DEFAULT 0,
  `legacyfileslast` BIGINT(10) NULL DEFAULT NULL,
  `display` SMALLINT(4) NOT NULL DEFAULT 0,
  `displayoptions` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `filterfiles` SMALLINT(4) NOT NULL DEFAULT 0,
  `revision` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `reso_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Each record is one resource and its config data'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`resource_old`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`resource_old` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `type` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `reference` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `alltext` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `popup` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `options` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `oldid` BIGINT(10) NOT NULL,
  `cmid` BIGINT(10) NULL DEFAULT NULL,
  `newmodule` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `newid` BIGINT(10) NULL DEFAULT NULL,
  `migrated` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `resoold_old2_uix` (`oldid` ASC),
  INDEX `resoold_cmi2_ix` (`cmid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'backup of all old resource instances from 1.9'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scorm`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scorm` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `scormtype` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT 'local',
  `reference` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `version` VARCHAR(9) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `maxgrade` DOUBLE NOT NULL DEFAULT 0,
  `grademethod` TINYINT(2) NOT NULL DEFAULT 0,
  `whatgrade` BIGINT(10) NOT NULL DEFAULT 0,
  `maxattempt` BIGINT(10) NOT NULL DEFAULT 1,
  `forcecompleted` TINYINT(1) NOT NULL DEFAULT 0,
  `forcenewattempt` TINYINT(1) NOT NULL DEFAULT 0,
  `lastattemptlock` TINYINT(1) NOT NULL DEFAULT 0,
  `masteryoverride` TINYINT(1) NOT NULL DEFAULT 1,
  `displayattemptstatus` TINYINT(1) NOT NULL DEFAULT 1,
  `displaycoursestructure` TINYINT(1) NOT NULL DEFAULT 0,
  `updatefreq` TINYINT(1) NOT NULL DEFAULT 0,
  `sha1hash` VARCHAR(40) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `md5hash` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `revision` BIGINT(10) NOT NULL DEFAULT 0,
  `launch` BIGINT(10) NOT NULL DEFAULT 0,
  `skipview` TINYINT(1) NOT NULL DEFAULT 1,
  `hidebrowse` TINYINT(1) NOT NULL DEFAULT 0,
  `hidetoc` TINYINT(1) NOT NULL DEFAULT 0,
  `nav` TINYINT(1) NOT NULL DEFAULT 1,
  `navpositionleft` BIGINT(10) NULL DEFAULT -100,
  `navpositiontop` BIGINT(10) NULL DEFAULT -100,
  `auto` TINYINT(1) NOT NULL DEFAULT 0,
  `popup` TINYINT(1) NOT NULL DEFAULT 0,
  `options` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `width` BIGINT(10) NOT NULL DEFAULT 100,
  `height` BIGINT(10) NOT NULL DEFAULT 600,
  `timeopen` BIGINT(10) NOT NULL DEFAULT 0,
  `timeclose` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `completionstatusrequired` TINYINT(1) NULL DEFAULT NULL,
  `completionscorerequired` TINYINT(2) NULL DEFAULT NULL,
  `completionstatusallscos` TINYINT(1) NULL DEFAULT NULL,
  `displayactivityname` SMALLINT(4) NOT NULL DEFAULT 1,
  `autocommit` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `scor_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'each table is one SCORM module and its configuration'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scorm_scoes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scorm_scoes` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `scorm` BIGINT(10) NOT NULL DEFAULT 0,
  `manifest` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `organization` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `parent` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `identifier` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `launch` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `scormtype` VARCHAR(5) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `title` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `scorscoe_sco3_ix` (`scorm` ASC),
  CONSTRAINT `scorscoe_sco_fk`
    FOREIGN KEY (`scorm`)
    REFERENCES `mydb`.`scorm` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'each SCO part of the SCORM module'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scorm_scoes_data`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scorm_scoes_data` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `scoid` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `scorscoedata_sco3_ix` (`scoid` ASC),
  CONSTRAINT `scorscoedata_sco_fk`
    FOREIGN KEY (`scoid`)
    REFERENCES `mydb`.`scorm_scoes` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Contains variable data get from packages'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scorm_scoes_track`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scorm_scoes_track` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `scormid` BIGINT(10) NOT NULL DEFAULT 0,
  `scoid` BIGINT(10) NOT NULL DEFAULT 0,
  `attempt` BIGINT(10) NOT NULL DEFAULT 1,
  `element` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `value` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `scorscoetrac_usescoscoatt2_uix` (`userid` ASC, `scormid` ASC, `scoid` ASC, `attempt` ASC, `element` ASC),
  INDEX `scorscoetrac_use2_ix` (`userid` ASC),
  INDEX `scorscoetrac_ele2_ix` (`element` ASC),
  INDEX `scorscoetrac_sco4_ix` (`scormid` ASC),
  INDEX `scorscoetrac_sco6_ix` (`scoid` ASC),
  CONSTRAINT `scorscoetrac_sco_fk`
    FOREIGN KEY (`scormid`)
    REFERENCES `mydb`.`scorm` (`id`),
  CONSTRAINT `scorscoetrac_sco2_fk`
    FOREIGN KEY (`scoid`)
    REFERENCES `mydb`.`scorm_scoes` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'to track SCOes'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scorm_seq_objective`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scorm_seq_objective` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `scoid` BIGINT(10) NOT NULL DEFAULT 0,
  `primaryobj` TINYINT(1) NOT NULL DEFAULT 0,
  `objectiveid` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `satisfiedbymeasure` TINYINT(1) NOT NULL DEFAULT 1,
  `minnormalizedmeasure` FLOAT(11,4) NOT NULL DEFAULT 0.0000,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `scorseqobje_scoid2_uix` (`scoid` ASC, `id` ASC),
  INDEX `scorseqobje_sco3_ix` (`scoid` ASC),
  CONSTRAINT `scorseqobje_sco_fk`
    FOREIGN KEY (`scoid`)
    REFERENCES `mydb`.`scorm_scoes` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'SCORM2004 objective description'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scorm_seq_mapinfo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scorm_seq_mapinfo` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `scoid` BIGINT(10) NOT NULL DEFAULT 0,
  `objectiveid` BIGINT(10) NOT NULL DEFAULT 0,
  `targetobjectiveid` BIGINT(10) NOT NULL DEFAULT 0,
  `readsatisfiedstatus` TINYINT(1) NOT NULL DEFAULT 1,
  `readnormalizedmeasure` TINYINT(1) NOT NULL DEFAULT 1,
  `writesatisfiedstatus` TINYINT(1) NOT NULL DEFAULT 0,
  `writenormalizedmeasure` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `scorseqmapi_scoidobj2_uix` (`scoid` ASC, `id` ASC, `objectiveid` ASC),
  INDEX `scorseqmapi_sco3_ix` (`scoid` ASC),
  INDEX `scorseqmapi_obj3_ix` (`objectiveid` ASC),
  CONSTRAINT `scorseqmapi_sco_fk`
    FOREIGN KEY (`scoid`)
    REFERENCES `mydb`.`scorm_scoes` (`id`),
  CONSTRAINT `scorseqmapi_obj_fk`
    FOREIGN KEY (`objectiveid`)
    REFERENCES `mydb`.`scorm_seq_objective` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'SCORM2004 objective mapinfo description'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scorm_seq_ruleconds`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scorm_seq_ruleconds` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `scoid` BIGINT(10) NOT NULL DEFAULT 0,
  `conditioncombination` VARCHAR(3) CHARACTER SET 'utf8' NOT NULL DEFAULT 'all',
  `ruletype` TINYINT(2) NOT NULL DEFAULT 0,
  `action` VARCHAR(25) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `scorseqrule_scoid2_uix` (`scoid` ASC, `id` ASC),
  INDEX `scorseqrule_sco3_ix` (`scoid` ASC),
  CONSTRAINT `scorseqrule_sco_fk`
    FOREIGN KEY (`scoid`)
    REFERENCES `mydb`.`scorm_scoes` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'SCORM2004 rule conditions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scorm_seq_rulecond`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scorm_seq_rulecond` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `scoid` BIGINT(10) NOT NULL DEFAULT 0,
  `ruleconditionsid` BIGINT(10) NOT NULL DEFAULT 0,
  `refrencedobjective` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `measurethreshold` FLOAT(11,4) NOT NULL DEFAULT 0.0000,
  `operator` VARCHAR(5) CHARACTER SET 'utf8' NOT NULL DEFAULT 'noOp',
  `cond` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT 'always',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `scorseqrule_idscorul2_uix` (`id` ASC, `scoid` ASC, `ruleconditionsid` ASC),
  INDEX `scorseqrule_sco6_ix` (`scoid` ASC),
  INDEX `scorseqrule_rul3_ix` (`ruleconditionsid` ASC),
  CONSTRAINT `scorseqrule_sco4_fk`
    FOREIGN KEY (`scoid`)
    REFERENCES `mydb`.`scorm_scoes` (`id`),
  CONSTRAINT `scorseqrule_rul_fk`
    FOREIGN KEY (`ruleconditionsid`)
    REFERENCES `mydb`.`scorm_seq_ruleconds` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'SCORM2004 rule condition'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scorm_seq_rolluprule`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scorm_seq_rolluprule` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `scoid` BIGINT(10) NOT NULL DEFAULT 0,
  `childactivityset` VARCHAR(15) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `minimumcount` BIGINT(10) NOT NULL DEFAULT 0,
  `minimumpercent` FLOAT(11,4) NOT NULL DEFAULT 0.0000,
  `conditioncombination` VARCHAR(3) CHARACTER SET 'utf8' NOT NULL DEFAULT 'all',
  `action` VARCHAR(15) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `scorseqroll_scoid2_uix` (`scoid` ASC, `id` ASC),
  INDEX `scorseqroll_sco3_ix` (`scoid` ASC),
  CONSTRAINT `scorseqroll_sco_fk`
    FOREIGN KEY (`scoid`)
    REFERENCES `mydb`.`scorm_scoes` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'SCORM2004 sequencing rule'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scorm_seq_rolluprulecond`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scorm_seq_rolluprulecond` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `scoid` BIGINT(10) NOT NULL DEFAULT 0,
  `rollupruleid` BIGINT(10) NOT NULL DEFAULT 0,
  `operator` VARCHAR(5) CHARACTER SET 'utf8' NOT NULL DEFAULT 'noOp',
  `cond` VARCHAR(25) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `scorseqroll_scorolid2_uix` (`scoid` ASC, `rollupruleid` ASC, `id` ASC),
  INDEX `scorseqroll_sco6_ix` (`scoid` ASC),
  INDEX `scorseqroll_rol3_ix` (`rollupruleid` ASC),
  CONSTRAINT `scorseqroll_sco4_fk`
    FOREIGN KEY (`scoid`)
    REFERENCES `mydb`.`scorm_scoes` (`id`),
  CONSTRAINT `scorseqroll_rol_fk`
    FOREIGN KEY (`rollupruleid`)
    REFERENCES `mydb`.`scorm_seq_rolluprule` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'SCORM2004 sequencing rule'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`scorm_aicc_session`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`scorm_aicc_session` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `scormid` BIGINT(10) NOT NULL DEFAULT 0,
  `hacpsession` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `scoid` BIGINT(10) NULL DEFAULT 0,
  `scormmode` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `scormstatus` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `attempt` BIGINT(10) NULL DEFAULT NULL,
  `lessonstatus` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `sessiontime` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `scoraiccsess_sco3_ix` (`scormid` ASC),
  INDEX `scoraiccsess_use3_ix` (`userid` ASC),
  CONSTRAINT `scoraiccsess_sco_fk`
    FOREIGN KEY (`scormid`)
    REFERENCES `mydb`.`scorm` (`id`),
  CONSTRAINT `scoraiccsess_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Used by AICC HACP to store session information'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`survey`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`survey` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `template` BIGINT(10) NOT NULL DEFAULT 0,
  `days` MEDIUMINT(6) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `questions` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `completionsubmit` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `surv_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Each record is one SURVEY module with its configuration'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`survey_questions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`survey_questions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `text` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `shorttext` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `multi` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `type` SMALLINT(3) NOT NULL DEFAULT 0,
  `options` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'the questions conforming one survey'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`survey_answers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`survey_answers` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `survey` BIGINT(10) NOT NULL DEFAULT 0,
  `question` BIGINT(10) NOT NULL DEFAULT 0,
  `time` BIGINT(10) NOT NULL DEFAULT 0,
  `answer1` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `answer2` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `survansw_use2_ix` (`userid` ASC),
  INDEX `survansw_sur3_ix` (`survey` ASC),
  INDEX `survansw_que3_ix` (`question` ASC),
  CONSTRAINT `survansw_sur_fk`
    FOREIGN KEY (`survey`)
    REFERENCES `mydb`.`survey` (`id`),
  CONSTRAINT `survansw_que_fk`
    FOREIGN KEY (`question`)
    REFERENCES `mydb`.`survey_questions` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'the answers to each questions filled by the users'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`survey_analysis`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`survey_analysis` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `survey` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `notes` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `survanal_use2_ix` (`userid` ASC),
  INDEX `survanal_sur3_ix` (`survey` ASC),
  CONSTRAINT `survanal_sur_fk`
    FOREIGN KEY (`survey`)
    REFERENCES `mydb`.`survey` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'text about each survey submission'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`url`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`url` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `externalurl` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `display` SMALLINT(4) NOT NULL DEFAULT 0,
  `displayoptions` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `parameters` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `url_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'each record is one url resource'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`wiki`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`wiki` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT 'Wiki',
  `intro` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `introformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `firstpagetitle` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT 'First Page',
  `wikimode` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT 'collaborative',
  `defaultformat` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT 'creole',
  `forceformat` TINYINT(1) NOT NULL DEFAULT 1,
  `editbegin` BIGINT(10) NOT NULL DEFAULT 0,
  `editend` BIGINT(10) NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `wiki_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores Wiki activity configuration'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`wiki_subwikis`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`wiki_subwikis` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `wikiid` BIGINT(10) NOT NULL DEFAULT 0,
  `groupid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `wikisubw_wik3_ix` (`wikiid` ASC),
  UNIQUE INDEX `wikisubw_wikgrouse2_uix` (`wikiid` ASC, `groupid` ASC, `userid` ASC),
  CONSTRAINT `wikisubw_wik_fk`
    FOREIGN KEY (`wikiid`)
    REFERENCES `mydb`.`wiki` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores subwiki instances'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`wiki_pages`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`wiki_pages` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `subwikiid` BIGINT(10) NOT NULL DEFAULT 0,
  `title` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT 'title',
  `cachedcontent` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `timerendered` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `pageviews` BIGINT(10) NOT NULL DEFAULT 0,
  `readonly` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `wikipage_subtituse2_uix` (`subwikiid` ASC, `title` ASC, `userid` ASC),
  INDEX `wikipage_sub3_ix` (`subwikiid` ASC),
  CONSTRAINT `wikipage_sub_fk`
    FOREIGN KEY (`subwikiid`)
    REFERENCES `mydb`.`wiki_subwikis` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores wiki pages'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`wiki_versions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`wiki_versions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `pageid` BIGINT(10) NOT NULL DEFAULT 0,
  `content` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `contentformat` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT 'creole',
  `version` MEDIUMINT(5) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `wikivers_pag3_ix` (`pageid` ASC),
  CONSTRAINT `wikivers_pag_fk`
    FOREIGN KEY (`pageid`)
    REFERENCES `mydb`.`wiki_pages` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores wiki page history'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`wiki_synonyms`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`wiki_synonyms` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `subwikiid` BIGINT(10) NOT NULL DEFAULT 0,
  `pageid` BIGINT(10) NOT NULL DEFAULT 0,
  `pagesynonym` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT 'Pagesynonym',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `wikisyno_pagpag2_uix` (`pageid` ASC, `pagesynonym` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores wiki pages synonyms'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`wiki_links`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`wiki_links` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `subwikiid` BIGINT(10) NOT NULL DEFAULT 0,
  `frompageid` BIGINT(10) NOT NULL DEFAULT 0,
  `topageid` BIGINT(10) NOT NULL DEFAULT 0,
  `tomissingpage` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `wikilink_fro3_ix` (`frompageid` ASC),
  INDEX `wikilink_sub3_ix` (`subwikiid` ASC),
  CONSTRAINT `wikilink_fro_fk`
    FOREIGN KEY (`frompageid`)
    REFERENCES `mydb`.`wiki_pages` (`id`),
  CONSTRAINT `wikilink_sub_fk`
    FOREIGN KEY (`subwikiid`)
    REFERENCES `mydb`.`wiki_subwikis` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Page wiki links'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`wiki_locks`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`wiki_locks` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `pageid` BIGINT(10) NOT NULL DEFAULT 0,
  `sectionname` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `lockedat` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Manages page locks'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `intro` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `introformat` SMALLINT(3) NOT NULL DEFAULT 0,
  `instructauthors` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `instructauthorsformat` SMALLINT(3) NOT NULL DEFAULT 0,
  `instructreviewers` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `instructreviewersformat` SMALLINT(3) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL,
  `phase` SMALLINT(3) NULL DEFAULT 0,
  `useexamples` TINYINT(2) NULL DEFAULT 0,
  `usepeerassessment` TINYINT(2) NULL DEFAULT 0,
  `useselfassessment` TINYINT(2) NULL DEFAULT 0,
  `grade` DECIMAL(10,5) NULL DEFAULT 80,
  `gradinggrade` DECIMAL(10,5) NULL DEFAULT 20,
  `strategy` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `evaluation` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `gradedecimals` SMALLINT(3) NULL DEFAULT 0,
  `nattachments` SMALLINT(3) NULL DEFAULT 0,
  `submissionfiletypes` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `latesubmissions` TINYINT(2) NULL DEFAULT 0,
  `maxbytes` BIGINT(10) NULL DEFAULT 100000,
  `examplesmode` SMALLINT(3) NULL DEFAULT 0,
  `submissionstart` BIGINT(10) NULL DEFAULT 0,
  `submissionend` BIGINT(10) NULL DEFAULT 0,
  `assessmentstart` BIGINT(10) NULL DEFAULT 0,
  `assessmentend` BIGINT(10) NULL DEFAULT 0,
  `phaseswitchassessment` TINYINT(2) NOT NULL DEFAULT 0,
  `conclusion` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `conclusionformat` SMALLINT(3) NOT NULL DEFAULT 1,
  `overallfeedbackmode` SMALLINT(3) NULL DEFAULT 1,
  `overallfeedbackfiles` SMALLINT(3) NULL DEFAULT 0,
  `overallfeedbackfiletypes` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `overallfeedbackmaxbytes` BIGINT(10) NULL DEFAULT 100000,
  PRIMARY KEY (`id`),
  INDEX `work_cou3_ix` (`course` ASC),
  CONSTRAINT `work_cou_fk`
    FOREIGN KEY (`course`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table keeps information about the module instances and '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_submissions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_submissions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL,
  `example` TINYINT(2) NULL DEFAULT 0,
  `authorid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `title` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `content` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `contentformat` SMALLINT(3) NOT NULL DEFAULT 0,
  `contenttrust` SMALLINT(3) NOT NULL DEFAULT 0,
  `attachment` TINYINT(2) NULL DEFAULT 0,
  `grade` DECIMAL(10,5) NULL DEFAULT NULL,
  `gradeover` DECIMAL(10,5) NULL DEFAULT NULL,
  `gradeoverby` BIGINT(10) NULL DEFAULT NULL,
  `feedbackauthor` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `feedbackauthorformat` SMALLINT(3) NULL DEFAULT 0,
  `timegraded` BIGINT(10) NULL DEFAULT NULL,
  `published` TINYINT(2) NULL DEFAULT 0,
  `late` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `worksubm_wor3_ix` (`workshopid` ASC),
  INDEX `worksubm_gra3_ix` (`gradeoverby` ASC),
  INDEX `worksubm_aut3_ix` (`authorid` ASC),
  CONSTRAINT `worksubm_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`),
  CONSTRAINT `worksubm_gra_fk`
    FOREIGN KEY (`gradeoverby`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `worksubm_aut_fk`
    FOREIGN KEY (`authorid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Info about the submission and the aggregation of the grade f'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_assessments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_assessments` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `submissionid` BIGINT(10) NOT NULL,
  `reviewerid` BIGINT(10) NOT NULL,
  `weight` BIGINT(10) NOT NULL DEFAULT 1,
  `timecreated` BIGINT(10) NULL DEFAULT 0,
  `timemodified` BIGINT(10) NULL DEFAULT 0,
  `grade` DECIMAL(10,5) NULL DEFAULT NULL,
  `gradinggrade` DECIMAL(10,5) NULL DEFAULT NULL,
  `gradinggradeover` DECIMAL(10,5) NULL DEFAULT NULL,
  `gradinggradeoverby` BIGINT(10) NULL DEFAULT NULL,
  `feedbackauthor` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `feedbackauthorformat` SMALLINT(3) NULL DEFAULT 0,
  `feedbackauthorattachment` SMALLINT(3) NULL DEFAULT 0,
  `feedbackreviewer` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `feedbackreviewerformat` SMALLINT(3) NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `workasse_sub3_ix` (`submissionid` ASC),
  INDEX `workasse_gra3_ix` (`gradinggradeoverby` ASC),
  INDEX `workasse_rev3_ix` (`reviewerid` ASC),
  CONSTRAINT `workasse_sub_fk`
    FOREIGN KEY (`submissionid`)
    REFERENCES `mydb`.`workshop_submissions` (`id`),
  CONSTRAINT `workasse_gra_fk`
    FOREIGN KEY (`gradinggradeoverby`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `workasse_rev_fk`
    FOREIGN KEY (`reviewerid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Info about the made assessment and automatically calculated '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_grades`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_grades` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `assessmentid` BIGINT(10) NOT NULL,
  `strategy` VARCHAR(30) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `dimensionid` BIGINT(10) NOT NULL,
  `grade` DECIMAL(10,5) NOT NULL,
  `peercomment` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `peercommentformat` SMALLINT(3) NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `workgrad_ass3_ix` (`assessmentid` ASC),
  UNIQUE INDEX `workgrad_assstrdim2_uix` (`assessmentid` ASC, `strategy` ASC, `dimensionid` ASC),
  CONSTRAINT `workgrad_ass_fk`
    FOREIGN KEY (`assessmentid`)
    REFERENCES `mydb`.`workshop_assessments` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'How the reviewers filled-up the grading forms, given grades '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_aggregations`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_aggregations` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `gradinggrade` DECIMAL(10,5) NULL DEFAULT NULL,
  `timegraded` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `workaggr_wor3_ix` (`workshopid` ASC),
  INDEX `workaggr_use3_ix` (`userid` ASC),
  UNIQUE INDEX `workaggr_woruse2_uix` (`workshopid` ASC, `userid` ASC),
  CONSTRAINT `workaggr_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`),
  CONSTRAINT `workaggr_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Aggregated grades for assessment are stored here. The aggreg'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_old`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_old` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `course` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `wtype` SMALLINT(3) NOT NULL DEFAULT 0,
  `nelements` SMALLINT(3) NOT NULL DEFAULT 1,
  `nattachments` SMALLINT(3) NOT NULL DEFAULT 0,
  `phase` TINYINT(2) NOT NULL DEFAULT 0,
  `format` TINYINT(2) NOT NULL DEFAULT 0,
  `gradingstrategy` TINYINT(2) NOT NULL DEFAULT 1,
  `resubmit` TINYINT(2) NOT NULL DEFAULT 0,
  `agreeassessments` TINYINT(2) NOT NULL DEFAULT 0,
  `hidegrades` TINYINT(2) NOT NULL DEFAULT 0,
  `anonymous` TINYINT(2) NOT NULL DEFAULT 0,
  `includeself` TINYINT(2) NOT NULL DEFAULT 0,
  `maxbytes` BIGINT(10) NOT NULL DEFAULT 100000,
  `submissionstart` BIGINT(10) NOT NULL DEFAULT 0,
  `assessmentstart` BIGINT(10) NOT NULL DEFAULT 0,
  `submissionend` BIGINT(10) NOT NULL DEFAULT 0,
  `assessmentend` BIGINT(10) NOT NULL DEFAULT 0,
  `releasegrades` BIGINT(10) NOT NULL DEFAULT 0,
  `grade` SMALLINT(3) NOT NULL DEFAULT 0,
  `gradinggrade` SMALLINT(3) NOT NULL DEFAULT 0,
  `ntassessments` SMALLINT(3) NOT NULL DEFAULT 0,
  `assessmentcomps` SMALLINT(3) NOT NULL DEFAULT 2,
  `nsassessments` SMALLINT(3) NOT NULL DEFAULT 0,
  `overallocation` SMALLINT(3) NOT NULL DEFAULT 0,
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  `teacherweight` SMALLINT(3) NOT NULL DEFAULT 1,
  `showleaguetable` SMALLINT(3) NOT NULL DEFAULT 0,
  `usepassword` SMALLINT(3) NOT NULL DEFAULT 0,
  `password` VARCHAR(32) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `newplugin` VARCHAR(28) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `newid` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `workold_cou2_ix` (`course` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Legacy workshop table to be dropped later in Moodle 2.x'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_elements_old`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_elements_old` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL DEFAULT 0,
  `elementno` SMALLINT(3) NOT NULL DEFAULT 0,
  `description` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `scale` SMALLINT(3) NOT NULL DEFAULT 0,
  `maxscore` SMALLINT(3) NOT NULL DEFAULT 1,
  `weight` SMALLINT(3) NOT NULL DEFAULT 11,
  `stddev` DOUBLE NOT NULL DEFAULT 0,
  `totalassessments` BIGINT(10) NOT NULL DEFAULT 0,
  `newplugin` VARCHAR(28) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `newid` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `workelemold_wor3_ix` (`workshopid` ASC),
  CONSTRAINT `workelemold_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Legacy workshop_elements table to be dropped later in Moodle'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_rubrics_old`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_rubrics_old` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL DEFAULT 0,
  `elementno` BIGINT(10) NOT NULL DEFAULT 0,
  `rubricno` SMALLINT(3) NOT NULL DEFAULT 0,
  `description` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `newplugin` VARCHAR(28) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `newid` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `workrubrold_wor3_ix` (`workshopid` ASC),
  CONSTRAINT `workrubrold_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Legacy workshop_rubrics table to be dropped later in Moodle '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_submissions_old`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_submissions_old` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `title` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `mailed` TINYINT(2) NOT NULL DEFAULT 0,
  `description` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `gradinggrade` SMALLINT(3) NOT NULL DEFAULT 0,
  `finalgrade` SMALLINT(3) NOT NULL DEFAULT 0,
  `late` SMALLINT(3) NOT NULL DEFAULT 0,
  `nassessments` BIGINT(10) NOT NULL DEFAULT 0,
  `newplugin` VARCHAR(28) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `newid` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `worksubmold_use2_ix` (`userid` ASC),
  INDEX `worksubmold_mai2_ix` (`mailed` ASC),
  INDEX `worksubmold_wor3_ix` (`workshopid` ASC),
  CONSTRAINT `worksubmold_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Legacy workshop_submissions table to be dropped later in Moo'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_assessments_old`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_assessments_old` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL DEFAULT 0,
  `submissionid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `timegraded` BIGINT(10) NOT NULL DEFAULT 0,
  `timeagreed` BIGINT(10) NOT NULL DEFAULT 0,
  `grade` DOUBLE NOT NULL DEFAULT 0,
  `gradinggrade` SMALLINT(3) NOT NULL DEFAULT 0,
  `teachergraded` SMALLINT(3) NOT NULL DEFAULT 0,
  `mailed` SMALLINT(3) NOT NULL DEFAULT 0,
  `resubmission` SMALLINT(3) NOT NULL DEFAULT 0,
  `donotuse` SMALLINT(3) NOT NULL DEFAULT 0,
  `generalcomment` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `teachercomment` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `newplugin` VARCHAR(28) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `newid` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `workasseold_use2_ix` (`userid` ASC),
  INDEX `workasseold_mai2_ix` (`mailed` ASC),
  INDEX `workasseold_wor3_ix` (`workshopid` ASC),
  INDEX `workasseold_sub3_ix` (`submissionid` ASC),
  CONSTRAINT `workasseold_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`),
  CONSTRAINT `workasseold_sub_fk`
    FOREIGN KEY (`submissionid`)
    REFERENCES `mydb`.`workshop_submissions` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Legacy workshop_assessments table to be dropped later in Moo'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_grades_old`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_grades_old` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL DEFAULT 0,
  `assessmentid` BIGINT(10) NOT NULL DEFAULT 0,
  `elementno` BIGINT(10) NOT NULL DEFAULT 0,
  `feedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `grade` SMALLINT(3) NOT NULL DEFAULT 0,
  `newplugin` VARCHAR(28) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `newid` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `workgradold_wor3_ix` (`workshopid` ASC),
  INDEX `workgradold_ass3_ix` (`assessmentid` ASC),
  CONSTRAINT `workgradold_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`),
  CONSTRAINT `workgradold_ass_fk`
    FOREIGN KEY (`assessmentid`)
    REFERENCES `mydb`.`workshop_assessments` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Legacy workshop_grades table to be dropped later in Moodle 2'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_stockcomments_old`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_stockcomments_old` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL DEFAULT 0,
  `elementno` BIGINT(10) NOT NULL DEFAULT 0,
  `comments` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `newplugin` VARCHAR(28) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `newid` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `workstocold_wor3_ix` (`workshopid` ASC),
  CONSTRAINT `workstocold_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Legacy workshop_stockcomments table to be dropped later in M'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshop_comments_old`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshop_comments_old` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL DEFAULT 0,
  `assessmentid` BIGINT(10) NOT NULL DEFAULT 0,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  `mailed` TINYINT(2) NOT NULL DEFAULT 0,
  `comments` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `newplugin` VARCHAR(28) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `newid` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `workcommold_use2_ix` (`userid` ASC),
  INDEX `workcommold_mai2_ix` (`mailed` ASC),
  INDEX `workcommold_wor3_ix` (`workshopid` ASC),
  INDEX `workcommold_ass3_ix` (`assessmentid` ASC),
  CONSTRAINT `workcommold_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`),
  CONSTRAINT `workcommold_ass_fk`
    FOREIGN KEY (`assessmentid`)
    REFERENCES `mydb`.`workshop_assessments` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Legacy workshop_comments table to be dropped later in Moodle'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`portfolio_mahara_queue`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`portfolio_mahara_queue` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `transferid` BIGINT(10) NOT NULL,
  `token` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `portmahaqueu_tok2_ix` (`token` ASC),
  INDEX `portmahaqueu_tra3_ix` (`transferid` ASC),
  CONSTRAINT `portmahaqueu_tra_fk`
    FOREIGN KEY (`transferid`)
    REFERENCES `mydb`.`portfolio_tempdata` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'maps mahara tokens to transfer ids'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`repository_onedrive_access`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`repository_onedrive_access` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `timemodified` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NOT NULL,
  `permissionid` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemid` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `repoonedacce_use3_ix` (`usermodified` ASC),
  CONSTRAINT `repoonedacce_use_fk`
    FOREIGN KEY (`usermodified`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'List of temporary access grants.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tool_cohortroles`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tool_cohortroles` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `cohortid` BIGINT(10) NOT NULL,
  `roleid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `usermodified` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `toolcoho_cohroluse2_uix` (`cohortid` ASC, `roleid` ASC, `userid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Mapping of users to cohort role assignments.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tool_customlang_components`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tool_customlang_components` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `version` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Contains the list of all installed plugins that provide thei'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tool_customlang`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tool_customlang` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `lang` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `componentid` BIGINT(10) NOT NULL,
  `stringid` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `original` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `master` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `local` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `timecustomized` BIGINT(10) NULL DEFAULT NULL,
  `outdated` SMALLINT(3) NULL DEFAULT 0,
  `modified` SMALLINT(3) NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `toolcust_lancomstr2_uix` (`lang` ASC, `componentid` ASC, `stringid` ASC),
  INDEX `toolcust_com3_ix` (`componentid` ASC),
  CONSTRAINT `toolcust_com_fk`
    FOREIGN KEY (`componentid`)
    REFERENCES `mydb`.`tool_customlang_components` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Contains the working checkout of all strings and their custo'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tool_monitor_rules`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tool_monitor_rules` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(1) NOT NULL,
  `name` VARCHAR(254) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `userid` BIGINT(10) NOT NULL,
  `courseid` BIGINT(10) NOT NULL,
  `plugin` VARCHAR(254) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `eventname` VARCHAR(254) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `template` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `templateformat` TINYINT(1) NOT NULL,
  `frequency` SMALLINT(4) NOT NULL,
  `timewindow` MEDIUMINT(5) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `toolmonirule_couuse2_ix` (`courseid` ASC, `userid` ASC),
  INDEX `toolmonirule_eve2_ix` (`eventname` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Table to store rules'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tool_monitor_subscriptions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tool_monitor_subscriptions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL,
  `ruleid` BIGINT(10) NOT NULL,
  `cmid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `lastnotificationsent` BIGINT(10) NOT NULL DEFAULT 0,
  `inactivedate` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `toolmonisubs_couuse2_ix` (`courseid` ASC, `userid` ASC),
  INDEX `toolmonisubs_rul3_ix` (`ruleid` ASC),
  CONSTRAINT `toolmonisubs_rul_fk`
    FOREIGN KEY (`ruleid`)
    REFERENCES `mydb`.`tool_monitor_rules` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Table to store user subscriptions to various rules'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tool_monitor_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tool_monitor_history` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `sid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `timesent` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `toolmonihist_sidusetim2_uix` (`sid` ASC, `userid` ASC, `timesent` ASC),
  INDEX `toolmonihist_sid3_ix` (`sid` ASC),
  CONSTRAINT `toolmonihist_sid_fk`
    FOREIGN KEY (`sid`)
    REFERENCES `mydb`.`tool_monitor_subscriptions` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Table to store history of message notifications sent'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tool_monitor_events`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tool_monitor_events` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `eventname` VARCHAR(254) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `contextid` BIGINT(10) NOT NULL,
  `contextlevel` BIGINT(10) NOT NULL,
  `contextinstanceid` BIGINT(10) NOT NULL,
  `link` VARCHAR(254) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `courseid` BIGINT(10) NOT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'A table that keeps a log of events related to subscriptions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tool_recyclebin_course`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tool_recyclebin_course` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `courseid` BIGINT(10) NOT NULL,
  `section` BIGINT(10) NOT NULL,
  `module` BIGINT(10) NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `toolrecycour_tim2_ix` (`timecreated` ASC),
  INDEX `toolrecycour_cou3_ix` (`courseid` ASC),
  CONSTRAINT `toolrecycour_cou_fk`
    FOREIGN KEY (`courseid`)
    REFERENCES `mydb`.`course` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'A list of items in the course recycle bin'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tool_recyclebin_category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tool_recyclebin_category` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `categoryid` BIGINT(10) NOT NULL,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `fullname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timecreated` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `toolrecycate_tim2_ix` (`timecreated` ASC),
  INDEX `toolrecycate_cat3_ix` (`categoryid` ASC),
  CONSTRAINT `toolrecycate_cat_fk`
    FOREIGN KEY (`categoryid`)
    REFERENCES `mydb`.`course_categories` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'A list of items in the category recycle bin'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tool_usertours_tours`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tool_usertours_tours` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `pathmatch` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `enabled` TINYINT(1) NOT NULL DEFAULT 0,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  `configdata` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'List of tours'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`tool_usertours_steps`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`tool_usertours_steps` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `tourid` BIGINT(10) NOT NULL,
  `title` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `content` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `targettype` TINYINT(2) NOT NULL,
  `targetvalue` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  `configdata` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `tooluserstep_tousor2_ix` (`tourid` ASC, `sortorder` ASC),
  INDEX `tooluserstep_tou3_ix` (`tourid` ASC),
  CONSTRAINT `tooluserstep_tou_fk`
    FOREIGN KEY (`tourid`)
    REFERENCES `mydb`.`tool_usertours_tours` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Steps in an tour'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`editor_atto_autosave`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`editor_atto_autosave` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `elementid` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `contextid` BIGINT(10) NOT NULL,
  `pagehash` VARCHAR(64) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `userid` BIGINT(10) NOT NULL,
  `drafttext` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `draftid` BIGINT(10) NULL DEFAULT NULL,
  `pageinstance` VARCHAR(64) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `timemodified` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `editattoauto_eleconusepag2_uix` (`elementid` ASC, `contextid` ASC, `userid` ASC, `pagehash` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Draft text that is auto-saved every 5 seconds while an edito'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`message_airnotifier_devices`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`message_airnotifier_devices` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userdeviceid` BIGINT(10) NOT NULL,
  `enable` TINYINT(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `messairndevi_use2_uix` (`userdeviceid` ASC),
  CONSTRAINT `messairndevi_use_fk`
    FOREIGN KEY (`userdeviceid`)
    REFERENCES `mydb`.`user_devices` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Store information about the devices registered in Airnotifie'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`message_popup`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`message_popup` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `messageid` BIGINT(10) NOT NULL,
  `isread` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `messpopu_mesisr2_uix` (`messageid` ASC, `isread` ASC),
  INDEX `messpopu_isr2_ix` (`isread` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Keep state of notifications for the popup message processor'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnetservice_enrol_courses`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnetservice_enrol_courses` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `hostid` BIGINT(10) NOT NULL,
  `remoteid` BIGINT(10) NOT NULL,
  `categoryid` BIGINT(10) NOT NULL,
  `categoryname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `sortorder` BIGINT(10) NOT NULL DEFAULT 0,
  `fullname` VARCHAR(254) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `shortname` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `idnumber` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `summary` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `summaryformat` SMALLINT(3) NULL DEFAULT 0,
  `startdate` BIGINT(10) NOT NULL,
  `roleid` BIGINT(10) NOT NULL,
  `rolename` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `mnetenrocour_hosrem2_uix` (`hostid` ASC, `remoteid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Caches the information fetched via XML-RPC about courses on '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`mnetservice_enrol_enrolments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`mnetservice_enrol_enrolments` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `hostid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `remotecourseid` BIGINT(10) NOT NULL,
  `rolename` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `enroltime` BIGINT(10) NOT NULL DEFAULT 0,
  `enroltype` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `mnetenroenro_use3_ix` (`userid` ASC),
  INDEX `mnetenroenro_hos3_ix` (`hostid` ASC),
  CONSTRAINT `mnetenroenro_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`),
  CONSTRAINT `mnetenroenro_hos_fk`
    FOREIGN KEY (`hostid`)
    REFERENCES `mydb`.`mnet_host` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Caches the information about enrolments of our local users i'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_calculated`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_calculated` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `question` BIGINT(10) NOT NULL DEFAULT 0,
  `answer` BIGINT(10) NOT NULL DEFAULT 0,
  `tolerance` VARCHAR(20) CHARACTER SET 'utf8' NOT NULL DEFAULT '0.0',
  `tolerancetype` BIGINT(10) NOT NULL DEFAULT 1,
  `correctanswerlength` BIGINT(10) NOT NULL DEFAULT 2,
  `correctanswerformat` BIGINT(10) NOT NULL DEFAULT 2,
  PRIMARY KEY (`id`),
  INDEX `quescalc_ans2_ix` (`answer` ASC),
  INDEX `quescalc_que3_ix` (`question` ASC),
  CONSTRAINT `quescalc_que_fk`
    FOREIGN KEY (`question`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Options for questions of type calculated'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_calculated_options`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_calculated_options` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `question` BIGINT(10) NOT NULL DEFAULT 0,
  `synchronize` TINYINT(2) NOT NULL DEFAULT 0,
  `single` SMALLINT(4) NOT NULL DEFAULT 0,
  `shuffleanswers` SMALLINT(4) NOT NULL DEFAULT 0,
  `correctfeedback` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `correctfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `partiallycorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `partiallycorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `incorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `incorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `answernumbering` VARCHAR(10) CHARACTER SET 'utf8' NOT NULL DEFAULT 'abc',
  `shownumcorrect` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `quescalcopti_que3_ix` (`question` ASC),
  CONSTRAINT `quescalcopti_que_fk`
    FOREIGN KEY (`question`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Options for questions of type calculated'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_dataset_definitions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_dataset_definitions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `category` BIGINT(10) NOT NULL DEFAULT 0,
  `name` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `type` BIGINT(10) NOT NULL DEFAULT 0,
  `options` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `itemcount` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `quesdatadefi_cat3_ix` (`category` ASC),
  CONSTRAINT `quesdatadefi_cat_fk`
    FOREIGN KEY (`category`)
    REFERENCES `mydb`.`question_categories` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Organises and stores properties for dataset items'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_dataset_items`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_dataset_items` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `definition` BIGINT(10) NOT NULL DEFAULT 0,
  `itemnumber` BIGINT(10) NOT NULL DEFAULT 0,
  `value` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `quesdataitem_def2_ix` (`definition` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Individual dataset items'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_datasets`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_datasets` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `question` BIGINT(10) NOT NULL DEFAULT 0,
  `datasetdefinition` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `quesdata_quedat2_ix` (`question` ASC, `datasetdefinition` ASC),
  INDEX `quesdata_que3_ix` (`question` ASC),
  INDEX `quesdata_dat3_ix` (`datasetdefinition` ASC),
  CONSTRAINT `quesdata_que_fk`
    FOREIGN KEY (`question`)
    REFERENCES `mydb`.`question` (`id`),
  CONSTRAINT `quesdata_dat_fk`
    FOREIGN KEY (`datasetdefinition`)
    REFERENCES `mydb`.`question_dataset_definitions` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Many-many relation between questions and dataset definitions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_ddimageortext`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_ddimageortext` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `shuffleanswers` SMALLINT(4) NOT NULL DEFAULT 1,
  `correctfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `correctfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `partiallycorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `partiallycorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `incorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `incorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `shownumcorrect` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `qtypddim_que3_ix` (`questionid` ASC),
  CONSTRAINT `qtypddim_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines drag and drop (text or images onto a background imag'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_ddimageortext_drops`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_ddimageortext_drops` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `no` BIGINT(10) NOT NULL DEFAULT 0,
  `xleft` BIGINT(10) NOT NULL DEFAULT 0,
  `ytop` BIGINT(10) NOT NULL DEFAULT 0,
  `choice` BIGINT(10) NOT NULL DEFAULT 0,
  `label` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `qtypddimdrop_que3_ix` (`questionid` ASC),
  CONSTRAINT `qtypddimdrop_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Drop boxes'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_ddimageortext_drags`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_ddimageortext_drags` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `no` BIGINT(10) NOT NULL DEFAULT 0,
  `draggroup` BIGINT(10) NOT NULL DEFAULT 0,
  `infinite` SMALLINT(4) NOT NULL DEFAULT 0,
  `label` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `qtypddimdrag_que3_ix` (`questionid` ASC),
  CONSTRAINT `qtypddimdrag_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Images to drag. Actual file names are not stored here we use'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_ddmarker`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_ddmarker` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `shuffleanswers` SMALLINT(4) NOT NULL DEFAULT 1,
  `correctfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `correctfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `partiallycorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `partiallycorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `incorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `incorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `shownumcorrect` TINYINT(2) NOT NULL DEFAULT 0,
  `showmisplaced` SMALLINT(4) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `qtypddma_que3_ix` (`questionid` ASC),
  CONSTRAINT `qtypddma_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines drag and drop (text or images onto a background imag'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_ddmarker_drops`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_ddmarker_drops` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `no` BIGINT(10) NOT NULL DEFAULT 0,
  `shape` VARCHAR(255) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `coords` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `choice` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `qtypddmadrop_que3_ix` (`questionid` ASC),
  CONSTRAINT `qtypddmadrop_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'drop regions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_ddmarker_drags`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_ddmarker_drags` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `no` BIGINT(10) NOT NULL DEFAULT 0,
  `label` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `infinite` SMALLINT(4) NOT NULL DEFAULT 0,
  `noofdrags` BIGINT(10) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `qtypddmadrag_que3_ix` (`questionid` ASC),
  CONSTRAINT `qtypddmadrag_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Labels for markers to drag.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_ddwtos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_ddwtos` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `shuffleanswers` SMALLINT(4) NOT NULL DEFAULT 1,
  `correctfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `correctfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `partiallycorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `partiallycorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `incorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `incorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `shownumcorrect` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `quesddwt_que3_ix` (`questionid` ASC),
  CONSTRAINT `quesddwt_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines drag and drop (words into sentences) questions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_essay_options`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_essay_options` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL,
  `responseformat` VARCHAR(16) CHARACTER SET 'utf8' NOT NULL DEFAULT 'editor',
  `responserequired` TINYINT(2) NOT NULL DEFAULT 1,
  `responsefieldlines` SMALLINT(4) NOT NULL DEFAULT 15,
  `attachments` SMALLINT(4) NOT NULL DEFAULT 0,
  `attachmentsrequired` SMALLINT(4) NOT NULL DEFAULT 0,
  `graderinfo` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `graderinfoformat` SMALLINT(4) NOT NULL DEFAULT 0,
  `responsetemplate` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `responsetemplateformat` SMALLINT(4) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `qtypessaopti_que2_uix` (`questionid` ASC),
  CONSTRAINT `qtypessaopti_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Extra options for essay questions.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_gapselect`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_gapselect` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `shuffleanswers` SMALLINT(4) NOT NULL DEFAULT 1,
  `correctfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `correctfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `partiallycorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `partiallycorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `incorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `incorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `shownumcorrect` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `quesgaps_que3_ix` (`questionid` ASC),
  CONSTRAINT `quesgaps_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines select missing words questions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_match_options`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_match_options` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `shuffleanswers` SMALLINT(4) NOT NULL DEFAULT 1,
  `correctfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `correctfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `partiallycorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `partiallycorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `incorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `incorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `shownumcorrect` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `qtypmatcopti_que2_uix` (`questionid` ASC),
  CONSTRAINT `qtypmatcopti_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Defines the question-type specific options for matching ques'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_match_subquestions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_match_subquestions` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `questiontext` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `questiontextformat` TINYINT(2) NOT NULL DEFAULT 0,
  `answertext` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  INDEX `qtypmatcsubq_que3_ix` (`questionid` ASC),
  CONSTRAINT `qtypmatcsubq_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The subquestions that make up a matching question'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_multianswer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_multianswer` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `question` BIGINT(10) NOT NULL DEFAULT 0,
  `sequence` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `quesmult_que3_ix` (`question` ASC),
  CONSTRAINT `quesmult_que_fk`
    FOREIGN KEY (`question`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Options for multianswer questions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_multichoice_options`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_multichoice_options` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `layout` SMALLINT(4) NOT NULL DEFAULT 0,
  `single` SMALLINT(4) NOT NULL DEFAULT 0,
  `shuffleanswers` SMALLINT(4) NOT NULL DEFAULT 1,
  `correctfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `correctfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `partiallycorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `partiallycorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `incorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `incorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `answernumbering` VARCHAR(10) CHARACTER SET 'utf8' NOT NULL DEFAULT 'abc',
  `shownumcorrect` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `qtypmultopti_que2_uix` (`questionid` ASC),
  CONSTRAINT `qtypmultopti_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Options for multiple choice questions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_numerical`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_numerical` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `question` BIGINT(10) NOT NULL DEFAULT 0,
  `answer` BIGINT(10) NOT NULL DEFAULT 0,
  `tolerance` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '0.0',
  PRIMARY KEY (`id`),
  INDEX `quesnume_ans2_ix` (`answer` ASC),
  INDEX `quesnume_que3_ix` (`question` ASC),
  CONSTRAINT `quesnume_que_fk`
    FOREIGN KEY (`question`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Options for numerical questions.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_numerical_options`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_numerical_options` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `question` BIGINT(10) NOT NULL DEFAULT 0,
  `showunits` SMALLINT(4) NOT NULL DEFAULT 0,
  `unitsleft` SMALLINT(4) NOT NULL DEFAULT 0,
  `unitgradingtype` SMALLINT(4) NOT NULL DEFAULT 0,
  `unitpenalty` DECIMAL(12,7) NOT NULL DEFAULT 0.1,
  PRIMARY KEY (`id`),
  INDEX `quesnumeopti_que3_ix` (`question` ASC),
  CONSTRAINT `quesnumeopti_que_fk`
    FOREIGN KEY (`question`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Options for questions of type numerical This table is also u'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_numerical_units`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_numerical_units` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `question` BIGINT(10) NOT NULL DEFAULT 0,
  `multiplier` DECIMAL(40,20) NOT NULL DEFAULT 1.00000000000000000000,
  `unit` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `quesnumeunit_queuni2_uix` (`question` ASC, `unit` ASC),
  INDEX `quesnumeunit_que3_ix` (`question` ASC),
  CONSTRAINT `quesnumeunit_que_fk`
    FOREIGN KEY (`question`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Optional unit options for numerical questions. This table is'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_randomsamatch_options`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_randomsamatch_options` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `choose` BIGINT(10) NOT NULL DEFAULT 4,
  `subcats` TINYINT(2) NOT NULL DEFAULT 1,
  `correctfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `correctfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `partiallycorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `partiallycorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `incorrectfeedback` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `incorrectfeedbackformat` TINYINT(2) NOT NULL DEFAULT 0,
  `shownumcorrect` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `qtyprandopti_que2_uix` (`questionid` ASC),
  CONSTRAINT `qtyprandopti_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Info about a random short-answer matching question'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`qtype_shortanswer_options`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`qtype_shortanswer_options` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionid` BIGINT(10) NOT NULL DEFAULT 0,
  `usecase` TINYINT(2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `qtypshoropti_que2_uix` (`questionid` ASC),
  CONSTRAINT `qtypshoropti_que_fk`
    FOREIGN KEY (`questionid`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Options for short answer questions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`question_truefalse`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`question_truefalse` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `question` BIGINT(10) NOT NULL DEFAULT 0,
  `trueanswer` BIGINT(10) NOT NULL DEFAULT 0,
  `falseanswer` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `questrue_que3_ix` (`question` ASC),
  CONSTRAINT `questrue_que_fk`
    FOREIGN KEY (`question`)
    REFERENCES `mydb`.`question` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Options for True-False questions'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`gradingform_guide_criteria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`gradingform_guide_criteria` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `definitionid` BIGINT(10) NOT NULL,
  `sortorder` BIGINT(10) NOT NULL,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NULL DEFAULT NULL,
  `descriptionmarkers` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionmarkersformat` TINYINT(2) NULL DEFAULT NULL,
  `maxscore` DECIMAL(10,5) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `gradguidcrit_def3_ix` (`definitionid` ASC),
  CONSTRAINT `gradguidcrit_def_fk`
    FOREIGN KEY (`definitionid`)
    REFERENCES `mydb`.`grading_definitions` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the rows of the criteria grid.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`gradingform_guide_fillings`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`gradingform_guide_fillings` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `instanceid` BIGINT(10) NOT NULL,
  `criterionid` BIGINT(10) NOT NULL,
  `remark` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `remarkformat` TINYINT(2) NULL DEFAULT NULL,
  `score` DECIMAL(10,5) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `gradguidfill_ins3_ix` (`instanceid` ASC),
  INDEX `gradguidfill_cri3_ix` (`criterionid` ASC),
  UNIQUE INDEX `gradguidfill_inscri2_uix` (`instanceid` ASC, `criterionid` ASC),
  CONSTRAINT `gradguidfill_ins_fk`
    FOREIGN KEY (`instanceid`)
    REFERENCES `mydb`.`grading_instances` (`id`),
  CONSTRAINT `gradguidfill_cri_fk`
    FOREIGN KEY (`criterionid`)
    REFERENCES `mydb`.`gradingform_guide_criteria` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the data of how the guide is filled by a particular r'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`gradingform_guide_comments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`gradingform_guide_comments` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `definitionid` BIGINT(10) NOT NULL,
  `sortorder` BIGINT(10) NOT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `gradguidcomm_def3_ix` (`definitionid` ASC),
  CONSTRAINT `gradguidcomm_def_fk`
    FOREIGN KEY (`definitionid`)
    REFERENCES `mydb`.`grading_definitions` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'frequently used comments used in marking guide'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`gradingform_rubric_criteria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`gradingform_rubric_criteria` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `definitionid` BIGINT(10) NOT NULL,
  `sortorder` BIGINT(10) NOT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` TINYINT(2) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `gradrubrcrit_def3_ix` (`definitionid` ASC),
  CONSTRAINT `gradrubrcrit_def_fk`
    FOREIGN KEY (`definitionid`)
    REFERENCES `mydb`.`grading_definitions` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the rows of the rubric grid.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`gradingform_rubric_levels`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`gradingform_rubric_levels` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `criterionid` BIGINT(10) NOT NULL,
  `score` DECIMAL(10,5) NOT NULL,
  `definition` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `definitionformat` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `gradrubrleve_cri3_ix` (`criterionid` ASC),
  CONSTRAINT `gradrubrleve_cri_fk`
    FOREIGN KEY (`criterionid`)
    REFERENCES `mydb`.`gradingform_rubric_criteria` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the columns of the rubric grid.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`gradingform_rubric_fillings`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`gradingform_rubric_fillings` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `instanceid` BIGINT(10) NOT NULL,
  `criterionid` BIGINT(10) NOT NULL,
  `levelid` BIGINT(10) NULL DEFAULT NULL,
  `remark` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `remarkformat` TINYINT(2) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `gradrubrfill_lev2_ix` (`levelid` ASC),
  INDEX `gradrubrfill_ins3_ix` (`instanceid` ASC),
  INDEX `gradrubrfill_cri3_ix` (`criterionid` ASC),
  UNIQUE INDEX `gradrubrfill_inscri2_uix` (`instanceid` ASC, `criterionid` ASC),
  CONSTRAINT `gradrubrfill_ins_fk`
    FOREIGN KEY (`instanceid`)
    REFERENCES `mydb`.`grading_instances` (`id`),
  CONSTRAINT `gradrubrfill_cri_fk`
    FOREIGN KEY (`criterionid`)
    REFERENCES `mydb`.`gradingform_rubric_criteria` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the data of how the rubric is filled by a particular '
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assignfeedback_comments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assignfeedback_comments` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `assignment` BIGINT(10) NOT NULL DEFAULT 0,
  `grade` BIGINT(10) NOT NULL DEFAULT 0,
  `commenttext` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `commentformat` SMALLINT(4) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assicomm_ass3_ix` (`assignment` ASC),
  INDEX `assicomm_gra3_ix` (`grade` ASC),
  CONSTRAINT `assicomm_ass_fk`
    FOREIGN KEY (`assignment`)
    REFERENCES `mydb`.`assign` (`id`),
  CONSTRAINT `assicomm_gra_fk`
    FOREIGN KEY (`grade`)
    REFERENCES `mydb`.`assign_grades` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Text feedback for submitted assignments'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assignfeedback_editpdf_cmnt`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assignfeedback_editpdf_cmnt` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `gradeid` BIGINT(10) NOT NULL DEFAULT 0,
  `x` BIGINT(10) NULL DEFAULT 0,
  `y` BIGINT(10) NULL DEFAULT 0,
  `width` BIGINT(10) NULL DEFAULT 120,
  `rawtext` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `pageno` BIGINT(10) NOT NULL DEFAULT 0,
  `colour` VARCHAR(10) CHARACTER SET 'utf8' NULL DEFAULT 'black',
  `draft` TINYINT(2) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `assieditcmnt_grapag2_ix` (`gradeid` ASC, `pageno` ASC),
  INDEX `assieditcmnt_gra3_ix` (`gradeid` ASC),
  CONSTRAINT `assieditcmnt_gra_fk`
    FOREIGN KEY (`gradeid`)
    REFERENCES `mydb`.`assign_grades` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores comments added to pdfs'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assignfeedback_editpdf_annot`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assignfeedback_editpdf_annot` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `gradeid` BIGINT(10) NOT NULL DEFAULT 0,
  `pageno` BIGINT(10) NOT NULL DEFAULT 0,
  `x` BIGINT(10) NULL DEFAULT 0,
  `y` BIGINT(10) NULL DEFAULT 0,
  `endx` BIGINT(10) NULL DEFAULT 0,
  `endy` BIGINT(10) NULL DEFAULT 0,
  `path` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `type` VARCHAR(10) CHARACTER SET 'utf8' NULL DEFAULT 'line',
  `colour` VARCHAR(10) CHARACTER SET 'utf8' NULL DEFAULT 'black',
  `draft` TINYINT(2) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `assieditanno_grapag2_ix` (`gradeid` ASC, `pageno` ASC),
  INDEX `assieditanno_gra3_ix` (`gradeid` ASC),
  CONSTRAINT `assieditanno_gra_fk`
    FOREIGN KEY (`gradeid`)
    REFERENCES `mydb`.`assign_grades` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'stores annotations added to pdfs submitted by students'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assignfeedback_editpdf_quick`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assignfeedback_editpdf_quick` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `userid` BIGINT(10) NOT NULL DEFAULT 0,
  `rawtext` LONGTEXT CHARACTER SET 'utf8' NOT NULL,
  `width` BIGINT(10) NOT NULL DEFAULT 120,
  `colour` VARCHAR(10) CHARACTER SET 'utf8' NULL DEFAULT 'yellow',
  PRIMARY KEY (`id`),
  INDEX `assieditquic_use3_ix` (`userid` ASC),
  CONSTRAINT `assieditquic_use_fk`
    FOREIGN KEY (`userid`)
    REFERENCES `mydb`.`user` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores teacher specified quicklist comments'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assignfeedback_editpdf_queue`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assignfeedback_editpdf_queue` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `submissionid` BIGINT(10) NOT NULL,
  `submissionattempt` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Queue for processing.'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assignfeedback_file`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assignfeedback_file` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `assignment` BIGINT(10) NOT NULL DEFAULT 0,
  `grade` BIGINT(10) NOT NULL DEFAULT 0,
  `numfiles` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assifile_ass3_ix` (`assignment` ASC),
  INDEX `assifile_gra3_ix` (`grade` ASC),
  CONSTRAINT `assifile_ass_fk`
    FOREIGN KEY (`assignment`)
    REFERENCES `mydb`.`assign` (`id`),
  CONSTRAINT `assifile_gra_fk`
    FOREIGN KEY (`grade`)
    REFERENCES `mydb`.`assign_grades` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores info about the number of files submitted by a student'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assignsubmission_file`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assignsubmission_file` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `assignment` BIGINT(10) NOT NULL DEFAULT 0,
  `submission` BIGINT(10) NOT NULL DEFAULT 0,
  `numfiles` BIGINT(10) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assifile_ass6_ix` (`assignment` ASC),
  INDEX `assifile_sub3_ix` (`submission` ASC),
  CONSTRAINT `assifile_ass4_fk`
    FOREIGN KEY (`assignment`)
    REFERENCES `mydb`.`assign` (`id`),
  CONSTRAINT `assifile_sub_fk`
    FOREIGN KEY (`submission`)
    REFERENCES `mydb`.`assign_submission` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Info about file submissions for assignments'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`assignsubmission_onlinetext`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`assignsubmission_onlinetext` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `assignment` BIGINT(10) NOT NULL DEFAULT 0,
  `submission` BIGINT(10) NOT NULL DEFAULT 0,
  `onlinetext` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `onlineformat` SMALLINT(4) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `assionli_ass3_ix` (`assignment` ASC),
  INDEX `assionli_sub3_ix` (`submission` ASC),
  CONSTRAINT `assionli_ass_fk`
    FOREIGN KEY (`assignment`)
    REFERENCES `mydb`.`assign` (`id`),
  CONSTRAINT `assionli_sub_fk`
    FOREIGN KEY (`submission`)
    REFERENCES `mydb`.`assign_submission` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Info about onlinetext submission'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`quiz_overview_regrades`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`quiz_overview_regrades` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `questionusageid` BIGINT(10) NOT NULL,
  `slot` BIGINT(10) NOT NULL,
  `newfraction` DECIMAL(12,7) NULL DEFAULT NULL,
  `oldfraction` DECIMAL(12,7) NULL DEFAULT NULL,
  `regraded` SMALLINT(4) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This table records which question attempts need regrading an'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`quiz_statistics`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`quiz_statistics` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `hashcode` VARCHAR(40) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `whichattempts` SMALLINT(4) NOT NULL,
  `timemodified` BIGINT(10) NOT NULL,
  `firstattemptscount` BIGINT(10) NOT NULL,
  `highestattemptscount` BIGINT(10) NOT NULL,
  `lastattemptscount` BIGINT(10) NOT NULL,
  `allattemptscount` BIGINT(10) NOT NULL,
  `firstattemptsavg` DECIMAL(15,5) NULL DEFAULT NULL,
  `highestattemptsavg` DECIMAL(15,5) NULL DEFAULT NULL,
  `lastattemptsavg` DECIMAL(15,5) NULL DEFAULT NULL,
  `allattemptsavg` DECIMAL(15,5) NULL DEFAULT NULL,
  `median` DECIMAL(15,5) NULL DEFAULT NULL,
  `standarddeviation` DECIMAL(15,5) NULL DEFAULT NULL,
  `skewness` DECIMAL(15,10) NULL DEFAULT NULL,
  `kurtosis` DECIMAL(15,5) NULL DEFAULT NULL,
  `cic` DECIMAL(15,10) NULL DEFAULT NULL,
  `errorratio` DECIMAL(15,10) NULL DEFAULT NULL,
  `standarderror` DECIMAL(15,10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'table to cache results from analysis done in statistics repo'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshopallocation_scheduled`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshopallocation_scheduled` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL,
  `enabled` TINYINT(2) NOT NULL DEFAULT 0,
  `submissionend` BIGINT(10) NOT NULL,
  `timeallocated` BIGINT(10) NULL DEFAULT NULL,
  `settings` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `resultstatus` BIGINT(10) NULL DEFAULT NULL,
  `resultmessage` VARCHAR(1333) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `resultlog` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `worksche_wor2_uix` (`workshopid` ASC),
  CONSTRAINT `worksche_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Stores the allocation settings for the scheduled allocator'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshopeval_best_settings`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshopeval_best_settings` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL,
  `comparison` SMALLINT(3) NULL DEFAULT 5,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `workbestsett_wor2_uix` (`workshopid` ASC),
  CONSTRAINT `workbestsett_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Settings for the grading evaluation subplugin Comparison wit'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshopform_accumulative`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshopform_accumulative` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL,
  `sort` BIGINT(10) NULL DEFAULT 0,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` SMALLINT(3) NULL DEFAULT 0,
  `grade` BIGINT(10) NOT NULL,
  `weight` MEDIUMINT(5) NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `workaccu_wor3_ix` (`workshopid` ASC),
  CONSTRAINT `workaccu_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The assessment dimensions definitions of Accumulative gradin'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshopform_comments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshopform_comments` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL,
  `sort` BIGINT(10) NULL DEFAULT 0,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` SMALLINT(3) NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `workcomm_wor3_ix` (`workshopid` ASC),
  CONSTRAINT `workcomm_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The assessment dimensions definitions of Comments strategy f'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshopform_numerrors`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshopform_numerrors` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL,
  `sort` BIGINT(10) NULL DEFAULT 0,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` SMALLINT(3) NULL DEFAULT 0,
  `descriptiontrust` BIGINT(10) NULL DEFAULT NULL,
  `grade0` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `grade1` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `weight` MEDIUMINT(5) NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `worknume_wor3_ix` (`workshopid` ASC),
  CONSTRAINT `worknume_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The assessment dimensions definitions of Number of errors gr'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshopform_numerrors_map`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshopform_numerrors_map` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL,
  `nonegative` BIGINT(10) NOT NULL,
  `grade` DECIMAL(10,5) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `worknumemap_wor3_ix` (`workshopid` ASC),
  UNIQUE INDEX `worknumemap_wornon2_uix` (`workshopid` ASC, `nonegative` ASC),
  CONSTRAINT `worknumemap_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'This maps the number of errors to a percentual grade for sub'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshopform_rubric`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshopform_rubric` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL,
  `sort` BIGINT(10) NULL DEFAULT 0,
  `description` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `descriptionformat` SMALLINT(3) NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `workrubr_wor3_ix` (`workshopid` ASC),
  CONSTRAINT `workrubr_wor_fk`
    FOREIGN KEY (`workshopid`)
    REFERENCES `mydb`.`workshop` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The assessment dimensions definitions of Rubric grading stra'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshopform_rubric_levels`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshopform_rubric_levels` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `dimensionid` BIGINT(10) NOT NULL,
  `grade` DECIMAL(10,5) NOT NULL,
  `definition` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `definitionformat` SMALLINT(3) NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `workrubrleve_dim3_ix` (`dimensionid` ASC),
  CONSTRAINT `workrubrleve_dim_fk`
    FOREIGN KEY (`dimensionid`)
    REFERENCES `mydb`.`workshopform_rubric` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'The definition of rubric rating scales'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`workshopform_rubric_config`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`workshopform_rubric_config` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `workshopid` BIGINT(10) NOT NULL,
  `layout` VARCHAR(30) CHARACTER SET 'utf8' NULL DEFAULT 'list',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `workrubrconf_wor2_uix` (`workshopid` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Configuration table for the Rubric grading strategy'
ROW_FORMAT = Compressed;


-- -----------------------------------------------------
-- Table `mydb`.`logstore_standard_log`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`logstore_standard_log` (
  `id` BIGINT(10) NOT NULL AUTO_INCREMENT,
  `eventname` VARCHAR(255) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `component` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `action` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `target` VARCHAR(100) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `objecttable` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `objectid` BIGINT(10) NULL DEFAULT NULL,
  `crud` VARCHAR(1) CHARACTER SET 'utf8' NOT NULL DEFAULT '',
  `edulevel` TINYINT(1) NOT NULL,
  `contextid` BIGINT(10) NOT NULL,
  `contextlevel` BIGINT(10) NOT NULL,
  `contextinstanceid` BIGINT(10) NOT NULL,
  `userid` BIGINT(10) NOT NULL,
  `courseid` BIGINT(10) NULL DEFAULT NULL,
  `relateduserid` BIGINT(10) NULL DEFAULT NULL,
  `anonymous` TINYINT(1) NOT NULL DEFAULT 0,
  `other` LONGTEXT CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `timecreated` BIGINT(10) NOT NULL,
  `origin` VARCHAR(10) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `ip` VARCHAR(45) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `realuserid` BIGINT(10) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `logsstanlog_tim2_ix` (`timecreated` ASC),
  INDEX `logsstanlog_couanotim2_ix` (`courseid` ASC, `anonymous` ASC, `timecreated` ASC),
  INDEX `logsstanlog_useconconcrued2_ix` (`userid` ASC, `contextlevel` ASC, `contextinstanceid` ASC, `crud` ASC, `edulevel` ASC, `timecreated` ASC),
  INDEX `logsstanlog_con3_ix` (`contextid` ASC),
  CONSTRAINT `logsstanlog_con_fk`
    FOREIGN KEY (`contextid`)
    REFERENCES `mydb`.`context` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COMMENT = 'Standard log table'
ROW_FORMAT = Compressed;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
